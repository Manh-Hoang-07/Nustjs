import{a8 as r}from"./DDT-0HTi.js";var i={};function a(){return typeof window<"u"&&window.__NUXT__?.config?.public?.apiBase?window.__NUXT__.config.public.apiBase:i.API_BASE_URL||"http://127.0.0.1:8000"}const s=r.create({baseURL:a(),withCredentials:!0});function u(){const e=document.cookie.split(";");for(let t of e){const[o,n]=t.trim().split("=");if(o==="auth_token")return decodeURIComponent(n)}return null}s.interceptors.request.use(e=>{const t=u();return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>(console.error("API Request Error:",e),Promise.reject(e)));s.interceptors.response.use(e=>e,e=>(console.error("API Response Error:",{status:e.response?.status,data:e.response?.data,url:e.config?.url,message:e.message}),(e.response?.status===401||e.response?.status===403)&&console.warn("Authentication error detected:",e.response?.data),Promise.reject(e)));export{s as a};
