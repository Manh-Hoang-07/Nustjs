import{M as k}from"./D_ZLElLM.js";import{_ as q}from"./BOPsCARg.js";import{_ as u}from"./yLpPWoGU.js";import{u as U}from"./DCKoXk_D.js";import{G as s,I as w,b as $,i as _,o as S,d as n,H as N,a as t}from"./DDT-0HTi.js";import"./DlAUqK2U.js";const A={__name:"import-form",props:{show:Boolean,apiErrors:{type:Object,default:()=>({})},products:{type:Array,default:()=>[]},warehouses:{type:Array,default:()=>[]}},emits:["submit","cancel"],setup(r,{emit:g}){const i=r,p=g,m=s({get:()=>i.show,set:()=>c()}),V=w(null),b=U(i,"import",{product_id:"",warehouse_id:"",quantity:1,batch_no:"",lot_no:"",expiry_date:"",cost_price:null}),y=s(()=>({product_id:[{required:"Vui lòng chọn sản phẩm."}],warehouse_id:[{required:"Vui lòng chọn kho hàng."}],quantity:[{required:"Vui lòng nhập số lượng nhập kho."},{integer:"Số lượng phải là số nguyên."},{min:[1,"Số lượng nhập kho phải lớn hơn 0."]}],batch_no:[{max:[100,"Mã lô hàng không được vượt quá 100 ký tự."]}],lot_no:[{max:[100,"Số lô sản xuất không được vượt quá 100 ký tự."]}],expiry_date:[{date:"Hạn sử dụng không đúng định dạng."},{after:["today","Hạn sử dụng phải sau ngày hiện tại."]}],cost_price:[{numeric:"Giá vốn phải là số."},{min:[0,"Giá vốn không được âm."]}]})),v=s(()=>[{value:"",label:"Chọn sản phẩm"},...i.products.map(a=>({value:a.id,label:`${a.name} (${a.code})`}))]),x=s(()=>[{value:"",label:"Chọn kho hàng"},...i.warehouses.map(a=>({value:a.id,label:a.name}))]);function f(a){p("submit",a)}function c(){p("cancel")}return(a,h)=>(S(),$(k,{modelValue:m.value,"onUpdate:modelValue":h[0]||(h[0]=l=>m.value=l),title:"Nhập kho",size:"4xl"},{default:_(()=>[n(q,{"default-values":N(b),rules:y.value,"api-errors":r.apiErrors,"submit-text":"Nhập kho",onSubmit:f,onCancel:c,ref_key:"formWrapperRef",ref:V},{default:_(({form:l,errors:o,clearError:d,isSubmitting:C})=>[t("div",{class:"space-y-6"},[t("div",{class:"bg-gray-50 p-6 rounded-lg"},[t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Thông tin nhập kho"),t("div",{class:"grid grid-cols-1 md:grid-cols-2 gap-6"},[t("div",{class:"md:col-span-2"},[n(u,{modelValue:l.product_id,"onUpdate:modelValue":[e=>l.product_id=e,e=>d("product_id")],label:"Sản phẩm",name:"product_id",type:"select",options:v.value,error:o.product_id,required:""},null,8,["modelValue","onUpdate:modelValue","options","error"])]),t("div",{class:"md:col-span-2"},[n(u,{modelValue:l.warehouse_id,"onUpdate:modelValue":[e=>l.warehouse_id=e,e=>d("warehouse_id")],label:"Kho hàng",name:"warehouse_id",type:"select",options:x.value,error:o.warehouse_id,required:""},null,8,["modelValue","onUpdate:modelValue","options","error"])]),n(u,{modelValue:l.quantity,"onUpdate:modelValue":[e=>l.quantity=e,e=>d("quantity")],label:"Số lượng nhập",name:"quantity",type:"number",error:o.quantity,required:"",min:1},null,8,["modelValue","onUpdate:modelValue","error"])])]),t("div",{class:"bg-gray-50 p-6 rounded-lg"},[t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Thông tin lô hàng"),t("div",{class:"grid grid-cols-1 md:grid-cols-2 gap-6"},[n(u,{modelValue:l.batch_no,"onUpdate:modelValue":[e=>l.batch_no=e,e=>d("batch_no")],label:"Mã lô hàng",name:"batch_no",error:o.batch_no,placeholder:"Nhập mã lô hàng"},null,8,["modelValue","onUpdate:modelValue","error"]),n(u,{modelValue:l.lot_no,"onUpdate:modelValue":[e=>l.lot_no=e,e=>d("lot_no")],label:"Số lô sản xuất",name:"lot_no",error:o.lot_no,placeholder:"Nhập số lô sản xuất"},null,8,["modelValue","onUpdate:modelValue","error"]),n(u,{modelValue:l.expiry_date,"onUpdate:modelValue":[e=>l.expiry_date=e,e=>d("expiry_date")],label:"Hạn sử dụng",name:"expiry_date",type:"date",error:o.expiry_date},null,8,["modelValue","onUpdate:modelValue","error"]),n(u,{modelValue:l.cost_price,"onUpdate:modelValue":[e=>l.cost_price=e,e=>d("cost_price")],label:"Giá vốn",name:"cost_price",type:"number",error:o.cost_price,min:0,step:.01,placeholder:"Nhập giá vốn"},null,8,["modelValue","onUpdate:modelValue","error"])])])])]),_:1},8,["default-values","rules","api-errors"])]),_:1},8,["modelValue"]))}};export{A as default};
