import{_ as w}from"./Bnq9IgaM.js";import{I as f,E as k,G as V,c as u,a as e,j as i,d as N,i as P,w as T,e as g,f as s,K as d,H as t,L as C,t as b,o as m,J as z}from"./DDT-0HTi.js";const S={__name:"register",setup(q){const r=f({name:"",email:"",phone:"",password:"",confirmPassword:"",agreeTerms:!1}),n=f(!1),o=f(""),c=f(""),h=k(),x=V(()=>r.value.name&&r.value.email&&r.value.password&&r.value.confirmPassword&&r.value.agreeTerms&&r.value.password===r.value.confirmPassword),v=async()=>{if(!x.value){o.value="Vui lòng điền đầy đủ thông tin và xác nhận mật khẩu";return}if(r.value.password!==r.value.confirmPassword){o.value="Mật khẩu xác nhận không khớp";return}n.value=!0,o.value="",c.value="";try{const p=await h.register({name:r.value.name,email:r.value.email,phone:r.value.phone,password:r.value.password});p.success?(c.value="Đăng ký thành công! Vui lòng kiểm tra email để xác thực tài khoản.",r.value={name:"",email:"",phone:"",password:"",confirmPassword:"",agreeTerms:!1},setTimeout(()=>{z("/login")},3e3)):o.value=p.message||"Có lỗi xảy ra trong quá trình đăng ký"}catch{o.value="Có lỗi xảy ra, vui lòng thử lại"}finally{n.value=!1}};return(p,a)=>{const y=w;return m(),u("div",{class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},[e("div",{class:"max-w-md w-full space-y-8"},[e("div",null,[e("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," Đăng ký tài khoản mới "),e("p",{class:"mt-2 text-center text-sm text-gray-600"},[i(" Hoặc "),N(y,{to:"/login",class:"font-medium text-blue-600 hover:text-blue-500"},{default:P(()=>[i(" đăng nhập vào tài khoản hiện có ")]),_:1})])]),e("form",{class:"mt-8 space-y-6",onSubmit:T(v,["prevent"])},[e("div",{class:"space-y-4"},[e("div",null,[e("label",{for:"name",class:"block text-sm font-medium text-gray-700"},"Họ và tên"),s(e("input",{id:"name","onUpdate:modelValue":a[0]||(a[0]=l=>t(r).name=l),name:"name",type:"text",required:"",class:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Nhập họ và tên"},null,512),[[d,t(r).name]])]),e("div",null,[e("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email"),s(e("input",{id:"email","onUpdate:modelValue":a[1]||(a[1]=l=>t(r).email=l),name:"email",type:"email",required:"",class:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Nhập địa chỉ email"},null,512),[[d,t(r).email]])]),e("div",null,[e("label",{for:"phone",class:"block text-sm font-medium text-gray-700"},"Số điện thoại"),s(e("input",{id:"phone","onUpdate:modelValue":a[2]||(a[2]=l=>t(r).phone=l),name:"phone",type:"tel",class:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Nhập số điện thoại"},null,512),[[d,t(r).phone]])]),e("div",null,[e("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"Mật khẩu"),s(e("input",{id:"password","onUpdate:modelValue":a[3]||(a[3]=l=>t(r).password=l),name:"password",type:"password",required:"",class:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Nhập mật khẩu"},null,512),[[d,t(r).password]])]),e("div",null,[e("label",{for:"confirmPassword",class:"block text-sm font-medium text-gray-700"},"Xác nhận mật khẩu"),s(e("input",{id:"confirmPassword","onUpdate:modelValue":a[4]||(a[4]=l=>t(r).confirmPassword=l),name:"confirmPassword",type:"password",required:"",class:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Nhập lại mật khẩu"},null,512),[[d,t(r).confirmPassword]])])]),e("div",{class:"flex items-center"},[s(e("input",{id:"agree-terms","onUpdate:modelValue":a[5]||(a[5]=l=>t(r).agreeTerms=l),name:"agree-terms",type:"checkbox",required:"",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[C,t(r).agreeTerms]]),e("label",{for:"agree-terms",class:"ml-2 block text-sm text-gray-900"},[i(" Tôi đồng ý với "),e("a",{href:"#",class:"text-blue-600 hover:text-blue-500"},"điều khoản sử dụng"),i(" và "),e("a",{href:"#",class:"text-blue-600 hover:text-blue-500"},"chính sách bảo mật")])]),e("div",null,[e("button",{type:"submit",disabled:t(n)||!t(x),class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},[t(n)?(m(),u("span",{key:0,class:"absolute left-0 inset-y-0 flex items-center pl-3"},[(m(),u("svg",{class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]))])):g("",!0),i(" "+b(t(n)?"Đang đăng ký...":"Đăng ký"),1)],8,["disabled"])]),t(o)?(m(),u("div",{key:0,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded"},b(t(o)),1)):g("",!0),t(c)?(m(),u("div",{key:1,class:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded"},b(t(c)),1)):g("",!0)],32)])])}}};export{S as default};
