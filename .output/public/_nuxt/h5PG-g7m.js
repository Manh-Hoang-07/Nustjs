import{G as y,N as k,O as F,b as M,i as S,o,a as t,w as D,f as m,c as n,e as u,j as p,k as c,K as b,t as l,F as N,g as j,P as E}from"./CRPNSmKO.js";import{M as _}from"./D3qKhv56.js";import"./DlAUqK2U.js";const H={__name:"ShippingServiceForm",props:{show:Boolean,service:Object,providers:{type:Array,default:()=>[]},apiErrors:{type:Object,default:()=>({})},mode:String},emits:["submit","cancel"],setup(d,{emit:V}){const g=d,x=V,v=y({get:()=>g.show,set:()=>w()}),q=y(()=>g.mode==="edit"?"Chỉnh sửa dịch vụ":"Thêm dịch vụ mới"),e=k({name:"",code:"",provider_id:"",base_price:"",weight_fee:"",estimated_days:"",status:"active"}),s=k({});F(()=>g.service,a=>{a?(e.name=a.name||"",e.code=a.code||"",e.provider_id=a.provider_id||"",e.base_price=a.base_price||"",e.weight_fee=a.weight_fee||"",e.estimated_days=a.estimated_days||"",e.status=a.status||"active"):B()},{immediate:!0});function B(){e.name="",e.code="",e.provider_id="",e.base_price="",e.weight_fee="",e.estimated_days="",e.status="active",h()}function h(){Object.keys(s).forEach(a=>delete s[a])}const C=y(()=>({name:[{required:"Tên dịch vụ là bắt buộc."}],code:[{required:"Mã dịch vụ là bắt buộc."}],provider_id:[{required:"Provider là bắt buộc."}],base_price:[{required:"Base price là bắt buộc."},{number:"Base price phải là số."}],weight_fee:[{required:"Weight fee là bắt buộc."},{number:"Weight fee phải là số."}],estimated_days:[{required:"Estimated days là bắt buộc."},{number:"Estimated days phải là số."}]}));function T(){h();let a=!0;const i=C.value;for(const r in i)for(const f of i[r]){if(f.required&&!e[r]){s[r]=f.required,a=!1;break}if(f.number&&e[r]&&isNaN(e[r])){s[r]=f.number,a=!1;break}}return a}function U(){if(!T())return;const a=new FormData;a.append("name",e.name),a.append("code",e.code),a.append("provider_id",e.provider_id),a.append("base_price",e.base_price),a.append("weight_fee",e.weight_fee),a.append("estimated_days",e.estimated_days),a.append("status",e.status),x("submit",a)}function w(){x("cancel")}return(a,i)=>(o(),M(_,{modelValue:v.value,"onUpdate:modelValue":i[7]||(i[7]=r=>v.value=r),title:q.value},{default:S(()=>[t("form",{onSubmit:D(U,["prevent"]),class:"space-y-4"},[t("div",null,[t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[p("Tên dịch vụ "),t("span",{class:"text-red-500"},"*")]),m(t("input",{"onUpdate:modelValue":i[0]||(i[0]=r=>e.name=r),type:"text",class:c(["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":s.name||d.apiErrors.name}]),maxlength:"100"},null,2),[[b,e.name]]),s.name?(o(),n("p",{key:0,class:"mt-1 text-sm text-red-600"},l(s.name),1)):d.apiErrors.name?(o(),n("p",{key:1,class:"mt-1 text-sm text-red-600"},l(d.apiErrors.name),1)):u("",!0)]),t("div",null,[t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[p("Mã dịch vụ (code) "),t("span",{class:"text-red-500"},"*")]),m(t("input",{"onUpdate:modelValue":i[1]||(i[1]=r=>e.code=r),type:"text",class:c(["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":s.code||d.apiErrors.code}]),maxlength:"50"},null,2),[[b,e.code]]),s.code?(o(),n("p",{key:0,class:"mt-1 text-sm text-red-600"},l(s.code),1)):d.apiErrors.code?(o(),n("p",{key:1,class:"mt-1 text-sm text-red-600"},l(d.apiErrors.code),1)):u("",!0)]),t("div",null,[t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[p("Provider "),t("span",{class:"text-red-500"},"*")]),m(t("select",{"onUpdate:modelValue":i[2]||(i[2]=r=>e.provider_id=r),class:c(["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":s.provider_id||d.apiErrors.provider_id}])},[t("option",{value:""},"Chọn provider"),(o(!0),n(N,null,j(d.providers,r=>(o(),n("option",{key:r.id,value:r.id},l(r.name),9,["value"]))),128))],2),[[E,e.provider_id]]),s.provider_id?(o(),n("p",{key:0,class:"mt-1 text-sm text-red-600"},l(s.provider_id),1)):d.apiErrors.provider_id?(o(),n("p",{key:1,class:"mt-1 text-sm text-red-600"},l(d.apiErrors.provider_id),1)):u("",!0)]),t("div",null,[t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[p("Base Price "),t("span",{class:"text-red-500"},"*")]),m(t("input",{"onUpdate:modelValue":i[3]||(i[3]=r=>e.base_price=r),type:"number",class:c(["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":s.base_price||d.apiErrors.base_price}])},null,2),[[b,e.base_price]]),s.base_price?(o(),n("p",{key:0,class:"mt-1 text-sm text-red-600"},l(s.base_price),1)):d.apiErrors.base_price?(o(),n("p",{key:1,class:"mt-1 text-sm text-red-600"},l(d.apiErrors.base_price),1)):u("",!0)]),t("div",null,[t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[p("Weight Fee "),t("span",{class:"text-red-500"},"*")]),m(t("input",{"onUpdate:modelValue":i[4]||(i[4]=r=>e.weight_fee=r),type:"number",class:c(["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":s.weight_fee||d.apiErrors.weight_fee}])},null,2),[[b,e.weight_fee]]),s.weight_fee?(o(),n("p",{key:0,class:"mt-1 text-sm text-red-600"},l(s.weight_fee),1)):d.apiErrors.weight_fee?(o(),n("p",{key:1,class:"mt-1 text-sm text-red-600"},l(d.apiErrors.weight_fee),1)):u("",!0)]),t("div",null,[t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[p("Estimated Days "),t("span",{class:"text-red-500"},"*")]),m(t("input",{"onUpdate:modelValue":i[5]||(i[5]=r=>e.estimated_days=r),type:"number",class:c(["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":s.estimated_days||d.apiErrors.estimated_days}])},null,2),[[b,e.estimated_days]]),s.estimated_days?(o(),n("p",{key:0,class:"mt-1 text-sm text-red-600"},l(s.estimated_days),1)):d.apiErrors.estimated_days?(o(),n("p",{key:1,class:"mt-1 text-sm text-red-600"},l(d.apiErrors.estimated_days),1)):u("",!0)]),t("div",null,[t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Trạng thái"),m(t("select",{"onUpdate:modelValue":i[6]||(i[6]=r=>e.status=r),class:c(["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":s.status||d.apiErrors.status}])},[t("option",{value:"active"},"Hoạt động"),t("option",{value:"inactive"},"Không hoạt động")],2),[[E,e.status]]),s.status?(o(),n("p",{key:0,class:"mt-1 text-sm text-red-600"},l(s.status),1)):d.apiErrors.status?(o(),n("p",{key:1,class:"mt-1 text-sm text-red-600"},l(d.apiErrors.status),1)):u("",!0)]),t("div",{class:"flex justify-end space-x-3 pt-4"},[t("button",{type:"button",onClick:w,class:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none"},"Huỷ"),t("button",{type:"submit",class:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none"},l(d.mode==="edit"?"Cập nhật":"Thêm mới"),1)])],32)]),_:1},8,["modelValue","title"]))}};export{H as default};
