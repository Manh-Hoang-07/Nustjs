import{G as p,N as h,I as F,O as M,b as U,i as B,o as i,a as r,w as D,f as m,c as l,e as f,j as b,k,K as v,t as d,F as V,g as P,P as S}from"./DDT-0HTi.js";import{M as O}from"./D_ZLElLM.js";import"./DlAUqK2U.js";const H={__name:"ApiProviderForm",props:{show:Boolean,provider:Object,apiErrors:{type:Object,default:()=>({})},mode:String,statusEnums:{type:Array,default:()=>[{value:"active",name:"Hoạt động"},{value:"inactive",name:"Không hoạt động"}]},envEnums:{type:Array,default:()=>[{value:"production",name:"Production"},{value:"test",name:"Test"}]}},emits:["submit","cancel"],setup(n,{emit:T}){const y=n,g=T,q=p(()=>y.mode==="edit"?"Chỉnh sửa Provider":"Thêm Provider mới"),x=p({get:()=>y.show,set:()=>E()}),t=h({name:"",api_key:"",secret_key:"",env:"production",status:"active"}),o=h({}),c=F(!1);M(()=>y.provider,s=>{s?(t.name=s.name||"",t.api_key=s.api_key||"",t.secret_key=s.secret_key||"",t.env=s.env||"production",t.status=s.status||"active"):K()},{immediate:!0});function K(){t.name="",t.api_key="",t.secret_key="",t.env="production",t.status="active",w()}function w(){Object.keys(o).forEach(s=>delete o[s])}const A=p(()=>({name:[{required:"Tên Provider là bắt buộc"},{max:[100,"Tên Provider không được vượt quá 100 ký tự"]}],api_key:[{required:"API Key là bắt buộc"},{max:[100,"API Key không được vượt quá 100 ký tự"]}],secret_key:[{required:"Secret Key là bắt buộc"},{max:[100,"Secret Key không được vượt quá 100 ký tự"]}]}));function j(){w();let s=!0;const a=A.value;for(const e in a)for(const u of a[e]){if(u.required&&!t[e]){o[e]=u.required,s=!1;break}if(u.max&&t[e]&&t[e].length>u.max[0]){o[e]=u.max[1],s=!1;break}}return s}function C(){if(j()){c.value=!0;try{const s=new FormData;Object.entries(t).forEach(([a,e])=>{e!=null&&e!==""&&s.append(a,e)}),g("submit",s)}finally{c.value=!1}}}function E(){g("cancel")}return(s,a)=>(i(),U(O,{modelValue:x.value,"onUpdate:modelValue":a[5]||(a[5]=e=>x.value=e),title:q.value},{default:B(()=>[r("form",{onSubmit:D(C,["prevent"]),class:"space-y-4"},[r("div",{class:"space-y-4"},[r("div",null,[r("label",{for:"name",class:"block text-sm font-medium text-gray-700 mb-1"},[b("Tên Provider "),r("span",{class:"text-red-500"},"*")]),m(r("input",{id:"name","onUpdate:modelValue":a[0]||(a[0]=e=>t.name=e),type:"text",class:k(["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":o.name||n.apiErrors.name}]),maxlength:"100"},null,2),[[v,t.name]]),o.name?(i(),l("p",{key:0,class:"mt-1 text-sm text-red-600"},d(o.name),1)):n.apiErrors.name?(i(),l("p",{key:1,class:"mt-1 text-sm text-red-600"},d(n.apiErrors.name),1)):f("",!0)]),r("div",null,[r("label",{for:"api_key",class:"block text-sm font-medium text-gray-700 mb-1"},[b("API Key "),r("span",{class:"text-red-500"},"*")]),m(r("input",{id:"api_key","onUpdate:modelValue":a[1]||(a[1]=e=>t.api_key=e),type:"text",class:k(["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":o.api_key||n.apiErrors.api_key}]),maxlength:"100"},null,2),[[v,t.api_key]]),o.api_key?(i(),l("p",{key:0,class:"mt-1 text-sm text-red-600"},d(o.api_key),1)):n.apiErrors.api_key?(i(),l("p",{key:1,class:"mt-1 text-sm text-red-600"},d(n.apiErrors.api_key),1)):f("",!0)]),r("div",null,[r("label",{for:"secret_key",class:"block text-sm font-medium text-gray-700 mb-1"},[b("Secret Key "),r("span",{class:"text-red-500"},"*")]),m(r("input",{id:"secret_key","onUpdate:modelValue":a[2]||(a[2]=e=>t.secret_key=e),type:"text",class:k(["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":o.secret_key||n.apiErrors.secret_key}]),maxlength:"100"},null,2),[[v,t.secret_key]]),o.secret_key?(i(),l("p",{key:0,class:"mt-1 text-sm text-red-600"},d(o.secret_key),1)):n.apiErrors.secret_key?(i(),l("p",{key:1,class:"mt-1 text-sm text-red-600"},d(n.apiErrors.secret_key),1)):f("",!0)]),r("div",null,[r("label",{for:"env",class:"block text-sm font-medium text-gray-700 mb-1"},"Môi trường"),m(r("select",{id:"env","onUpdate:modelValue":a[3]||(a[3]=e=>t.env=e),class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"},[(i(!0),l(V,null,P(n.envEnums,e=>(i(),l("option",{key:e.value,value:e.value},d(e.name),9,["value"]))),128))],512),[[S,t.env]])]),r("div",null,[r("label",{for:"status",class:"block text-sm font-medium text-gray-700 mb-1"},"Trạng thái"),m(r("select",{id:"status","onUpdate:modelValue":a[4]||(a[4]=e=>t.status=e),class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"},[(i(!0),l(V,null,P(n.statusEnums,e=>(i(),l("option",{key:e.value,value:e.value},d(e.name),9,["value"]))),128))],512),[[S,t.status]])])]),r("div",{class:"flex justify-end gap-2 pt-4"},[r("button",{type:"button",onClick:E,class:"px-4 py-2 bg-gray-100 rounded-xl hover:bg-gray-200"}," Hủy "),r("button",{type:"submit",disabled:c.value,class:"px-4 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 disabled:opacity-50"},d(c.value?"Đang lưu...":"Lưu"),9,["disabled"])])],32)]),_:1},8,["modelValue","title"]))}};export{H as default};
