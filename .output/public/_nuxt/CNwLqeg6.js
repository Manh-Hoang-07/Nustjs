import{G as x,N as w,I as O,O as B,b as D,i as M,o as i,a as r,w as F,f as u,c as l,e as c,j as T,k as p,K as b,t as d,F as N,g as A,P as z}from"./DDT-0HTi.js";import{M as G}from"./D_ZLElLM.js";import{g as H}from"./Bz77BRzt.js";import"./DlAUqK2U.js";const R={__name:"form",props:{show:Boolean,warehouse:Object,apiErrors:{type:Object,default:()=>({})},mode:String,loading:{type:Boolean,default:!1}},emits:["submit","cancel"],setup(a,{emit:V}){const g=a,h=V,y=x({get:()=>g.show,set:()=>E()}),S=x(()=>g.mode==="edit"?"Chỉnh sửa kho hàng":"Thêm kho hàng mới"),e=w({name:"",address:"",city:"",province:"",phone:"",email:"",status:"active"}),s=w({}),f=O(!1),k=x(()=>{const n=H("basic_status"),o={};return Array.isArray(n)&&n.forEach(t=>{o[t.value]=t.label}),o}),q=x(()=>({name:[{required:"Tên kho hàng là bắt buộc"},{max:[255,"Tên kho hàng không được vượt quá 255 ký tự"]}],address:[{required:"Địa chỉ là bắt buộc"},{max:[255,"Địa chỉ không được vượt quá 255 ký tự"]}],city:[{max:[255,"Thành phố không được vượt quá 255 ký tự"]}],province:[{max:[255,"Tỉnh/Thành không được vượt quá 255 ký tự"]}],phone:[{max:[20,"Số điện thoại không được vượt quá 20 ký tự"]}],email:[{max:[255,"Email không được vượt quá 255 ký tự"]},{pattern:[/^\S+@\S+\.\S+$/,"Email không hợp lệ"]}],status:[{required:"Trạng thái là bắt buộc"}]}));B(()=>g.warehouse,n=>{n?(e.name=n.name||"",e.address=n.address||"",e.city=n.city||"",e.province=n.province||"",e.phone=n.phone||"",e.email=n.email||"",e.status=n.status||Object.keys(k.value)[0]||""):U()},{immediate:!0});function U(){e.name="",e.address="",e.city="",e.province="",e.phone="",e.email="",e.status="active",v()}function v(){Object.keys(s).forEach(n=>delete s[n])}function j(){v();let n=!0;const o=q.value;for(const t in o)for(const m of o[t]){if(m.required&&!e[t]){s[t]=m.required,n=!1;break}if(m.max&&e[t]&&e[t].length>m.max[0]){s[t]=m.max[1],n=!1;break}if(m.pattern&&e[t]&&!m.pattern[0].test(e[t])){s[t]=m.pattern[1],n=!1;break}}return n}function C(){if(j()){f.value=!0;try{const n={};Object.entries(e).forEach(([o,t])=>{n[o]=t||""}),h("submit",n)}finally{f.value=!1}}}function E(){h("cancel")}return(n,o)=>(i(),D(G,{modelValue:y.value,"onUpdate:modelValue":o[7]||(o[7]=t=>y.value=t),title:S.value,loading:a.loading},{default:M(()=>[r("form",{onSubmit:F(C,["prevent"]),class:"space-y-4"},[r("div",null,[r("label",{class:"block text-sm font-medium mb-1"},[T("Tên kho hàng "),r("span",{class:"text-red-500"},"*")]),u(r("input",{"onUpdate:modelValue":o[0]||(o[0]=t=>e.name=t),type:"text",class:p(["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":s.name||a.apiErrors.name}]),maxlength:"255"},null,2),[[b,e.name]]),s.name?(i(),l("p",{key:0,class:"mt-1 text-sm text-red-600"},d(s.name),1)):a.apiErrors.name?(i(),l("p",{key:1,class:"mt-1 text-sm text-red-600"},d(a.apiErrors.name),1)):c("",!0)]),r("div",null,[r("label",{class:"block text-sm font-medium mb-1"},[T("Địa chỉ "),r("span",{class:"text-red-500"},"*")]),u(r("input",{"onUpdate:modelValue":o[1]||(o[1]=t=>e.address=t),type:"text",class:p(["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":s.address||a.apiErrors.address}]),maxlength:"255"},null,2),[[b,e.address]]),s.address?(i(),l("p",{key:0,class:"mt-1 text-sm text-red-600"},d(s.address),1)):a.apiErrors.address?(i(),l("p",{key:1,class:"mt-1 text-sm text-red-600"},d(a.apiErrors.address),1)):c("",!0)]),r("div",null,[r("label",{class:"block text-sm font-medium mb-1"},"Thành phố"),u(r("input",{"onUpdate:modelValue":o[2]||(o[2]=t=>e.city=t),type:"text",class:p(["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":s.city||a.apiErrors.city}]),maxlength:"255"},null,2),[[b,e.city]]),s.city?(i(),l("p",{key:0,class:"mt-1 text-sm text-red-600"},d(s.city),1)):a.apiErrors.city?(i(),l("p",{key:1,class:"mt-1 text-sm text-red-600"},d(a.apiErrors.city),1)):c("",!0)]),r("div",null,[r("label",{class:"block text-sm font-medium mb-1"},"Tỉnh/Thành"),u(r("input",{"onUpdate:modelValue":o[3]||(o[3]=t=>e.province=t),type:"text",class:p(["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":s.province||a.apiErrors.province}]),maxlength:"255"},null,2),[[b,e.province]]),s.province?(i(),l("p",{key:0,class:"mt-1 text-sm text-red-600"},d(s.province),1)):a.apiErrors.province?(i(),l("p",{key:1,class:"mt-1 text-sm text-red-600"},d(a.apiErrors.province),1)):c("",!0)]),r("div",null,[r("label",{class:"block text-sm font-medium mb-1"},"Số điện thoại"),u(r("input",{"onUpdate:modelValue":o[4]||(o[4]=t=>e.phone=t),type:"text",class:p(["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":s.phone||a.apiErrors.phone}]),maxlength:"20"},null,2),[[b,e.phone]]),s.phone?(i(),l("p",{key:0,class:"mt-1 text-sm text-red-600"},d(s.phone),1)):a.apiErrors.phone?(i(),l("p",{key:1,class:"mt-1 text-sm text-red-600"},d(a.apiErrors.phone),1)):c("",!0)]),r("div",null,[r("label",{class:"block text-sm font-medium mb-1"},"Email"),u(r("input",{"onUpdate:modelValue":o[5]||(o[5]=t=>e.email=t),type:"email",class:p(["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":s.email||a.apiErrors.email}]),maxlength:"255"},null,2),[[b,e.email]]),s.email?(i(),l("p",{key:0,class:"mt-1 text-sm text-red-600"},d(s.email),1)):a.apiErrors.email?(i(),l("p",{key:1,class:"mt-1 text-sm text-red-600"},d(a.apiErrors.email),1)):c("",!0)]),r("div",null,[r("label",{class:"block text-sm font-medium mb-1"},"Trạng thái"),u(r("select",{"onUpdate:modelValue":o[6]||(o[6]=t=>e.status=t),class:p(["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":s.status||a.apiErrors.status}])},[(i(!0),l(N,null,A(k.value,(t,m)=>(i(),l("option",{key:m,value:m},d(t),9,["value"]))),128))],2),[[z,e.status]]),s.status?(i(),l("p",{key:0,class:"mt-1 text-sm text-red-600"},d(s.status),1)):a.apiErrors.status?(i(),l("p",{key:1,class:"mt-1 text-sm text-red-600"},d(a.apiErrors.status),1)):c("",!0)]),r("div",{class:"flex justify-end space-x-3 pt-4"},[r("button",{type:"button",onClick:E,class:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none"},"Huỷ"),r("button",{type:"submit",class:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none",disabled:f.value},d(f.value?"Đang xử lý...":a.mode==="edit"?"Cập nhật":"Thêm mới"),9,["disabled"])])],32)]),_:1},8,["modelValue","title","loading"]))}};export{R as default};
