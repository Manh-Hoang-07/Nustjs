import E from"./B1aVs3gt.js";import{e as d}from"./B4pxijLT.js";import{g as k}from"./Bz77BRzt.js";import{M as A,I as n,N as B,O,c as S,b as j,e as D,o as f}from"./CRPNSmKO.js";import"./D3qKhv56.js";import"./DlAUqK2U.js";import"./D_8RvcO3.js";import"./Dlbv5MmI.js";import"./DSJ9rbdv.js";import"./DUQ0vjhe.js";import"./BTrW77Yx.js";import"./CaxYi4Fr.js";const G={__name:"edit",props:{show:Boolean,category:Object,onClose:Function},emits:["updated"],setup(y,{emit:g}){const l=A(),t=y,h=g,u=n(!1),p=n([]),m=n([]),c=n(null),i=n(!1),o=B({});O(()=>t.show,e=>{u.value=e,e?(Object.keys(o).forEach(a=>delete o[a]),C(),_(),t.category?.id&&v()):(c.value=null,i.value=!1)},{immediate:!0});async function v(){if(t.category?.id){i.value=!0;try{const e=await l.get(`/api/admin/categories/${t.category.id}`);c.value=e.data.data||e.data}catch{c.value=t.category}finally{i.value=!1}}}async function C(){try{const e=await l.get(d.categories.list,{params:{per_page:100}});p.value=e.data.data||[]}catch{p.value=[]}}async function _(){try{const e=k("basic_status");m.value=Array.isArray(e)?e:[]}catch{m.value=[]}}async function w(e){try{if(!t.category)return;Object.keys(o).forEach(r=>delete o[r]);const a={...e,_method:"PUT"};await l.post(d.categories.update(t.category.id),a),h("updated"),t.onClose()}catch(a){if(a.response?.status===422&&a.response?.data?.errors){const r=a.response.data.errors;for(const s in r)Array.isArray(r[s])?o[s]=r[s][0]:o[s]=r[s]}}}function b(){t.onClose&&t.onClose()}return(e,a)=>(f(),S("div",null,[u.value?(f(),j(E,{key:0,show:u.value,category:c.value,"parent-categories":p.value,"status-enums":m.value,"api-errors":o,loading:i.value,onSubmit:w,onCancel:b},null,8,["show","category","parent-categories","status-enums","api-errors","loading"])):D("",!0)]))}};export{G as default};
