import{M as T}from"./D3qKhv56.js";import{_ as C}from"./D_8RvcO3.js";import{_ as n}from"./Dlbv5MmI.js";import{_ as A}from"./BTrW77Yx.js";import{u as B}from"./DUQ0vjhe.js";import{G as s,b as r,i as h,o as p,d as u,e as g,a as v,H as M}from"./CRPNSmKO.js";import"./DlAUqK2U.js";import"./CaxYi4Fr.js";const z={__name:"form",props:{show:Boolean,user:Object,statusEnums:{type:Array,default:()=>[]},genderEnums:{type:Array,default:()=>[]},roleEnums:{type:Array,default:()=>[]},apiErrors:{type:Object,default:()=>({})},loading:{type:Boolean,default:!1}},emits:["submit","cancel"],setup(m,{emit:y}){const d=m,V=y,U=s(()=>d.user?"Chỉnh sửa người dùng":"Thêm người dùng mới"),c=s({get:()=>d.show,set:()=>b()}),w=s(()=>{const l=d.user||{};let i=[];return l.roles&&Array.isArray(l.roles)&&(i=l.roles.map(a=>a.id)),{username:"",email:"",phone:"",password:"",password_confirmation:"",name:"",gender:"",birthday:"",address:"",image:null,about:"",status:"",role_ids:i,remove_image:!1,...l}}),k=B(d,"user","image"),_=s(()=>({username:[{required:"Tên đăng nhập là bắt buộc."},{max:[50,"Tên đăng nhập không được vượt quá 50 ký tự."]}],email:[{required:"Email là bắt buộc."},{email:"Email không hợp lệ."}],phone:[{max:[20,"Số điện thoại không được vượt quá 20 ký tự."]}],password:d.user?[]:[{required:"Mật khẩu là bắt buộc."},{min:[8,"Mật khẩu phải có ít nhất 8 ký tự."]}],password_confirmation:d.user?[]:[{required:"Vui lòng xác nhận mật khẩu."}],name:[{max:[255,"Họ tên không được vượt quá 255 ký tự."]}],address:[{max:[255,"Địa chỉ không được vượt quá 255 ký tự."]}],about:[{max:[500,"Giới thiệu không được vượt quá 500 ký tự."]}]})),f=s(()=>(d.statusEnums||[]).map(l=>({value:l.value,label:l.label}))),$=s(()=>(d.genderEnums||[]).map(l=>({value:l.value,label:l.label}))),x=s(()=>(d.roleEnums||[]).map(l=>({value:l.id,label:l.name})));function q(l){V("submit",l)}function b(){V("cancel")}return(l,i)=>(p(),r(T,{modelValue:c.value,"onUpdate:modelValue":i[0]||(i[0]=a=>c.value=a),title:U.value,loading:m.loading},{default:h(()=>[u(C,{"default-values":w.value,rules:_.value,"api-errors":m.apiErrors,"submit-text":m.user?"Cập nhật":"Thêm mới",onSubmit:q,onCancel:b},{default:h(({form:a,errors:t,clearError:o,isSubmitting:O})=>[u(n,{modelValue:a.username,"onUpdate:modelValue":[e=>a.username=e,e=>o("username")],label:"Tên đăng nhập",name:"username",error:t.username,required:"",autocomplete:"username"},null,8,["modelValue","onUpdate:modelValue","error"]),u(n,{modelValue:a.email,"onUpdate:modelValue":[e=>a.email=e,e=>o("email")],label:"Email",name:"email",type:"email",error:t.email,required:"",autocomplete:"email"},null,8,["modelValue","onUpdate:modelValue","error"]),u(n,{modelValue:a.phone,"onUpdate:modelValue":[e=>a.phone=e,e=>o("phone")],label:"Số điện thoại",name:"phone",type:"tel",error:t.phone,autocomplete:"tel"},null,8,["modelValue","onUpdate:modelValue","error"]),m.user?g("",!0):(p(),r(n,{key:0,modelValue:a.password,"onUpdate:modelValue":[e=>a.password=e,e=>o("password")],label:"Mật khẩu",name:"password",type:"password",error:t.password,required:"",autocomplete:"new-password"},null,8,["modelValue","onUpdate:modelValue","error"])),m.user?g("",!0):(p(),r(n,{key:1,modelValue:a.password_confirmation,"onUpdate:modelValue":[e=>a.password_confirmation=e,e=>o("password_confirmation")],label:"Xác nhận mật khẩu",name:"password_confirmation",type:"password",error:t.password_confirmation,required:"",autocomplete:"new-password"},null,8,["modelValue","onUpdate:modelValue","error"])),u(n,{modelValue:a.name,"onUpdate:modelValue":[e=>a.name=e,e=>o("name")],label:"Họ tên",name:"name",error:t.name,autocomplete:"name"},null,8,["modelValue","onUpdate:modelValue","error"]),u(n,{modelValue:a.gender,"onUpdate:modelValue":[e=>a.gender=e,e=>o("gender")],label:"Giới tính",name:"gender",type:"select",options:$.value,error:t.gender},null,8,["modelValue","onUpdate:modelValue","options","error"]),u(n,{modelValue:a.birthday,"onUpdate:modelValue":[e=>a.birthday=e,e=>o("birthday")],label:"Ngày sinh",name:"birthday",type:"date",error:t.birthday},null,8,["modelValue","onUpdate:modelValue","error"]),u(n,{modelValue:a.address,"onUpdate:modelValue":[e=>a.address=e,e=>o("address")],label:"Địa chỉ",name:"address",error:t.address,autocomplete:"street-address"},null,8,["modelValue","onUpdate:modelValue","error"]),v("div",null,[v("label",{class:"block text-sm font-medium text-gray-700 mb-1",for:"user-image"},"Ảnh đại diện"),u(A,{modelValue:a.image,"onUpdate:modelValue":e=>a.image=e,"default-url":M(k),onRemove:e=>a.remove_image=!0},null,8,["modelValue","onUpdate:modelValue","default-url","onRemove"])]),u(n,{modelValue:a.about,"onUpdate:modelValue":[e=>a.about=e,e=>o("about")],label:"Giới thiệu",name:"about",type:"textarea",error:t.about,autocomplete:"off"},null,8,["modelValue","onUpdate:modelValue","error"]),u(n,{modelValue:a.role_ids,"onUpdate:modelValue":[e=>a.role_ids=e,e=>o("role_ids")],label:"Vai trò",name:"role_ids",type:"select",options:x.value,error:t.role_ids,multiple:""},null,8,["modelValue","onUpdate:modelValue","options","error"]),u(n,{modelValue:a.status,"onUpdate:modelValue":[e=>a.status=e,e=>o("status")],label:"Trạng thái",name:"status",type:"select",options:f.value,error:t.status},null,8,["modelValue","onUpdate:modelValue","options","error"])]),_:1},8,["default-values","rules","api-errors","submit-text"])]),_:1},8,["modelValue","title","loading"]))}};export{z as default};
