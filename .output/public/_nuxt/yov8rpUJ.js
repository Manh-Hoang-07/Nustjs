const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./B7TcIGHY.js","./BtvY8zYJ.js","./CRPNSmKO.js","./entry.DXI-NETG.css","./D3qKhv56.js","./DlAUqK2U.js","./Modal.BJ6M6RCs.css","./B4pxijLT.js","./edit.BNzdlegl.css","./BuUyENsG.js","./CxHwH1aF.js","./IGBFl809.js","./CONOwAJH.js","./Bz77BRzt.js"])))=>i.map(i=>d[i]);
import{I as c,z as J,G as W,c as i,a as e,d as C,b as f,e as h,H as s,F as M,g as T,t as l,o as n,Q as w,k as D,_ as b}from"./CRPNSmKO.js";import{g as Y,a as Z}from"./Bz77BRzt.js";import{u as ee,S as te,a as ae}from"./C4jMsr2g.js";import{_ as se}from"./BN8nsbAe.js";import{_ as ne}from"./D2JkzBjR.js";import{e as le}from"./B4pxijLT.js";import"./DlAUqK2U.js";import"./D3qKhv56.js";const he={__name:"index",setup(re){const R=w(()=>b(()=>import("./B7TcIGHY.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url)),L=w(()=>b(()=>import("./BuUyENsG.js"),__vite__mapDeps([9,1,2,3,4,5,6,7,8]),import.meta.url)),V=w(()=>b(()=>import("./CxHwH1aF.js"),__vite__mapDeps([10,2,3,11,12,13]),import.meta.url)),{items:g,loading:P,pagination:u,filters:S,fetchData:d,updateFilters:F,deleteItem:I}=ee(le.roles.list,{defaultFilters:{search:"",status:"",sort_by:"created_at_desc"}}),{showSuccess:y,showError:B}=ae(),o=c(null),v=c([]),p=c(!1),m=c(!1),x=c(!1);J(async()=>{U(),await d()});function O(t){F(t)}function U(){v.value=Y("basic_status")}function j(){p.value=!0}function _(){p.value=!1}function A(t){o.value=t,m.value=!0}function k(){m.value=!1,o.value=null}function H(t){o.value=t,x.value=!0}function E(){x.value=!1,o.value=null}async function N(){await d(),_(),y("Vai trò đã được tạo thành công")}async function $(){await d(),k(),y("Vai trò đã được cập nhật thành công")}async function K(){try{await I(o.value.id),E(),y("Vai trò đã được xóa thành công")}catch{B("Không thể xóa vai trò")}}function z(t){if(!t)return;const a=new URL(t).searchParams.get("page");d({page:a})}function G(t){return Z("basic_status",t)||t||"Không xác định"}function Q(t){return t==="active"?"bg-green-100 text-green-800":t==="inactive"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}const X=W(()=>{const t={};return g.value.forEach(r=>{t[r.id]=r}),t});function q(t){if(!t)return"—";const r=X.value[t];return r?r.display_name||r.name:t}return(t,r)=>(n(),i("div",{class:"container mx-auto p-4"},[e("div",{class:"flex justify-between items-center mb-6"},[e("h1",{class:"text-2xl font-bold"},"Quản lý vai trò"),e("button",{onClick:j,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none"}," Thêm vai trò mới ")]),C(s(V),{"initial-filters":s(S),"onUpdate:filters":O},null,8,["initial-filters"]),e("div",{class:"bg-white shadow-md rounded-lg overflow-hidden"},[s(P)?(n(),f(te,{key:0,type:"table",rows:5,columns:7})):(n(),i("table",{key:1,class:"min-w-full divide-y divide-gray-200"},[e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"ID"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Tên vai trò"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Tên hiển thị"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Guard"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Vai trò cha"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Trạng thái"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Thao tác")])]),e("tbody",{class:"bg-white divide-y divide-gray-200"},[(n(!0),i(M,null,T(s(g),a=>(n(),i("tr",{key:a.id},[e("td",{class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},l(a.id),1),e("td",{class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},l(a.name),1),e("td",{class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},l(a.display_name),1),e("td",{class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},l(a.guard_name),1),e("td",{class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},l(q(a.parent_id)),1),e("td",{class:"px-6 py-4 whitespace-nowrap"},[e("span",{class:D(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",Q(a.status)])},l(G(a.status)),3)]),e("td",{class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},[C(ne,{item:a,onEdit:A,onDelete:H},null,8,["item"])])]))),128)),s(g).length===0?(n(),i("tr",{key:0},[e("td",{colspan:"7",class:"px-6 py-4 text-center text-gray-500"}," Không có dữ liệu ")])):h("",!0)])]))]),e("div",{class:"mt-4 flex justify-between items-center"},[e("div",{class:"text-sm text-gray-700"}," Hiển thị "+l(s(u).from)+" đến "+l(s(u).to)+" trên tổng số "+l(s(u).total)+" bản ghi ",1),e("div",{class:"flex space-x-1"},[(n(!0),i(M,null,T(s(u).links,a=>(n(),i("button",{key:a.label,onClick:oe=>z(a.url),disabled:!a.url,class:D(["px-3 py-1 border rounded",a.active?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50",!a.url&&"opacity-50 cursor-not-allowed"]),innerHTML:a.label},null,10,["onClick","disabled","innerHTML"]))),128))])]),p.value?(n(),f(s(R),{key:0,show:p.value,"status-enums":v.value,"on-close":_,onCreated:N},null,8,["show","status-enums"])):h("",!0),m.value?(n(),f(s(L),{key:1,show:m.value,role:o.value,"status-enums":v.value,"on-close":k,onUpdated:$},null,8,["show","role","status-enums"])):h("",!0),x.value?(n(),f(se,{key:2,show:x.value,title:"Xác nhận xóa",message:`Bạn có chắc chắn muốn xóa vai trò ${o.value?.name||""}?`,"on-close":E,onConfirm:K},null,8,["show","message"])):h("",!0)]))}};export{he as default};
