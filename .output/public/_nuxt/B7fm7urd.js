import f from"./BalhKkJ_.js";import{e as d}from"./B4pxijLT.js";import{a as h}from"./CaxYi4Fr.js";import{I as y,N as w,O as C,c as k,b as v,e as b,o as c}from"./CRPNSmKO.js";import"./D3qKhv56.js";import"./DlAUqK2U.js";import"./D_8RvcO3.js";import"./Dlbv5MmI.js";import"./DSJ9rbdv.js";const F={__name:"import",props:{show:Boolean,products:{type:Array,default:()=>[]},warehouses:{type:Array,default:()=>[]},onClose:Function},emits:["imported"],setup(i,{emit:p}){const s=i,m=p,n=y(!1),o=w({});C(()=>s.show,r=>{n.value=r,r&&Object.keys(o).forEach(e=>delete o[e])},{immediate:!0});async function l(r){try{Object.keys(o).forEach(e=>delete o[e]),await h.post(d.inventory.import,r),m("imported"),s.onClose()}catch(e){if(e.response?.status===422&&e.response?.data?.errors){const a=e.response.data.errors;for(const t in a)Array.isArray(a[t])?o[t]=a[t][0]:o[t]=a[t]}}}function u(){s.onClose&&s.onClose()}return(r,e)=>(c(),k("div",null,[n.value?(c(),v(f,{key:0,show:n.value,"api-errors":o,products:i.products,warehouses:i.warehouses,onSubmit:l,onCancel:u},null,8,["show","api-errors","products","warehouses"])):b("",!0)]))}};export{F as default};
