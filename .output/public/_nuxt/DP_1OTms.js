import k from"./h5PG-g7m.js";import{a as D}from"./Bz77BRzt.js";import{e as v}from"./B4pxijLT.js";import{M as F,I as o,N as V,z as j,c as m,a as e,b as _,e as w,F as L,g as $,t as n,o as c,k as z}from"./CRPNSmKO.js";import"./D3qKhv56.js";import"./DlAUqK2U.js";const q={__name:"index",setup(I){const l=F(),y=o([]),d=o([]),g=o(!1),p=o(!1),u=o(!1),x=o(null),r=V({});j(async()=>{await h(),await C()});async function h(){g.value=!0;try{const t=await l.get(v.shippingServices.list);y.value=t.data.data}finally{g.value=!1}}async function C(){const t=await l.get("/api/admin/shipping/api");d.value=t.data.data}function S(t){const s=d.value.find(a=>a.id==t);return s?s.name:""}function b(t){return t==null?"":new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(t)}function E(){p.value=!0,Object.keys(r).forEach(t=>delete r[t])}function M(t){x.value=t,u.value=!0,Object.keys(r).forEach(s=>delete r[s])}function f(){p.value=!1,u.value=!1,x.value=null}async function N(t){try{await l.post(v.shippingServices.create,t),await h(),f()}catch(s){if(s.response?.status===422&&s.response?.data?.errors){const a=s.response.data.errors;for(const i in a)r[i]=a[i][0]}}}async function B(t){try{const s={...t,_method:"PUT"};await l.post(v.shippingServices.update(x.value.id),s),await h(),f()}catch(s){if(s.response?.status===422&&s.response?.data?.errors){const a=s.response.data.errors;for(const i in a)r[i]=a[i][0]}}}function K(t){}function P(t){return D("basic_status",t)||t||"Không xác định"}function T(t){return t==="active"?"bg-green-100 text-green-800":t==="inactive"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}return(t,s)=>(c(),m("div",{class:"container mx-auto p-4"},[e("div",{class:"flex justify-between items-center mb-6"},[e("h1",{class:"text-2xl font-bold"},"Quản lý dịch vụ vận chuyển"),e("button",{onClick:E,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none"}," Thêm dịch vụ mới ")]),e("div",{class:"bg-white shadow-md rounded-lg overflow-hidden"},[e("table",{class:"min-w-full divide-y divide-gray-200"},[e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Tên dịch vụ"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Mã dịch vụ"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Provider"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Base Price"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Weight Fee"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Estimated Days"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Trạng thái"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Thao tác")])]),e("tbody",{class:"bg-white divide-y divide-gray-200"},[(c(!0),m(L,null,$(y.value,a=>(c(),m("tr",{key:a.id},[e("td",{class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},n(a.name),1),e("td",{class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},n(a.code),1),e("td",{class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},n(S(a.provider_id)),1),e("td",{class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},n(b(a.base_price)),1),e("td",{class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},n(b(a.weight_fee)),1),e("td",{class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},n(a.estimated_days),1),e("td",{class:"px-6 py-4 whitespace-nowrap"},[e("span",{class:z(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",T(a.status)])},n(P(a.status)),3)]),e("td",{class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},[e("button",{onClick:i=>M(a),class:"text-indigo-600 hover:text-indigo-900 mr-3"}," Sửa ",8,["onClick"]),e("button",{onClick:i=>void 0,class:"text-red-600 hover:text-red-900"}," Xóa ",8,["onClick"])])]))),128)),y.value.length===0?(c(),m("tr",{key:0},[e("td",{colspan:"8",class:"px-6 py-4 text-center text-gray-500"},n(g.value?"Đang tải dữ liệu...":"Không có dữ liệu"),1)])):w("",!0)])])]),p.value?(c(),_(k,{key:0,show:p.value,providers:d.value,"api-errors":r,mode:"create",onSubmit:N,onCancel:f},null,8,["show","providers","api-errors"])):w("",!0),u.value?(c(),_(k,{key:1,show:u.value,service:x.value,providers:d.value,"api-errors":r,mode:"edit",onSubmit:B,onCancel:f},null,8,["show","service","providers","api-errors"])):w("",!0)]))}};export{q as default};
