const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Ci2LOaDB.js","./exfSo9V_.js","./D_ZLElLM.js","./DDT-0HTi.js","./entry.DXI-NETG.css","./DlAUqK2U.js","./Modal.BJ6M6RCs.css","./BOPsCARg.js","./yLpPWoGU.js","./Bj1hfyy3.js","./B4pxijLT.js","./dgtZnZUK.js","./DWWJmuBj.js","./Cdq0LXae.js","./DCKoXk_D.js","./BC2BtMeu.js","./Bj7Ql7Qk.js","./CONOwAJH.js","./Bz77BRzt.js"])))=>i.map(i=>d[i]);
import{I as d,z as ne,c as n,a as e,d as N,e as i,b as x,H as o,F as L,g as V,t as r,o as s,Q as _,k,_ as v}from"./DDT-0HTi.js";import{u as re,a as oe,S as le}from"./eo2OyMsK.js";import{_ as ce}from"./BUzXTnCp.js";import{_ as ie}from"./BErXvs3o.js";import{e as ue}from"./B4pxijLT.js";import{a as de}from"./Bj1hfyy3.js";import{_ as pe}from"./DlAUqK2U.js";import"./D_ZLElLM.js";const xe={__name:"index",setup(he){const A=_(()=>v(()=>import("./Ci2LOaDB.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]),import.meta.url)),F=_(()=>v(()=>import("./dgtZnZUK.js"),__vite__mapDeps([11,1,2,3,4,5,6,7,8,9,10]),import.meta.url)),O=_(()=>v(()=>import("./DWWJmuBj.js"),__vite__mapDeps([12,13,2,3,4,5,6,7,8,14,10,9]),import.meta.url)),P=_(()=>v(()=>import("./BC2BtMeu.js"),__vite__mapDeps([15,3,4,16,17,18]),import.meta.url)),{items:b,loading:q,pagination:h,filters:H,fetchData:p,updateFilters:B,deleteItem:K}=re(ue.inventory.list,{defaultFilters:{search:"",warehouse_id:"",brand_id:"",category_id:"",stock_status:"",expiry_status:"",sort_by:"updated_at_desc"}}),{showSuccess:m,showError:I}=oe(),u=d(null),l=d({brands:[],categories:[],warehouses:[],products:[]}),f=d(!1),y=d(!1),g=d(!1),w=d(!1);ne(async()=>{await Promise.all([R(),p()])});async function R(){try{const a=await de.get("/api/admin/inventory/filter-options");a.data.success&&(l.value=a.data.data)}catch{I("Không thể tải tùy chọn bộ lọc")}}function U(a){B(a)}function j(){f.value=!0}function C(){f.value=!1}function $(a){u.value=a,y.value=!0}function T(){y.value=!1,u.value=null}function z(){g.value=!0}function D(){g.value=!1}function Q(a){u.value=a,w.value=!0}function E(){w.value=!1,u.value=null}async function G(){await p(),C(),m("Tồn kho đã được tạo thành công")}async function X(){await p(),T(),m("Tồn kho đã được cập nhật thành công")}async function J(){await p(),D(),m("Nhập kho thành công")}async function W(){try{await K(u.value.id),E(),m("Tồn kho đã được xóa thành công")}catch{I("Không thể xóa tồn kho")}}function Y(a){if(!a)return;const t=new URL(a).searchParams.get("page");p({page:t})}function Z(a){return a?new Date(a).toLocaleDateString("vi-VN"):"N/A"}function ee(a){return a?new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(a):"0"}function te(a){if(!a)return"bg-gray-100 text-gray-800";const c=new Date,M=new Date(a).getTime()-c.getTime(),S=Math.ceil(M/(1e3*60*60*24));return S<0?"bg-red-100 text-red-800":S<=30?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}function ae(a){const c=a.quantity||0;return c<=0?"bg-red-100 text-red-800":c<=10?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}function se(a){const c=a.quantity||0;return c<=0?"Hết hàng":c<=10?"Sắp hết":"Còn hàng"}return(a,c)=>(s(),n("div",{class:"container mx-auto p-4"},[e("div",{class:"flex justify-between items-center mb-6"},[e("h1",{class:"text-2xl font-bold"},"Quản lý tồn kho"),e("div",{class:"flex space-x-2"},[e("button",{onClick:z,class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none"}," Nhập kho "),e("button",{onClick:j,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none"}," Thêm tồn kho mới ")])]),N(o(P),{"initial-filters":o(H),warehouses:l.value.warehouses||[],brands:l.value.brands||[],categories:l.value.categories||[],"onUpdate:filters":U},null,8,["initial-filters","warehouses","brands","categories"]),e("div",{class:"bg-white shadow-md rounded-lg overflow-hidden"},[o(q)?(s(),x(le,{key:0,type:"table",rows:5,columns:10})):(s(),n("table",{key:1,class:"min-w-full divide-y divide-gray-200"},[e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Sản phẩm"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Kho hàng"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Lô hàng"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Hạn SD"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Tổng SL"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Đã giữ"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Có thể bán"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Giá vốn"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Trạng thái"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Thao tác")])]),e("tbody",{class:"bg-white divide-y divide-gray-200"},[(s(!0),n(L,null,V(o(b),t=>(s(),n("tr",{key:t.id,class:"hover:bg-gray-50"},[e("td",{class:"px-6 py-4 whitespace-nowrap"},[e("div",null,[e("div",{class:"text-sm font-medium text-gray-900"},r(t.product_name||"N/A"),1),e("div",{class:"text-sm text-gray-500"},r(t.product_code||"N/A"),1),t.variant_sku?(s(),n("div",{key:0,class:"text-xs text-blue-600"},r(t.variant_sku),1)):i("",!0)])]),e("td",{class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},r(t.warehouse_name||"N/A"),1),e("td",{class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},[e("div",null,[t.batch_no?(s(),n("div",{key:0,class:"font-medium"},r(t.batch_no),1)):i("",!0),t.lot_no?(s(),n("div",{key:1,class:"text-xs text-gray-500"},r(t.lot_no),1)):i("",!0),!t.batch_no&&!t.lot_no?(s(),n("div",{key:2,class:"text-gray-400"},"-")):i("",!0)])]),e("td",{class:"px-6 py-4 whitespace-nowrap text-sm"},[t.expiry_date?(s(),n("div",{key:0},[e("span",{class:k([te(t.expiry_date),"px-2 py-1 text-xs font-semibold rounded-full"])},r(Z(t.expiry_date)),3)])):(s(),n("span",{key:1,class:"text-gray-400"},"Không có hạn"))]),e("td",{class:"px-6 py-4 whitespace-nowrap"},[e("span",{class:"text-sm font-medium text-gray-900"},r(t.quantity||0),1)]),e("td",{class:"px-6 py-4 whitespace-nowrap"},[e("span",{class:"text-sm text-gray-900"},r(t.reserved_quantity||0),1)]),e("td",{class:"px-6 py-4 whitespace-nowrap"},[e("span",{class:"text-sm font-medium text-gray-900"},r(t.available_quantity||0),1)]),e("td",{class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},[t.cost_price?(s(),n("span",{key:0},r(ee(t.cost_price)),1)):(s(),n("span",{key:1,class:"text-gray-400"},"-"))]),e("td",{class:"px-6 py-4 whitespace-nowrap"},[e("span",{class:k([ae(t),"px-2 inline-flex text-xs leading-5 font-semibold rounded-full"])},r(se(t)),3)]),e("td",{class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},[N(ie,{item:t,onEdit:$,onDelete:Q},null,8,["item"])])]))),128)),o(b).length===0?(s(),n("tr",{key:0},[e("td",{colspan:"10",class:"px-6 py-4 text-center text-gray-500"}," Không có dữ liệu ")])):i("",!0)])]))]),o(b).length>0?(s(),n("div",{key:0,class:"mt-4 flex justify-between items-center"},[e("div",{class:"text-sm text-gray-700"}," Hiển thị "+r(o(h).from||0)+" đến "+r(o(h).to||0)+" trên tổng số "+r(o(h).total||0)+" bản ghi ",1),e("div",{class:"flex space-x-1"},[(s(!0),n(L,null,V(o(h).links,t=>(s(),n("button",{key:t.label,onClick:M=>Y(t.url),disabled:!t.url,class:k(["px-3 py-1 border rounded",t.active?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50",!t.url&&"opacity-50 cursor-not-allowed"]),innerHTML:t.label},null,10,["onClick","disabled","innerHTML"]))),128))])])):i("",!0),f.value?(s(),x(o(A),{key:1,show:f.value,products:l.value.products||[],warehouses:l.value.warehouses||[],"on-close":C,onCreated:G},null,8,["show","products","warehouses"])):i("",!0),y.value?(s(),x(o(F),{key:2,show:y.value,inventory:u.value,products:l.value.products||[],warehouses:l.value.warehouses||[],"on-close":T,onUpdated:X},null,8,["show","inventory","products","warehouses"])):i("",!0),g.value?(s(),x(o(O),{key:3,show:g.value,products:l.value.products||[],warehouses:l.value.warehouses||[],"on-close":D,onImported:J},null,8,["show","products","warehouses"])):i("",!0),w.value?(s(),x(ce,{key:4,show:w.value,title:"Xác nhận xóa",message:"Bạn có chắc chắn muốn xóa tồn kho này?","on-close":E,onConfirm:W},null,8,["show"])):i("",!0)]))}},ke=pe(xe,[["__scopeId","data-v-536301b6"]]);export{ke as default};
