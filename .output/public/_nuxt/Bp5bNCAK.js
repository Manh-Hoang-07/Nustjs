import C from"./DGzQxrC5.js";import{e as w}from"./B4pxijLT.js";import{g}from"./Bz77BRzt.js";import{M as k,I as i,N as O,O as E,c as B,b as S,e as j,o as d}from"./DDT-0HTi.js";import"./D_ZLElLM.js";import"./DlAUqK2U.js";import"./BOPsCARg.js";import"./yLpPWoGU.js";import"./CONOwAJH.js";import"./Bj1hfyy3.js";import"./Bn5CcRjN.js";const W={__name:"edit",props:{show:Boolean,product:Object,onClose:Function},emits:["updated"],setup(m,{emit:f}){const l=k(),e=m,h=f,c=i(!1),a=O({}),p=i({}),n=i(null),u=i(!1);E(()=>e.show,t=>{c.value=t,t?(Object.keys(a).forEach(o=>delete a[o]),y(),e.product?.id&&v()):n.value=null},{immediate:!0});async function v(){if(e.product?.id){u.value=!0;try{const t=await l.get(`/api/admin/products/${e.product.id}`);n.value=t.data.data||t.data}catch{n.value=e.product}finally{u.value=!1}}}function y(){const t=g("product_status");p.value=t.map(o=>({value:o.value,label:o.label}))}async function _(t){try{if(!e.product)return;Object.keys(a).forEach(s=>delete a[s]);const o={...t,_method:"PUT"};await l.post(w.products.update(e.product.id),o),h("updated"),e.onClose()}catch(o){if(o.response?.status===422&&o.response?.data?.errors){const s=o.response.data.errors;for(const r in s)Array.isArray(s[r])?a[r]=s[r][0]:a[r]=s[r]}}}function b(){e.onClose&&e.onClose()}return(t,o)=>(d(),B("div",null,[c.value?(d(),S(C,{key:0,show:c.value,product:n.value,"api-errors":a,"status-options":p.value,loading:u.value,mode:"edit",onSubmit:_,onCancel:b},null,8,["show","product","api-errors","status-options","loading"])):j("",!0)]))}};export{W as default};
