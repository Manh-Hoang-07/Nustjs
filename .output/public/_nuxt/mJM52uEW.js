const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./BVS4iN1J.js","./BOZhY6Hf.js","./D_ZLElLM.js","./DDT-0HTi.js","./entry.DXI-NETG.css","./DlAUqK2U.js","./Modal.BJ6M6RCs.css","./BOPsCARg.js","./yLpPWoGU.js","./Bn5CcRjN.js","./Bj1hfyy3.js","./D6Zc0C2O.js","./B4pxijLT.js","./DleCNikt.js","./DbHhdjEw.js","./BYCh4XCl.js","./BTOlkfkn.js","./BLx356lU.js","./CvA0nvME.js","./Bj7Ql7Qk.js","./CONOwAJH.js"])))=>i.map(i=>d[i]);
import{I as l,z as de,c as r,a as e,d as V,b as u,e as c,H as o,F as N,g as S,t as i,o as a,Q as h,k as j,i as ge,_ as m}from"./DDT-0HTi.js";import{g as B,a as he}from"./Bz77BRzt.js";import{u as me,a as pe,S as fe}from"./eo2OyMsK.js";import{_ as ve}from"./BUzXTnCp.js";import{_ as xe}from"./BErXvs3o.js";import{e as H}from"./B4pxijLT.js";import"./DlAUqK2U.js";import"./D_ZLElLM.js";const Pe={__name:"index",setup(we){const I=h(()=>m(()=>import("./BVS4iN1J.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]),import.meta.url)),O=h(()=>m(()=>import("./DbHhdjEw.js"),__vite__mapDeps([14,1,2,3,4,5,6,7,8,9,10,11,12,13]),import.meta.url)),F=h(()=>m(()=>import("./BYCh4XCl.js"),__vite__mapDeps([15,16,2,3,4,5,6,7,8,12,13]),import.meta.url)),$=h(()=>m(()=>import("./BLx356lU.js"),__vite__mapDeps([17,2,3,4,5,6,7,12,13,10]),import.meta.url)),z=h(()=>m(()=>import("./CvA0nvME.js"),__vite__mapDeps([18,3,4,19,20]),import.meta.url)),{items:M,loading:K,pagination:p,filters:Q,fetchData:d,updateFilters:q,deleteItem:X}=me(H.users.list,{defaultFilters:{search:"",status:"",sort_by:"created_at_desc"}}),{showSuccess:g,showError:A}=pe(),s=l(null),k=l([]),C=l([]),f=l([]),v=l(!1),x=l(!1),w=l(!1),y=l(!1),_=l(!1);de(async()=>{J(),await P(),await d()});function G(t){q(t)}function J(){k.value=B("user_status"),C.value=B("gender")}async function P(){try{const b=await(await fetch(H.roles.list)).json();b.success&&(f.value=b.data)}catch(t){console.error("Error loading roles:",t),A("Không thể tải danh sách vai trò")}}function W(){v.value=!0}function L(){v.value=!1}function Y(t){s.value=t,x.value=!0}function R(){x.value=!1,s.value=null}function Z(t){s.value=t,w.value=!0}function T(){w.value=!1,s.value=null}async function ee(t){s.value=t,f.value.length===0&&await P(),y.value=!0}function D(){y.value=!1,s.value=null}function te(t){s.value=t,_.value=!0}function U(){_.value=!1,s.value=null}async function ne(){await d(),L(),g("Người dùng đã được tạo thành công")}async function ae(){await d(),R(),g("Người dùng đã được cập nhật thành công")}async function se(){T(),g("Mật khẩu đã được thay đổi thành công")}async function oe(){await d(),D(),g("Vai trò đã được phân công thành công")}async function le(){try{await X(s.value.id),U(),g("Người dùng đã được xóa thành công")}catch{A("Không thể xóa người dùng")}}function re(t){if(!t)return;const n=new URL(t).searchParams.get("page");d({page:n})}function ie(t){return he("user_status",t)||t||"Không xác định"}function ue(t){switch(t){case"active":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"inactive":return"bg-gray-100 text-gray-800";case"banned":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}return(t,b)=>(a(),r("div",{class:"container mx-auto p-4"},[e("div",{class:"flex justify-between items-center mb-6"},[e("h1",{class:"text-2xl font-bold"},"Quản lý người dùng"),e("button",{onClick:W,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none"}," Thêm người dùng mới ")]),V(o(z),{"initial-filters":o(Q),"onUpdate:filters":G},null,8,["initial-filters"]),e("div",{class:"bg-white shadow-md rounded-lg overflow-hidden"},[o(K)?(a(),u(fe,{key:0,type:"table",rows:5,columns:5})):(a(),r("table",{key:1,class:"min-w-full divide-y divide-gray-200"},[e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Tên đăng nhập"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Email"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Số điện thoại"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Trạng thái"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Thao tác")])]),e("tbody",{class:"bg-white divide-y divide-gray-200"},[(a(!0),r(N,null,S(o(M),n=>(a(),r("tr",{key:n.id},[e("td",{class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},i(n.username||"N/A"),1),e("td",{class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},i(n.email),1),e("td",{class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},i(n.phone||"N/A"),1),e("td",{class:"px-6 py-4 whitespace-nowrap"},[e("span",{class:j(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",ue(n.status)])},i(ie(n.status)),3)]),e("td",{class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},[V(xe,{item:n,onEdit:Y,onDelete:te},{custom:ge(({item:E})=>[e("button",{onClick:ce=>Z(E),class:"p-2 rounded-full hover:bg-blue-100 transition-colors duration-200",title:"Đổi mật khẩu"},[(a(),r("svg",{class:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})]))],8,["onClick"]),e("button",{onClick:ce=>ee(E),class:"p-2 rounded-full hover:bg-green-100 transition-colors duration-200",title:"Phân quyền"},[(a(),r("svg",{class:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]))],8,["onClick"])]),_:2},1032,["item"])])]))),128)),o(M).length===0?(a(),r("tr",{key:0},[e("td",{colspan:"5",class:"px-6 py-4 text-center text-gray-500"}," Không có dữ liệu ")])):c("",!0)])]))]),e("div",{class:"mt-4 flex justify-between items-center"},[e("div",{class:"text-sm text-gray-700"}," Hiển thị "+i(o(p).from)+" đến "+i(o(p).to)+" trên tổng số "+i(o(p).total)+" bản ghi ",1),e("div",{class:"flex space-x-1"},[(a(!0),r(N,null,S(o(p).links,n=>(a(),r("button",{key:n.label,onClick:E=>re(n.url),disabled:!n.url,class:j(["px-3 py-1 border rounded",n.active?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50",!n.url&&"opacity-50 cursor-not-allowed"]),innerHTML:n.label},null,10,["onClick","disabled","innerHTML"]))),128))])]),v.value?(a(),u(o(I),{key:0,show:v.value,"status-enums":k.value,"gender-enums":C.value,"role-enums":f.value,"on-close":L,onCreated:ne},null,8,["show","status-enums","gender-enums","role-enums"])):c("",!0),x.value?(a(),u(o(O),{key:1,show:x.value,user:s.value,"status-enums":k.value,"gender-enums":C.value,"role-enums":f.value,"on-close":R,onUpdated:ae},null,8,["show","user","status-enums","gender-enums","role-enums"])):c("",!0),w.value?(a(),u(o(F),{key:2,show:w.value,user:s.value,"on-close":T,onPasswordChanged:se},null,8,["show","user"])):c("",!0),y.value?(a(),u(o($),{key:3,show:y.value,user:s.value,"on-close":D,onRoleAssigned:oe},null,8,["show","user"])):c("",!0),_.value?(a(),u(ve,{key:4,show:_.value,title:"Xác nhận xóa",message:`Bạn có chắc chắn muốn xóa người dùng ${s.value?.username||""}?`,"on-close":U,onConfirm:le},null,8,["show","message"])):c("",!0)]))}};export{Pe as default};
