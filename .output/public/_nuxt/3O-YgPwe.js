import C from"./CAMymyY-.js";import{e as w}from"./B4pxijLT.js";import{g as E}from"./Bz77BRzt.js";import{M as g,I as c,N as k,O as A,c as B,b as O,e as S,o as m}from"./CRPNSmKO.js";import"./D3qKhv56.js";import"./DlAUqK2U.js";import"./D_8RvcO3.js";import"./Dlbv5MmI.js";import"./DSJ9rbdv.js";import"./DUQ0vjhe.js";import"./BTrW77Yx.js";import"./CaxYi4Fr.js";const q={__name:"edit",props:{show:Boolean,brand:Object,onClose:Function},emits:["updated"],setup(p,{emit:f}){const d=g(),e=p,b=f,l=c(!1),u=c([]),n=c(null),i=c(!1),r=k({});A(()=>e.show,a=>{l.value=a,a?(Object.keys(r).forEach(t=>delete r[t]),v(),e.brand?.id&&h()):(n.value=null,i.value=!1)},{immediate:!0});async function h(){if(e.brand?.id){i.value=!0;try{const a=await d.get(`/api/admin/brands/${e.brand.id}`);n.value=a.data.data||a.data}catch{n.value=e.brand}finally{i.value=!1}}}async function v(){try{const a=E("basic_status");u.value=Array.isArray(a)?a:[]}catch{u.value=[]}}async function y(a){try{if(!e.brand)return;Object.keys(r).forEach(s=>delete r[s]);const t={...a,_method:"PUT"};await d.post(w.brands.update(e.brand.id),t),b("updated"),e.onClose()}catch(t){if(t.response?.status===422&&t.response?.data?.errors){const s=t.response.data.errors;for(const o in s)Array.isArray(s[o])?r[o]=s[o][0]:r[o]=s[o]}}}function _(){e.onClose&&e.onClose()}return(a,t)=>(m(),B("div",null,[l.value?(m(),O(C,{key:0,show:l.value,brand:n.value,"status-enums":u.value,"api-errors":r,loading:i.value,onSubmit:y,onCancel:_},null,8,["show","brand","status-enums","api-errors","loading"])):S("",!0)]))}};export{q as default};
