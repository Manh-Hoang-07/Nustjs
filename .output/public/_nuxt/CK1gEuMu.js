import{M as q}from"./D3qKhv56.js";import{_ as U}from"./D_8RvcO3.js";import{_ as s}from"./Dlbv5MmI.js";import{u as T}from"./DSJ9rbdv.js";import{G as m,b as k,i as _,o as x,d as n,H as $}from"./CRPNSmKO.js";import"./DlAUqK2U.js";const A={__name:"form",props:{show:Boolean,permission:Object,parentOptions:{type:Array,default:()=>[]},statusEnums:{type:Array,default:()=>[]},apiErrors:{type:Object,default:()=>({})}},emits:["submit","cancel"],setup(i,{emit:V}){const l=i,d=V,b=m(()=>l.permission?"Chỉnh sửa quyền":"Thêm quyền mới"),p=m({get:()=>l.show,set:()=>r()}),y=T(l,"permission",{name:"",display_name:"",guard_name:"web",parent_id:"",status:""}),f=m(()=>({name:[{required:"Tên quyền là bắt buộc."},{max:[255,"Tên quyền không được vượt quá 255 ký tự."]}],display_name:[{max:[255,"Tên hiển thị không được vượt quá 255 ký tự."]}],guard_name:[{max:[255,"Guard không được vượt quá 255 ký tự."]}]})),h=m(()=>[{value:"",label:"-- Không có --"},...(l.parentOptions||[]).filter(t=>!l.permission||t.id!==l.permission.id).map(t=>({value:t.id,label:t.display_name||t.name}))]),v=m(()=>(l.statusEnums||[]).map(t=>({value:t.value,label:t.label})));function g(t){d("submit",t)}function r(){d("cancel")}return(t,c)=>(x(),k(q,{modelValue:p.value,"onUpdate:modelValue":c[0]||(c[0]=a=>p.value=a),title:b.value},{default:_(()=>[n(U,{"default-values":$(y),rules:f.value,"api-errors":i.apiErrors,"submit-text":i.permission?"Cập nhật":"Thêm mới",onSubmit:g,onCancel:r},{default:_(({form:a,errors:u,clearError:o,isSubmitting:C})=>[n(s,{modelValue:a.name,"onUpdate:modelValue":[e=>a.name=e,e=>o("name")],label:"Tên quyền",name:"name",error:u.name,required:"",autocomplete:"off"},null,8,["modelValue","onUpdate:modelValue","error"]),n(s,{modelValue:a.display_name,"onUpdate:modelValue":[e=>a.display_name=e,e=>o("display_name")],label:"Tên hiển thị",name:"display_name",error:u.display_name,autocomplete:"off"},null,8,["modelValue","onUpdate:modelValue","error"]),n(s,{modelValue:a.guard_name,"onUpdate:modelValue":[e=>a.guard_name=e,e=>o("guard_name")],label:"Guard",name:"guard_name",error:u.guard_name,autocomplete:"off"},null,8,["modelValue","onUpdate:modelValue","error"]),n(s,{modelValue:a.parent_id,"onUpdate:modelValue":[e=>a.parent_id=e,e=>o("parent_id")],label:"Quyền cha",name:"parent_id",type:"select",options:h.value,error:u.parent_id,placeholder:"Chọn quyền cha"},null,8,["modelValue","onUpdate:modelValue","options","error"]),n(s,{modelValue:a.status,"onUpdate:modelValue":[e=>a.status=e,e=>o("status")],label:"Trạng thái",name:"status",type:"select",options:v.value,error:u.status},null,8,["modelValue","onUpdate:modelValue","options","error"])]),_:1},8,["default-values","rules","api-errors","submit-text"])]),_:1},8,["modelValue","title"]))}};export{A as default};
