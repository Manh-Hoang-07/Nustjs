import w from"./exfSo9V_.js";import{e as C}from"./B4pxijLT.js";import{a as d}from"./Bj1hfyy3.js";import{I as u,N as b,O as k,c as g,b as A,e as B,o as p}from"./DDT-0HTi.js";import"./D_ZLElLM.js";import"./DlAUqK2U.js";import"./BOPsCARg.js";import"./yLpPWoGU.js";const S={__name:"edit",props:{show:Boolean,inventory:Object,products:{type:Array,default:()=>[]},warehouses:{type:Array,default:()=>[]},onClose:Function},emits:["updated"],setup(l,{emit:f}){const e=l,m=f,c=u(!1),n=u(null),s=u(!1),r=b({});k(()=>e.show,o=>{c.value=o,o?(Object.keys(r).forEach(t=>delete r[t]),e.inventory?.id&&y()):(n.value=null,s.value=!1)},{immediate:!0});async function y(){if(e.inventory?.id){s.value=!0;try{const o=await d.get(`/api/admin/inventory/${e.inventory.id}`);n.value=o.data.data||o.data}catch{n.value=e.inventory}finally{s.value=!1}}}async function v(o){try{Object.keys(r).forEach(t=>delete r[t]),await d.put(C.inventory.update(e.inventory.id),o),m("updated"),e.onClose()}catch(t){if(t.response?.status===422&&t.response?.data?.errors){const i=t.response.data.errors;for(const a in i)Array.isArray(i[a])?r[a]=i[a][0]:r[a]=i[a]}}}function h(){e.onClose&&e.onClose()}return(o,t)=>(p(),g("div",null,[c.value?(p(),A(w,{key:0,show:c.value,"api-errors":r,products:l.products,warehouses:l.warehouses,inventory:n.value,loading:s.value,onSubmit:v,onCancel:h},null,8,["show","api-errors","products","warehouses","inventory","loading"])):B("",!0)]))}};export{S as default};
