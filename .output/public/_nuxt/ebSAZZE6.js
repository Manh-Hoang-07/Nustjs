const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./_wwmUaj8.js","./DkP3I417.js","./D_ZLElLM.js","./DDT-0HTi.js","./entry.DXI-NETG.css","./DlAUqK2U.js","./Modal.BJ6M6RCs.css","./BOPsCARg.js","./yLpPWoGU.js","./DCKoXk_D.js","./B4pxijLT.js","./Bz77BRzt.js","./DleCNikt.js","./d-5IOmK-.js","./4ndDirPQ.js","./Bj7Ql7Qk.js","./CONOwAJH.js"])))=>i.map(i=>d[i]);
import{I as h,z as N,c as r,a as e,d as $,b as c,e as i,H as s,F as k,g as C,t as l,o as n,Q as f,k as E,_ as g}from"./DDT-0HTi.js";import{u as z,S as G,a as X}from"./eo2OyMsK.js";import{_ as J}from"./BUzXTnCp.js";import{_ as W}from"./BErXvs3o.js";import{a as Y}from"./Bz77BRzt.js";import{e as Z}from"./B4pxijLT.js";import"./DlAUqK2U.js";import"./D_ZLElLM.js";const ue={__name:"index",setup(ee){const P=f(()=>g(()=>import("./_wwmUaj8.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]),import.meta.url)),T=f(()=>g(()=>import("./d-5IOmK-.js"),__vite__mapDeps([13,1,2,3,4,5,6,7,8,9,10,11]),import.meta.url)),D=f(()=>g(()=>import("./4ndDirPQ.js"),__vite__mapDeps([14,3,4,15,16,11]),import.meta.url)),{items:w,loading:M,pagination:u,filters:L,fetchData:d,updateFilters:q,deleteItem:F}=z(Z.permissions.list,{defaultFilters:{search:"",status:"",sort_by:"created_at_desc"}}),{showSuccess:y,showError:I}=X(),o=h(null),p=h(!1),x=h(!1),m=h(!1);N(async()=>{await d()});function Q(a){q(a)}function S(){p.value=!0}function _(){p.value=!1}function V(a){o.value=a,x.value=!0}function v(){x.value=!1,o.value=null}function B(a){o.value=a,m.value=!0}function b(){m.value=!1,o.value=null}async function K(){await d(),_(),y("Quyền đã được tạo thành công")}async function O(){await d(),v(),y("Quyền đã được cập nhật thành công")}async function U(){try{await F(o.value.id),b(),y("Quyền đã được xóa thành công")}catch{I("Không thể xóa quyền")}}function j(a){if(!a)return;const t=new URL(a).searchParams.get("page");d({page:t})}function A(a){return Y("basic_status",a)||a||"Không xác định"}function H(a){return a==="active"?"bg-green-100 text-green-800":a==="inactive"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}return(a,R)=>(n(),r("div",{class:"container mx-auto p-4"},[e("div",{class:"flex justify-between items-center mb-6"},[e("h1",{class:"text-2xl font-bold"},"Quản lý quyền"),e("button",{onClick:S,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none"}," Thêm quyền mới ")]),$(s(D),{"initial-filters":s(L),"onUpdate:filters":Q},null,8,["initial-filters"]),e("div",{class:"bg-white shadow-md rounded-lg overflow-hidden"},[s(M)?(n(),c(G,{key:0,type:"table",rows:5,columns:7})):(n(),r("table",{key:1,class:"min-w-full divide-y divide-gray-200"},[e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"ID"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Tên quyền"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Tên hiển thị"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Guard"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Quyền cha"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Trạng thái"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Thao tác")])]),e("tbody",{class:"bg-white divide-y divide-gray-200"},[(n(!0),r(k,null,C(s(w),t=>(n(),r("tr",{key:t.id},[e("td",{class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},l(t.id),1),e("td",{class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},l(t.name),1),e("td",{class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},l(t.display_name),1),e("td",{class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},l(t.guard_name),1),e("td",{class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},l(t.parent_name||"-- Không có --"),1),e("td",{class:"px-6 py-4 whitespace-nowrap"},[e("span",{class:E(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",H(t.status)])},l(A(t.status)),3)]),e("td",{class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},[t.has_children?i("",!0):(n(),c(W,{key:0,item:t,onEdit:V,onDelete:B},null,8,["item"])),t.has_children?(n(),r("span",{key:1,class:"text-gray-500 text-sm"}," Không thể sửa/xóa (có "+l(t.children_count)+" quyền con) ",1)):i("",!0)])]))),128)),s(w).length===0?(n(),r("tr",{key:0},[e("td",{colspan:"7",class:"px-6 py-4 text-center text-gray-500"}," Không có dữ liệu ")])):i("",!0)])]))]),e("div",{class:"mt-4 flex justify-between items-center"},[e("div",{class:"text-sm text-gray-700"}," Hiển thị "+l(s(u).from)+" đến "+l(s(u).to)+" trên tổng số "+l(s(u).total)+" bản ghi ",1),e("div",{class:"flex space-x-1"},[(n(!0),r(k,null,C(s(u).links,t=>(n(),r("button",{key:t.label,onClick:te=>j(t.url),disabled:!t.url,class:E(["px-3 py-1 border rounded",t.active?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50",!t.url&&"opacity-50 cursor-not-allowed"]),innerHTML:t.label},null,10,["onClick","disabled","innerHTML"]))),128))])]),p.value?(n(),c(s(P),{key:0,show:p.value,"on-close":_,onCreated:K},null,8,["show"])):i("",!0),x.value?(n(),c(s(T),{key:1,show:x.value,permission:o.value,"on-close":v,onUpdated:O},null,8,["show","permission"])):i("",!0),m.value?(n(),c(J,{key:2,show:m.value,title:"Xác nhận xóa",message:"Bạn có chắc chắn muốn xóa quyền này không?",onConfirm:U,onCancel:b},null,8,["show"])):i("",!0)]))}};export{ue as default};
