const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CpEotgvy.js","./Dk-U_YkB.js","./DDT-0HTi.js","./entry.DXI-NETG.css","./Bz77BRzt.js","./D_ZLElLM.js","./DlAUqK2U.js","./Modal.BJ6M6RCs.css","./B4pxijLT.js","./DDaerjkw.js","./CDYOEhPQ.js","./Bj7Ql7Qk.js","./CONOwAJH.js"])))=>i.map(i=>d[i]);
import{I as x,z as X,c as l,a as e,d as k,e as i,b as h,H as n,F as C,g as D,t as r,o as s,Q as y,k as E,_ as w}from"./DDT-0HTi.js";import{u as q,S as G,a as J}from"./eo2OyMsK.js";import{_ as W}from"./BUzXTnCp.js";import{_ as Y}from"./BErXvs3o.js";import{e as Z}from"./B4pxijLT.js";import{f as O}from"./-we3hgSr.js";import{_ as ee}from"./DlAUqK2U.js";import"./D_ZLElLM.js";const te={__name:"index",setup(ae){const M=y(()=>w(()=>import("./CpEotgvy.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url)),T=y(()=>w(()=>import("./DDaerjkw.js"),__vite__mapDeps([9,1,2,3,4,5,6,7,8]),import.meta.url)),L=y(()=>w(()=>import("./CDYOEhPQ.js"),__vite__mapDeps([10,2,3,11,12]),import.meta.url)),{items:f,loading:N,pagination:c,filters:V,fetchData:u,updateFilters:I,deleteItem:F}=q(Z.orders.list,{defaultFilters:{search:"",status:"",sort_by:"created_at_desc"}}),{showSuccess:g,showError:P}=J(),o=x(null),d=x(!1),p=x(!1),m=x(!1);X(async()=>{await u()});function S(a){I(a)}function B(){d.value=!0}function _(){d.value=!1}function H(a){o.value=a,p.value=!0}function v(){p.value=!1,o.value=null}function j(a){o.value=a,m.value=!0}function b(){m.value=!1,o.value=null}async function A(){await u(),_(),g("Đơn hàng đã được tạo thành công")}async function R(){await u(),v(),g("Đơn hàng đã được cập nhật thành công")}async function U(){try{await F(o.value.id),b(),g("Đơn hàng đã được xóa thành công")}catch{P("Không thể xóa đơn hàng")}}function $(a){if(!a)return;const t=new URL(a).searchParams.get("page");u({page:t})}function K(a){return a?Number(a).toLocaleString("vi-VN",{style:"currency",currency:"VND"}):"0"}function z(a){return a==="completed"?"Hoàn thành":a==="pending"?"Chờ xử lý":a==="cancelled"?"Đã huỷ":a}return(a,Q)=>(s(),l("div",{class:"container mx-auto p-4"},[e("div",{class:"flex justify-between items-center mb-6"},[e("h1",{class:"text-2xl font-bold"},"Quản lý đơn hàng"),e("button",{onClick:B,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none"}," Thêm đơn hàng mới ")]),k(n(L),{"initial-filters":n(V),"onUpdate:filters":S},null,8,["initial-filters"]),e("div",{class:"bg-white shadow-md rounded-lg overflow-hidden"},[n(N)?(s(),h(G,{key:0,type:"table",rows:5,columns:7})):(s(),l("table",{key:1,class:"min-w-full divide-y divide-gray-200"},[e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"ID"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Khách hàng"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Tổng tiền"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Trạng thái"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Ngày đặt"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Ngày cập nhật"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Thao tác")])]),e("tbody",{class:"bg-white divide-y divide-gray-200"},[(s(!0),l(C,null,D(n(f),t=>(s(),l("tr",{key:t.id},[e("td",{class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},r(t.id),1),e("td",{class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},r(t.customer_name),1),e("td",{class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},r(K(t.total_amount)),1),e("td",{class:"px-6 py-4 whitespace-nowrap"},[e("span",{class:E(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",t.status==="completed"?"bg-green-100 text-green-800":t.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"])},r(z(t.status)),3)]),e("td",{class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},r(n(O)(t.created_at)),1),e("td",{class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},r(n(O)(t.updated_at)),1),e("td",{class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},[k(Y,{item:t,onEdit:H,onDelete:j},null,8,["item"])])]))),128)),n(f).length===0?(s(),l("tr",{key:0},[e("td",{colspan:"7",class:"px-6 py-4 text-center text-gray-500"}," Không có dữ liệu ")])):i("",!0)])]))]),n(f).length>0?(s(),l("div",{key:0,class:"mt-4 flex justify-between items-center"},[e("div",{class:"text-sm text-gray-700"}," Hiển thị "+r(n(c).from||0)+" đến "+r(n(c).to||0)+" trên tổng số "+r(n(c).total||0)+" bản ghi ",1),e("div",{class:"flex space-x-1"},[(s(!0),l(C,null,D(n(c).links,t=>(s(),l("button",{key:t.label,onClick:ne=>$(t.url),disabled:!t.url,class:E(["px-3 py-1 border rounded",t.active?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50",!t.url&&"opacity-50 cursor-not-allowed"]),innerHTML:t.label},null,10,["onClick","disabled","innerHTML"]))),128))])])):i("",!0),d.value?(s(),h(n(M),{key:1,show:d.value,"on-close":_,onCreated:A},null,8,["show"])):i("",!0),p.value?(s(),h(n(T),{key:2,show:p.value,order:o.value,"on-close":v,onUpdated:R},null,8,["show","order"])):i("",!0),m.value?(s(),h(W,{key:3,show:m.value,title:"Xác nhận xóa",message:`Bạn có chắc chắn muốn xóa đơn hàng #${o.value?.id||""}?`,"on-close":b,onConfirm:U},null,8,["show","message"])):i("",!0)]))}},pe=ee(te,[["__scopeId","data-v-4872f214"]]);export{pe as default};
