import{G as x,N as v,O as K,b as S,i as j,o,a as t,w as B,f as u,c as a,e as l,j as E,k as c,F as _,g as V,t as d,P as b,K as g}from"./CRPNSmKO.js";import{M as D}from"./D3qKhv56.js";import"./DlAUqK2U.js";const P={__name:"PricingRuleForm",props:{show:Boolean,pricingRule:Object,services:{type:Array,default:()=>[]},zones:{type:Array,default:()=>[]},apiErrors:{type:Object,default:()=>({})},mode:String},emits:["submit","cancel"],setup(i,{emit:z}){const f=i,y=z,k=x({get:()=>f.show,set:()=>w()}),T=x(()=>f.mode==="edit"?"Sửa quy tắc giá":"Thêm quy tắc giá mới"),e=v({service_id:"",zone_id:"",min_weight:"",max_weight:"",markup_percent:"",markup_fixed:"",min_fee:"",status:"active"}),s=v({});K(()=>f.pricingRule,m=>{m?(e.service_id=m.service_id||"",e.zone_id=m.zone_id||"",e.min_weight=m.min_weight||"",e.max_weight=m.max_weight||"",e.markup_percent=m.markup_percent||"",e.markup_fixed=m.markup_fixed||"",e.min_fee=m.min_fee||"",e.status=m.status||"active"):N()},{immediate:!0});function N(){e.service_id="",e.zone_id="",e.min_weight="",e.max_weight="",e.markup_percent="",e.markup_fixed="",e.min_fee="",e.status="active",h()}function h(){Object.keys(s).forEach(m=>delete s[m])}const U=x(()=>({service_id:[{required:"Dịch vụ là bắt buộc."}],zone_id:[{required:"Zone là bắt buộc."}],min_weight:[{number:"Khối lượng tối thiểu phải là số."}],max_weight:[{number:"Khối lượng tối đa phải là số."}],markup_percent:[{number:"Tăng giá % phải là số."}],markup_fixed:[{number:"Tăng giá cố định phải là số."}],min_fee:[{number:"Phí tối thiểu phải là số."}]}));function C(){h();let m=!0;const n=U.value;for(const r in n)for(const p of n[r]){if(p.required&&!e[r]){s[r]=p.required,m=!1;break}if(p.number&&e[r]&&isNaN(Number(e[r]))){s[r]=p.number,m=!1;break}}return m}function q(){C()&&y("submit",{...e})}function w(){y("cancel")}return(m,n)=>(o(),S(D,{modelValue:k.value,"onUpdate:modelValue":n[8]||(n[8]=r=>k.value=r),title:T.value},{default:j(()=>[t("form",{onSubmit:B(q,["prevent"]),class:"space-y-4"},[t("div",null,[t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[E("Dịch vụ "),t("span",{class:"text-red-500"},"*")]),u(t("select",{"onUpdate:modelValue":n[0]||(n[0]=r=>e.service_id=r),class:c(["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":s.service_id||i.apiErrors.service_id}])},[t("option",{value:""},"Chọn dịch vụ"),(o(!0),a(_,null,V(i.services,r=>(o(),a("option",{key:r.id,value:r.id},d(r.name),9,["value"]))),128))],2),[[b,e.service_id]]),s.service_id?(o(),a("p",{key:0,class:"mt-1 text-sm text-red-600"},d(s.service_id),1)):i.apiErrors.service_id?(o(),a("p",{key:1,class:"mt-1 text-sm text-red-600"},d(i.apiErrors.service_id),1)):l("",!0)]),t("div",null,[t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[E("Zone "),t("span",{class:"text-red-500"},"*")]),u(t("select",{"onUpdate:modelValue":n[1]||(n[1]=r=>e.zone_id=r),class:c(["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":s.zone_id||i.apiErrors.zone_id}])},[t("option",{value:""},"Chọn zone"),(o(!0),a(_,null,V(i.zones,r=>(o(),a("option",{key:r.id,value:r.id},d(r.name),9,["value"]))),128))],2),[[b,e.zone_id]]),s.zone_id?(o(),a("p",{key:0,class:"mt-1 text-sm text-red-600"},d(s.zone_id),1)):i.apiErrors.zone_id?(o(),a("p",{key:1,class:"mt-1 text-sm text-red-600"},d(i.apiErrors.zone_id),1)):l("",!0)]),t("div",null,[t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Khối lượng tối thiểu (kg)"),u(t("input",{"onUpdate:modelValue":n[2]||(n[2]=r=>e.min_weight=r),type:"number",class:c(["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":s.min_weight||i.apiErrors.min_weight}])},null,2),[[g,e.min_weight]]),s.min_weight?(o(),a("p",{key:0,class:"mt-1 text-sm text-red-600"},d(s.min_weight),1)):i.apiErrors.min_weight?(o(),a("p",{key:1,class:"mt-1 text-sm text-red-600"},d(i.apiErrors.min_weight),1)):l("",!0)]),t("div",null,[t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Khối lượng tối đa (kg)"),u(t("input",{"onUpdate:modelValue":n[3]||(n[3]=r=>e.max_weight=r),type:"number",class:c(["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":s.max_weight||i.apiErrors.max_weight}])},null,2),[[g,e.max_weight]]),s.max_weight?(o(),a("p",{key:0,class:"mt-1 text-sm text-red-600"},d(s.max_weight),1)):i.apiErrors.max_weight?(o(),a("p",{key:1,class:"mt-1 text-sm text-red-600"},d(i.apiErrors.max_weight),1)):l("",!0)]),t("div",null,[t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Tăng giá theo %"),u(t("input",{"onUpdate:modelValue":n[4]||(n[4]=r=>e.markup_percent=r),type:"number",class:c(["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":s.markup_percent||i.apiErrors.markup_percent}])},null,2),[[g,e.markup_percent]]),s.markup_percent?(o(),a("p",{key:0,class:"mt-1 text-sm text-red-600"},d(s.markup_percent),1)):i.apiErrors.markup_percent?(o(),a("p",{key:1,class:"mt-1 text-sm text-red-600"},d(i.apiErrors.markup_percent),1)):l("",!0)]),t("div",null,[t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Tăng giá cố định (VNĐ)"),u(t("input",{"onUpdate:modelValue":n[5]||(n[5]=r=>e.markup_fixed=r),type:"number",class:c(["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":s.markup_fixed||i.apiErrors.markup_fixed}])},null,2),[[g,e.markup_fixed]]),s.markup_fixed?(o(),a("p",{key:0,class:"mt-1 text-sm text-red-600"},d(s.markup_fixed),1)):i.apiErrors.markup_fixed?(o(),a("p",{key:1,class:"mt-1 text-sm text-red-600"},d(i.apiErrors.markup_fixed),1)):l("",!0)]),t("div",null,[t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Phí tối thiểu (VNĐ)"),u(t("input",{"onUpdate:modelValue":n[6]||(n[6]=r=>e.min_fee=r),type:"number",class:c(["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":s.min_fee||i.apiErrors.min_fee}])},null,2),[[g,e.min_fee]]),s.min_fee?(o(),a("p",{key:0,class:"mt-1 text-sm text-red-600"},d(s.min_fee),1)):i.apiErrors.min_fee?(o(),a("p",{key:1,class:"mt-1 text-sm text-red-600"},d(i.apiErrors.min_fee),1)):l("",!0)]),t("div",null,[t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Trạng thái"),u(t("select",{"onUpdate:modelValue":n[7]||(n[7]=r=>e.status=r),class:c(["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":s.status||i.apiErrors.status}])},[t("option",{value:"active"},"Hoạt động"),t("option",{value:"inactive"},"Không hoạt động")],2),[[b,e.status]]),s.status?(o(),a("p",{key:0,class:"mt-1 text-sm text-red-600"},d(s.status),1)):i.apiErrors.status?(o(),a("p",{key:1,class:"mt-1 text-sm text-red-600"},d(i.apiErrors.status),1)):l("",!0)]),t("div",{class:"flex justify-end space-x-3 pt-4"},[t("button",{type:"button",onClick:w,class:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none"},"Huỷ"),t("button",{type:"submit",class:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none"},d(i.mode==="edit"?"Cập nhật":"Thêm mới"),1)])],32)]),_:1},8,["modelValue","title"]))}};export{P as default};
