import{N as f,a8 as h}from"./DDT-0HTi.js";function p(r,t={}){const a=new FormData;t.method&&(t.method.toLowerCase()==="put"||t.method.toLowerCase()==="patch")&&a.append("_method",t.method.toUpperCase());for(const e in r)if(!(t.exclude&&t.exclude.includes(e))){if(e.startsWith("remove_")&&r[e]){a.append(e,1);continue}if(r[e]===null||r[e]===void 0){a.append(e,"");continue}r[e]===""&&t.skipEmpty||a.append(e,r[e])}return a}function y({endpoint:r,emit:t,onClose:a,eventName:e="created",method:i="post"}){const c=f({});async function d(u){try{Object.keys(c).forEach(o=>delete c[o]);const n=i==="put"||i==="patch"?p(u,{method:i}):p(u),s=await h.post(r,n);return t(e),a&&a(),s}catch(n){if(n.response?.status===422&&n.response?.data?.errors){const s=n.response.data.errors;for(const o in s)c[o]=Array.isArray(s[o])?s[o][0]:s[o]}throw n}}return{apiErrors:c,submit:d}}export{y as u};
