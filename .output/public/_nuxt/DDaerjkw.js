import C from"./Dk-U_YkB.js";import{e as _}from"./B4pxijLT.js";import{g as w}from"./Bz77BRzt.js";import{M as O,I as l,N as g,O as k,c as E,b as B,e as S,o as p}from"./DDT-0HTi.js";import"./D_ZLElLM.js";import"./DlAUqK2U.js";const $={__name:"edit",props:{show:Boolean,order:Object,onClose:Function},emits:["updated"],setup(c,{emit:f}){const d=O(),o=c,m=f,i=l(!1),r=g({}),u=l({}),n=l(!1);k(()=>o.show,t=>{i.value=t,t?(Object.keys(r).forEach(e=>delete r[e]),v(),o.order?.id&&h()):n.value=!1},{immediate:!0});async function h(){if(o.order?.id){n.value=!0;try{const t=await d.get(`/api/admin/orders/${o.order.id}`)}catch{}finally{n.value=!1}}}function v(){const t=w("order_status");u.value=t.map(e=>({value:e.value,label:e.label}))}async function y(t){try{if(!o.order)return;Object.keys(r).forEach(s=>delete r[s]);const e={...t,_method:"PUT"};await d.post(_.orders.update(o.order.id),e),m("updated"),o.onClose()}catch(e){if(e.response?.status===422&&e.response?.data?.errors){const s=e.response.data.errors;for(const a in s)Array.isArray(s[a])?r[a]=s[a][0]:r[a]=s[a]}}}function b(){o.onClose&&o.onClose()}return(t,e)=>(p(),E("div",null,[i.value?(p(),B(C,{key:0,show:i.value,order:c.order,"api-errors":r,"status-options":u.value,loading:n.value,onSubmit:y,onCancel:b},null,8,["show","order","api-errors","status-options","loading"])):S("",!0)]))}};export{$ as default};
