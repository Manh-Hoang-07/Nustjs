import y from"./CNwLqeg6.js";import{e as C}from"./B4pxijLT.js";import{M as _,I as u,N as b,O as k,c as g,b as B,e as E,o as d}from"./DDT-0HTi.js";import"./D_ZLElLM.js";import"./DlAUqK2U.js";import"./Bz77BRzt.js";const N={__name:"edit",props:{show:Boolean,warehouse:Object,onClose:Function},emits:["updated"],setup(p,{emit:f}){const c=_(),e=p,h=f,l=u(!1),t=u(null),n=u(!1),s=b({});k(()=>e.show,a=>{l.value=a,a?(Object.keys(s).forEach(o=>delete s[o]),e.warehouse?.id&&m()):(t.value=null,n.value=!1)},{immediate:!0});async function m(){if(e.warehouse?.id){n.value=!0;try{const a=await c.get(`/api/admin/warehouses/${e.warehouse.id}`);t.value=a.data.data||a.data}catch{t.value=e.warehouse}finally{n.value=!1}}}async function w(a){try{if(!e.warehouse)return;Object.keys(s).forEach(o=>delete s[o]),await c.put(C.warehouses.update(e.warehouse.id),a),h("updated"),e.onClose()}catch(o){if(o.response?.status===422&&o.response?.data?.errors){const i=o.response.data.errors;for(const r in i)Array.isArray(i[r])?s[r]=i[r][0]:s[r]=i[r]}}}function v(){e.onClose&&e.onClose()}return(a,o)=>(d(),g("div",null,[l.value?(d(),B(y,{key:0,show:l.value,warehouse:t.value,"api-errors":s,loading:n.value,onSubmit:w,onCancel:v},null,8,["show","warehouse","api-errors","loading"])):E("",!0)]))}};export{N as default};
