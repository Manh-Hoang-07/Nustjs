const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./D0TmfP4e.js","./DDT-0HTi.js","./entry.DXI-NETG.css","./Bj7Ql7Qk.js","./CONOwAJH.js","./B4pxijLT.js","./B7b_V52b.js","./DGzQxrC5.js","./Bz77BRzt.js","./D_ZLElLM.js","./DlAUqK2U.js","./Modal.BJ6M6RCs.css","./BOPsCARg.js","./yLpPWoGU.js","./Bj1hfyy3.js","./Bn5CcRjN.js","./form.CMCw0G9l.css","./Bp5bNCAK.js"])))=>i.map(i=>d[i]);
import{I as h,G as X,z as q,c as n,a as e,d as v,e as i,b as y,H as r,F as M,g as P,t as l,o as s,Q as w,k as E,_ as b}from"./DDT-0HTi.js";import{_ as J}from"./BUzXTnCp.js";import{_ as W}from"./BErXvs3o.js";import{u as Y,S as Z,a as ee}from"./eo2OyMsK.js";import{e as te}from"./B4pxijLT.js";import{f as L}from"./CNGtvvPC.js";import{_ as ae}from"./DlAUqK2U.js";import"./D_ZLElLM.js";const se={__name:"index",setup(ne){const $=w(()=>b(()=>import("./D0TmfP4e.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url)),T=w(()=>b(()=>import("./B7b_V52b.js"),__vite__mapDeps([6,7,1,2,8,9,10,11,12,13,4,5,14,15,16]),import.meta.url)),D=w(()=>b(()=>import("./Bp5bNCAK.js"),__vite__mapDeps([17,7,1,2,8,9,10,11,12,13,4,5,14,15,16]),import.meta.url)),{showSuccess:x,showError:V}=ee(),{items:f,loading:B,pagination:c,filters:H,fetchData:u,updateFilters:j,deleteItem:I}=Y(te.products.list,{defaultFilters:{search:"",status:"",sort_by:"created_at_desc"},cacheEnabled:!0,debounceTime:300}),o=h(null),d=h(!1),m=h(!1),p=h(!1),S=X(()=>f.value.map(t=>({...t,formattedPrice:L(t.price),formattedSalePrice:t.sale_price?L(t.sale_price):"-",statusLabel:G(t.status),statusClass:t.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800",brandName:t.brand?.name||"N/A"})));q(async()=>{await u()});function F(t){j(t)}function N(){d.value=!0}function k(){d.value=!1}function A(t){o.value=t,m.value=!0}function _(){m.value=!1,o.value=null}function O(t){o.value=t,p.value=!0}function C(){p.value=!1,o.value=null}async function z(){await u(),k(),x("Tạo sản phẩm thành công!")}async function Q(){await u(),_(),x("Cập nhật sản phẩm thành công!")}async function R(){try{await I(o.value.id),C(),x("Xóa sản phẩm thành công!")}catch{V("Có lỗi xảy ra khi xóa sản phẩm")}}function U(t){if(!t)return;const a=new URL(t).searchParams.get("page");u({page:a})}function G(t){return t==="active"?"Đang bán":t==="inactive"?"Ngừng bán":t==="draft"?"Bản nháp":t}return(t,K)=>(s(),n("div",{class:"container mx-auto p-4"},[e("div",{class:"flex justify-between items-center mb-6"},[e("h1",{class:"text-2xl font-bold"},"Quản lý sản phẩm"),e("button",{onClick:N,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none"}," Thêm sản phẩm mới ")]),v(r($),{"initial-filters":r(H),"onUpdate:filters":F},null,8,["initial-filters"]),r(B)?(s(),n("div",{key:0,class:"mb-6"},[v(Z,{type:"table",rows:5,columns:6})])):(s(),n("div",{key:1,class:"bg-white shadow-md rounded-lg overflow-hidden"},[e("table",{class:"min-w-full divide-y divide-gray-200"},[e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"ID"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Tên sản phẩm"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Giá gốc"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Giá KM"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Trạng thái"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Thao tác")])]),e("tbody",{class:"bg-white divide-y divide-gray-200"},[(s(!0),n(M,null,P(S.value,a=>(s(),n("tr",{key:`product-${a.id}`},[e("td",{class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},l(a.id),1),e("td",{class:"px-6 py-4 whitespace-nowrap"},[e("div",{class:"text-sm font-medium text-gray-900"},l(a.name),1)]),e("td",{class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},l(a.formattedPrice),1),e("td",{class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},[a.sale_price?(s(),n("span",{key:0,class:"text-red-600 font-medium"},l(a.formattedSalePrice),1)):(s(),n("span",{key:1,class:"text-gray-400"},"-"))]),e("td",{class:"px-6 py-4 whitespace-nowrap"},[e("span",{class:E(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",a.statusClass])},l(a.statusLabel),3)]),e("td",{class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},[e("div",{class:"flex space-x-2"},[e("button",{onClick:g=>t.$router.push(`/admin/products/${a.id}/edit-page`),class:"text-indigo-600 hover:text-indigo-900",title:"Chỉnh sửa chi tiết"},[(s(),n("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})]))],8,["onClick"]),e("button",{onClick:g=>t.$router.push(`/admin/products/${a.id}/variants`),class:"text-blue-600 hover:text-blue-900",title:"Quản lý biến thể"},[(s(),n("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})]))],8,["onClick"]),e("button",{onClick:g=>t.$router.push(`/admin/products/${a.id}/images`),class:"text-green-600 hover:text-green-900",title:"Quản lý ảnh"},[(s(),n("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 002 2z"})]))],8,["onClick"]),v(W,{item:a,onEdit:A,onDelete:O},null,8,["item"])])])]))),128)),r(f).length===0?(s(),n("tr",{key:0},[e("td",{colspan:"6",class:"px-6 py-4 text-center text-gray-500"}," Không có dữ liệu ")])):i("",!0)])])])),r(f).length>0?(s(),n("div",{key:2,class:"mt-4 flex justify-between items-center"},[e("div",{class:"text-sm text-gray-700"}," Hiển thị "+l(r(c).from||0)+" đến "+l(r(c).to||0)+" trên tổng số "+l(r(c).total||0)+" bản ghi ",1),e("div",{class:"flex space-x-1"},[(s(!0),n(M,null,P(r(c).links,a=>(s(),n("button",{key:a.label,onClick:g=>U(a.url),disabled:!a.url,class:E(["px-3 py-1 border rounded",a.active?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50",!a.url&&"opacity-50 cursor-not-allowed"]),innerHTML:a.label},null,10,["onClick","disabled","innerHTML"]))),128))])])):i("",!0),d.value?(s(),y(r(T),{key:3,show:d.value,"on-close":k,onCreated:z},null,8,["show"])):i("",!0),m.value?(s(),y(r(D),{key:4,show:m.value,product:o.value,"on-close":_,onUpdated:Q},null,8,["show","product"])):i("",!0),p.value?(s(),y(J,{key:5,show:p.value,title:"Xác nhận xóa",message:`Bạn có chắc chắn muốn xóa sản phẩm ${o.value?.name||""}?`,"on-close":C,onConfirm:R},null,8,["show","message"])):i("",!0)]))}},pe=ae(se,[["__scopeId","data-v-121c774b"]]);export{pe as default};
