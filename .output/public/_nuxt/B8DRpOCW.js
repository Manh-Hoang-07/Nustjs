import{G as m,N as w,O as B,b as D,i as N,o as a,a as e,w as S,f as c,c as l,e as b,j as f,k as p,K as x,t as d}from"./DDT-0HTi.js";import{M as U}from"./D_ZLElLM.js";import"./DlAUqK2U.js";const z={__name:"PromotionForm",props:{show:Boolean,promotion:Object,apiErrors:{type:Object,default:()=>({})},mode:String},emits:["submit","cancel"],setup(i,{emit:E}){const u=i,y=E,v=m({get:()=>u.show,set:()=>h()}),V=m(()=>u.mode==="edit"?"Sửa khuyến mãi":"Thêm khuyến mãi mới"),t=w({name:"",discount:"",valid_until:"",status:"active"}),o=w({});B(()=>u.promotion,n=>{n?(t.name=n.name||"",t.discount=n.discount||"",t.valid_until=n.valid_until||"",t.status=n.status||"active"):T()},{immediate:!0});function T(){t.name="",t.discount="",t.valid_until="",t.status="active",g()}function g(){Object.keys(o).forEach(n=>delete o[n])}const C=m(()=>({name:[{required:"Tên khuyến mãi là bắt buộc."}],discount:[{required:"Discount là bắt buộc."}],valid_until:[{required:"Ngày hết hạn là bắt buộc."}]}));function j(){g();let n=!0;const s=C.value;for(const r in s)for(const k of s[r])if(k.required&&!t[r]){o[r]=k.required,n=!1;break}return n}function q(){j()&&y("submit",{...t})}function h(){y("cancel")}return(n,s)=>(a(),D(U,{modelValue:v.value,"onUpdate:modelValue":s[3]||(s[3]=r=>v.value=r),title:V.value},{default:N(()=>[e("form",{onSubmit:S(q,["prevent"]),class:"space-y-4"},[e("div",null,[e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[f("Tên khuyến mãi "),e("span",{class:"text-red-500"},"*")]),c(e("input",{"onUpdate:modelValue":s[0]||(s[0]=r=>t.name=r),type:"text",class:p(["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":o.name||i.apiErrors.name}]),maxlength:"100"},null,2),[[x,t.name]]),o.name?(a(),l("p",{key:0,class:"mt-1 text-sm text-red-600"},d(o.name),1)):i.apiErrors.name?(a(),l("p",{key:1,class:"mt-1 text-sm text-red-600"},d(i.apiErrors.name),1)):b("",!0)]),e("div",null,[e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[f("Discount "),e("span",{class:"text-red-500"},"*")]),c(e("input",{"onUpdate:modelValue":s[1]||(s[1]=r=>t.discount=r),type:"text",class:p(["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":o.discount||i.apiErrors.discount}])},null,2),[[x,t.discount]]),o.discount?(a(),l("p",{key:0,class:"mt-1 text-sm text-red-600"},d(o.discount),1)):i.apiErrors.discount?(a(),l("p",{key:1,class:"mt-1 text-sm text-red-600"},d(i.apiErrors.discount),1)):b("",!0)]),e("div",null,[e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[f("Valid Until "),e("span",{class:"text-red-500"},"*")]),c(e("input",{"onUpdate:modelValue":s[2]||(s[2]=r=>t.valid_until=r),type:"date",class:p(["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":o.valid_until||i.apiErrors.valid_until}])},null,2),[[x,t.valid_until]]),o.valid_until?(a(),l("p",{key:0,class:"mt-1 text-sm text-red-600"},d(o.valid_until),1)):i.apiErrors.valid_until?(a(),l("p",{key:1,class:"mt-1 text-sm text-red-600"},d(i.apiErrors.valid_until),1)):b("",!0)]),e("div",{class:"flex justify-end space-x-3 pt-4"},[e("button",{type:"button",onClick:h,class:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none"},"Huỷ"),e("button",{type:"submit",class:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none"},d(i.mode==="edit"?"Cập nhật":"Thêm mới"),1)])],32)]),_:1},8,["modelValue","title"]))}};export{z as default};
