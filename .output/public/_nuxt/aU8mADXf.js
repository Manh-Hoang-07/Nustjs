import{a as m}from"./Bj1hfyy3.js";import{e as x}from"./B4pxijLT.js";import S from"./B8DRpOCW.js";import{I as t,z as _,c as d,a as e,b as B,e as v,F as N,g as $,o as u,t as i,k as j}from"./DDT-0HTi.js";import"./D_ZLElLM.js";import"./DlAUqK2U.js";const V={__name:"index",setup(I){const r=t(!1),w=t(!1);t(""),t(""),t(""),t("");const b=t(!1),k=t(""),P=t(!1),p=t([]),g=t(!1),f=t(""),o=t(null),l=t({});async function h(){g.value=!0,f.value="";try{const a=await m.get(x.shippingPromotions.list);p.value=a.data.data}catch{f.value="Không lấy được danh sách khuyến mãi!"}finally{g.value=!1}}_(h);function C(a){o.value={...a},r.value=!0,Object.keys(l.value).forEach(n=>delete l.value[n])}function E(a,n){k.value=a,P.value=!0,b.value=!0}function y(){r.value=!1,o.value=null,Object.keys(l.value).forEach(a=>delete l.value[a])}async function T(a){try{o.value&&o.value.id?await m.put(x.shippingPromotions.update(o.value.id),a):await m.post(x.shippingPromotions.create,a),await h(),y()}catch(n){if(n.response?.status===422&&n.response?.data?.errors){const s=n.response.data.errors;for(const c in s)l.value[c]=s[c][0]}}}return t(!1),t(!1),(a,n)=>(u(),d("div",{class:"container mx-auto p-4"},[e("div",{class:"flex justify-between items-center mb-6"},[e("h1",{class:"text-2xl font-bold"},"Quản lý khuyến mãi vận chuyển"),e("button",{onClick:n[0]||(n[0]=s=>r.value=!0),class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none"}," Thêm khuyến mãi mới ")]),e("div",{class:"bg-white shadow-md rounded-lg overflow-hidden"},[e("table",{class:"min-w-full divide-y divide-gray-200"},[e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"ID"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Tên khuyến mãi"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Discount"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Ngày hết hạn"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Trạng thái"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Thao tác")])]),e("tbody",{class:"bg-white divide-y divide-gray-200"},[(u(!0),d(N,null,$(p.value,s=>(u(),d("tr",{key:s.id},[e("td",{class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},i(s.id),1),e("td",{class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},i(s.name),1),e("td",{class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},i(s.discount),1),e("td",{class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},i(s.valid_until),1),e("td",{class:"px-6 py-4 whitespace-nowrap"},[e("span",{class:j(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",a.getStatusClass(s.status)])},i(a.getStatusName(s.status)),3)]),e("td",{class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},[e("button",{onClick:c=>C(s),class:"text-indigo-600 hover:text-indigo-900 mr-3"}," Sửa ",8,["onClick"]),e("button",{onClick:c=>E(s),class:"text-blue-600 hover:text-blue-900"},i(s.status==="active"?"Tắt":"Bật"),9,["onClick"])])]))),128)),p.value.length===0?(u(),d("tr",{key:0},[e("td",{colspan:"6",class:"px-6 py-4 text-center text-gray-500"}," Không có dữ liệu ")])):v("",!0)])])]),r.value||w.value?(u(),B(S,{key:0,show:r.value,promotion:o.value,"api-errors":l.value,mode:a.editPromotionId?"edit":"create",onSubmit:T,onCancel:y},null,8,["show","promotion","api-errors","mode"])):v("",!0)]))}};export{V as default};
