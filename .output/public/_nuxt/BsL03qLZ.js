import{a as B}from"./Bj1hfyy3.js";import{e as D}from"./B4pxijLT.js";import h from"./Cx7AZIrb.js";import{I as r,N as g,z as E,c as l,a as t,b as w,e as x,F as b,g as k,t as i,o,k as _}from"./DDT-0HTi.js";import"./D_ZLElLM.js";import"./DlAUqK2U.js";const z={__name:"index",setup(I){const c=r(!1),d=r(!1);r(!1),r(""),r(""),r(""),r("production"),r(""),r(""),r(""),r("production"),r("active"),r(""),r("active");const u=r([]),m=r(!1),f=r("");g({});const p=g({}),y=r(null),n=g({current_page:1,from:0,to:0,total:0,per_page:10,links:[]});function C(a){return a==="active"||a===1?"Đang hoạt động":a==="inactive"||a===0?"Không hoạt động":a}function P(a){return a==="active"||a===1?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}async function v(a=1){m.value=!0,f.value="";try{const s=await B.get(D.shippingApi.list,{params:{page:a}});u.value=s.data.data;const e=s.data.meta;e?(n.current_page=e.current_page,n.from=e.from,n.to=e.to,n.total=e.total,n.per_page=e.per_page,n.links=e.links):(n.current_page=1,n.from=0,n.to=0,n.total=0,n.per_page=10,n.links=[])}catch{f.value="Không lấy được danh sách provider!"}finally{m.value=!1}}E(v);function S(a){if(!a)return;const e=new URL(a,window.location.origin).searchParams.get("page");v(e)}function T(a){const s=u.value.find(e=>e.name===a);y.value=s?{...s}:null,c.value=!0,Object.keys(p).forEach(e=>delete p[e])}function j(a){}function A(a){}return(a,s)=>(o(),l("div",{class:"container mx-auto p-4"},[t("div",{class:"flex justify-between items-center mb-6"},[t("h1",{class:"text-2xl font-bold"},"Quản lý API Provider"),t("button",{onClick:s[0]||(s[0]=e=>d.value=!0),class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none"}," Thêm Provider mới ")]),t("div",{class:"bg-white shadow-md rounded-lg overflow-hidden"},[t("table",{class:"min-w-full divide-y divide-gray-200"},[t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"ID"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Tên Provider"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"API Key"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Môi trường"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Trạng thái"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Thao tác")])]),t("tbody",{class:"bg-white divide-y divide-gray-200"},[(o(!0),l(b,null,k(u.value,e=>(o(),l("tr",{key:e.id},[t("td",{class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},i(e.id),1),t("td",{class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},i(e.name),1),t("td",{class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},i(e.api_key),1),t("td",{class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},i(e.env),1),t("td",{class:"px-6 py-4 whitespace-nowrap"},[t("span",{class:_(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",P(e.status)])},i(C(e.status)),3)]),t("td",{class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},[t("button",{onClick:M=>T(e.name),class:"text-indigo-600 hover:text-indigo-900 mr-3"}," Sửa ",8,["onClick"])])]))),128)),u.value.length===0?(o(),l("tr",{key:0},[t("td",{colspan:"6",class:"px-6 py-4 text-center text-gray-500"}," Không có dữ liệu ")])):x("",!0)])])]),t("div",{class:"mt-4 flex justify-between items-center"},[t("div",{class:"text-sm text-gray-700"}," Hiển thị "+i(n.from)+" đến "+i(n.to)+" trên tổng số "+i(n.total)+" bản ghi ",1),t("div",{class:"flex space-x-1"},[(o(!0),l(b,null,k(n.links,e=>(o(),l("button",{key:e.label,onClick:M=>S(e.url),disabled:!e.url,class:_(["px-3 py-1 border rounded",e.active?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50",!e.url&&"opacity-50 cursor-not-allowed"]),innerHTML:e.label},null,10,["onClick","disabled","innerHTML"]))),128))])]),d.value?(o(),w(h,{key:0,show:d.value,"api-errors":p,mode:"create",onSubmit:A,onCancel:s[1]||(s[1]=()=>d.value=!1)},null,8,["show","api-errors"])):x("",!0),c.value?(o(),w(h,{key:1,show:c.value,provider:y.value,"api-errors":p,mode:"edit",onSubmit:j,onCancel:s[2]||(s[2]=()=>c.value=!1)},null,8,["show","provider","api-errors"])):x("",!0)]))}};export{z as default};
