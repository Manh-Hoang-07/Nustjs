import{ssrRenderAttrs as e,ssrRenderComponent as r}from"vue/server-renderer";import o from"./form-dZmkuD3e.mjs";import{p as t}from"./endpoints-B4pxijLT.mjs";import{ref as s,reactive as i,watch as n,useSSRContext as d}from"vue";import{o as m}from"./enums-Bz77BRzt.mjs";import{E as a}from"./useApiClient-LtAAs9ek.mjs";import"./Modal-CcMmmM3q.mjs";import"./_plugin-vue_export-helper-DlAUqK2U.mjs";import"axios";import"./server.mjs";import"../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";import"node:url";import"../routes/renderer.mjs";import"vue-bundle-renderer/runtime";import"unhead/server";import"devalue";import"unhead/utils";import"vue-router";const p={__name:"edit",__ssrInlineRender:!0,props:{show:Boolean,order:Object,onClose:Function},emits:["updated"],setup(d,{emit:p}){const u=a(),l=d,c=p,v=s(!1),f=i({}),h=s({}),j=s(!1);async function C(e){try{if(!l.order)return;Object.keys(f).forEach(e=>delete f[e]);const r={...e,_method:"PUT"};await u.post(t.orders.update(l.order.id),r),c("updated"),l.onClose()}catch(e){if(422===e.response?.status&&e.response?.data?.errors){const r=e.response.data.errors;for(const e in r)Array.isArray(r[e])?f[e]=r[e][0]:f[e]=r[e]}}}function _(){l.onClose&&l.onClose()}return n(()=>l.show,e=>{v.value=e,e?(Object.keys(f).forEach(e=>delete f[e]),function(){const e=m("order_status");h.value=e.map(e=>({value:e.value,label:e.label}))}(),l.order?.id&&async function(){if(l.order?.id){j.value=!0;try{await u.get(`/api/admin/orders/${l.order.id}`)}catch{}finally{j.value=!1}}}()):j.value=!1},{immediate:!0}),(t,s,i,n)=>{s(`<div${e(n)}>`),v.value?s(r(o,{show:v.value,order:d.order,"api-errors":f,"status-options":h.value,loading:j.value,onSubmit:C,onCancel:_},null,i)):s("\x3c!----\x3e"),s("</div>")}}},u=p.setup;p.setup=(e,r)=>{const o=d();return(o.modules||(o.modules=new Set)).add("pages/admin/Orders/edit.vue"),u?u(e,r):void 0};export{p as default};
