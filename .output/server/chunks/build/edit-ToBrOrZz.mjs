import{ssrRenderAttrs as e,ssrRenderComponent as r}from"vue/server-renderer";import t from"./form-DOfzDJVC.mjs";import{p as o}from"./endpoints-B4pxijLT.mjs";import{ref as s,reactive as n,watch as a,useSSRContext as i}from"vue";import{o as m}from"./enums-Bz77BRzt.mjs";import{E as d}from"./useApiClient-LtAAs9ek.mjs";import"./Modal-CcMmmM3q.mjs";import"./_plugin-vue_export-helper-DlAUqK2U.mjs";import"./FormWrapper-BkWXOK5b.mjs";import"./FormField-C25kxm9c.mjs";import"./useFormDefaults-CTfnk28m.mjs";import"./useUrl-CNWGMiP9.mjs";import"./ImageUploader-CkuS8dvw.mjs";import"axios";import"./server.mjs";import"../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";import"node:url";import"../routes/renderer.mjs";import"vue-bundle-renderer/runtime";import"unhead/server";import"devalue";import"unhead/utils";import"vue-router";const u={__name:"edit",__ssrInlineRender:!0,props:{show:Boolean,brand:Object,onClose:Function},emits:["updated"],setup(i,{emit:u}){const p=d(),l=i,c=u,v=s(!1),f=s([]),b=s(null),j=s(!1),h=n({});async function C(e){try{if(!l.brand)return;Object.keys(h).forEach(e=>delete h[e]);const r={...e,_method:"PUT"};await p.post(o.brands.update(l.brand.id),r),c("updated"),l.onClose()}catch(e){if(422===e.response?.status&&e.response?.data?.errors){const r=e.response.data.errors;for(const e in r)Array.isArray(r[e])?h[e]=r[e][0]:h[e]=r[e]}}}function _(){l.onClose&&l.onClose()}return a(()=>l.show,e=>{v.value=e,e?(Object.keys(h).forEach(e=>delete h[e]),async function(){try{const e=m("basic_status");f.value=Array.isArray(e)?e:[]}catch{f.value=[]}}(),l.brand?.id&&async function(){if(l.brand?.id){j.value=!0;try{const e=await p.get(`/api/admin/brands/${l.brand.id}`);b.value=e.data.data||e.data}catch{b.value=l.brand}finally{j.value=!1}}}()):(b.value=null,j.value=!1)},{immediate:!0}),(o,s,n,a)=>{s(`<div${e(a)}>`),v.value?s(r(t,{show:v.value,brand:b.value,"status-enums":f.value,"api-errors":h,loading:j.value,onSubmit:C,onCancel:_},null,n)):s("\x3c!----\x3e"),s("</div>")}}},p=u.setup;u.setup=(e,r)=>{const t=i();return(t.modules||(t.modules=new Set)).add("pages/admin/brands/edit.vue"),p?p(e,r):void 0};export{u as default};
