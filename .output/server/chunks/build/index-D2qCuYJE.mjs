import{defineAsyncComponent as t,ref as e,mergeProps as a,unref as n,useSSRContext as r}from"vue";import{ssrRenderAttrs as s,ssrRenderComponent as d,ssrRenderList as o,ssrInterpolate as i,ssrRenderClass as c,ssrIncludeBooleanAttr as l}from"vue/server-renderer";import{s as p,r as u,d as m}from"./SkeletonLoader-CWl9hP-i.mjs";import{m as x}from"./ConfirmModal-CltOniOu.mjs";import{i as f}from"./Actions-B-4SIiXX.mjs";import{p as h}from"./endpoints-B4pxijLT.mjs";import{n as v}from"./formatDate--we3hgSr.mjs";import{s as g}from"./_plugin-vue_export-helper-DlAUqK2U.mjs";import"./useApiClient-LtAAs9ek.mjs";import"axios";import"./server.mjs";import"../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";import"node:url";import"../routes/renderer.mjs";import"vue-bundle-renderer/runtime";import"unhead/server";import"devalue";import"unhead/utils";import"vue-router";import"./Modal-CcMmmM3q.mjs";const y={__name:"index",__ssrInlineRender:!0,setup(r){const g=t(()=>import("./create-Cmrm2MQn.mjs")),y=t(()=>import("./edit-fO-cVpvw.mjs")),w=t(()=>import("./filter-CY-D9FuD.mjs")),{items:_,loading:k,pagination:D,filters:S,fetchData:I,updateFilters:M,deleteItem:N}=p(h.orders.list,{defaultFilters:{search:"",status:"",sort_by:"created_at_desc"}}),{showSuccess:T,showError:B}=m(),O=e(null),V=e(!1),X=e(!1),q=e(!1);function F(t){M(t)}function b(){V.value=!1}function L(t){O.value=t,X.value=!0}function $(){X.value=!1,O.value=null}function A(t){O.value=t,q.value=!0}function C(){q.value=!1,O.value=null}async function K(){await I(),b(),T("Đơn hàng đã được tạo thành công")}async function U(){await I(),$(),T("Đơn hàng đã được cập nhật thành công")}async function j(){try{await N(O.value.id),C(),T("Đơn hàng đã được xóa thành công")}catch{B("Không thể xóa đơn hàng")}}return(t,e,r,p)=>{e(`<div${s(a({class:"container mx-auto p-4"},p))} data-v-2c1194fe><div class="flex justify-between items-center mb-6" data-v-2c1194fe><h1 class="text-2xl font-bold" data-v-2c1194fe>Quản lý đơn hàng</h1><button class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none" data-v-2c1194fe> Thêm đơn hàng mới </button></div>`),e(d(n(w),{"initial-filters":n(S),"onUpdate:filters":F},null,r)),e('<div class="bg-white shadow-md rounded-lg overflow-hidden" data-v-2c1194fe>'),n(k)?e(d(u,{type:"table",rows:5,columns:7},null,r)):(e('<table class="min-w-full divide-y divide-gray-200" data-v-2c1194fe><thead class="bg-gray-50" data-v-2c1194fe><tr data-v-2c1194fe><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" data-v-2c1194fe>ID</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" data-v-2c1194fe>Khách hàng</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" data-v-2c1194fe>Tổng tiền</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" data-v-2c1194fe>Trạng thái</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" data-v-2c1194fe>Ngày đặt</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" data-v-2c1194fe>Ngày cập nhật</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" data-v-2c1194fe>Thao tác</th></tr></thead><tbody class="bg-white divide-y divide-gray-200" data-v-2c1194fe>\x3c!--[--\x3e'),o(n(_),t=>{e(`<tr data-v-2c1194fe><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500" data-v-2c1194fe>${i(t.id)}</td><td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900" data-v-2c1194fe>${i(t.customer_name)}</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500" data-v-2c1194fe>${i(function(t){return t?Number(t).toLocaleString("vi-VN",{style:"currency",currency:"VND"}):"0"}(t.total_amount))}</td><td class="px-6 py-4 whitespace-nowrap" data-v-2c1194fe><span class="${c(["completed"===t.status?"bg-green-100 text-green-800":"pending"===t.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800","px-2 inline-flex text-xs leading-5 font-semibold rounded-full"])}" data-v-2c1194fe>${i(function(t){return"completed"===t?"Hoàn thành":"pending"===t?"Chờ xử lý":"cancelled"===t?"Đã huỷ":t}(t.status))}</span></td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500" data-v-2c1194fe>${i(n(v)(t.created_at))}</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500" data-v-2c1194fe>${i(n(v)(t.updated_at))}</td><td class="px-6 py-4 whitespace-nowrap text-sm font-medium" data-v-2c1194fe>`),e(d(f,{item:t,onEdit:L,onDelete:A},null,r)),e("</td></tr>")}),e("\x3c!--]--\x3e"),0===n(_).length?e('<tr data-v-2c1194fe><td colspan="7" class="px-6 py-4 text-center text-gray-500" data-v-2c1194fe> Không có dữ liệu </td></tr>'):e("\x3c!----\x3e"),e("</tbody></table>")),e("</div>"),n(_).length>0?(e(`<div class="mt-4 flex justify-between items-center" data-v-2c1194fe><div class="text-sm text-gray-700" data-v-2c1194fe> Hiển thị ${i(n(D).from||0)} đến ${i(n(D).to||0)} trên tổng số ${i(n(D).total||0)} bản ghi </div><div class="flex space-x-1" data-v-2c1194fe>\x3c!--[--\x3e`),o(n(D).links,t=>{e(`<button${l(!t.url)?" disabled":""} class="${c(["px-3 py-1 border rounded",t.active?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50",!t.url&&"opacity-50 cursor-not-allowed"])}" data-v-2c1194fe>${t.label??""}</button>`)}),e("\x3c!--]--\x3e</div></div>")):e("\x3c!----\x3e"),V.value?e(d(n(g),{show:V.value,"on-close":b,onCreated:K},null,r)):e("\x3c!----\x3e"),X.value?e(d(n(y),{show:X.value,order:O.value,"on-close":$,onUpdated:U},null,r)):e("\x3c!----\x3e"),q.value?e(d(x,{show:q.value,title:"Xác nhận xóa",message:`Bạn có chắc chắn muốn xóa đơn hàng #${O.value?.id||""}?`,"on-close":C,onConfirm:j},null,r)):e("\x3c!----\x3e"),e("</div>")}}},w=y.setup;y.setup=(t,e)=>{const a=r();return(a.modules||(a.modules=new Set)).add("pages/admin/orders/index.vue"),w?w(t,e):void 0};const _=g(y,[["__scopeId","data-v-2c1194fe"]]);export{_ as default};
