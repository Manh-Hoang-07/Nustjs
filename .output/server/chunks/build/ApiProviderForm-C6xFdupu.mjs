import{computed as e,reactive as t,ref as r,watch as a,mergeProps as s,withCtx as o,createVNode as n,withModifiers as d,withDirectives as l,createBlock as i,createCommentVNode as u,createTextVNode as m,vModelText as c,openBlock as p,toDisplayString as y,Fragment as b,renderList as x,vModelSelect as v,useSSRContext as g}from"vue";import{ssrRenderComponent as f,ssrRenderAttr as k,ssrRenderClass as _,ssrInterpolate as $,ssrRenderList as h,ssrIncludeBooleanAttr as E,ssrLooseContain as w,ssrLooseEqual as A}from"vue/server-renderer";import{R as P}from"./Modal-CcMmmM3q.mjs";import"./_plugin-vue_export-helper-DlAUqK2U.mjs";const U={__name:"ApiProviderForm",__ssrInlineRender:!0,props:{show:Boolean,provider:Object,apiErrors:{type:Object,default:()=>({})},mode:String,statusEnums:{type:Array,default:()=>[{value:"active",name:"Hoạt động"},{value:"inactive",name:"Không hoạt động"}]},envEnums:{type:Array,default:()=>[{value:"production",name:"Production"},{value:"test",name:"Test"}]}},emits:["submit","cancel"],setup(g,{emit:U}){const V=g,q=U,K=e(()=>"edit"===V.mode?"Chỉnh sửa Provider":"Thêm Provider mới"),j=e({get:()=>V.show,set:()=>T()}),I=t({name:"",api_key:"",secret_key:"",env:"production",status:"active"}),M=t({}),O=r(!1);function S(){Object.keys(M).forEach(e=>delete M[e])}a(()=>V.provider,e=>{e?(I.name=e.name||"",I.api_key=e.api_key||"",I.secret_key=e.secret_key||"",I.env=e.env||"production",I.status=e.status||"active"):(I.name="",I.api_key="",I.secret_key="",I.env="production",I.status="active",S())},{immediate:!0});const C=e(()=>({name:[{required:"Tên Provider là bắt buộc"},{max:[100,"Tên Provider không được vượt quá 100 ký tự"]}],api_key:[{required:"API Key là bắt buộc"},{max:[100,"API Key không được vượt quá 100 ký tự"]}],secret_key:[{required:"Secret Key là bắt buộc"},{max:[100,"Secret Key không được vượt quá 100 ký tự"]}]}));function z(){if(function(){S();let e=!0;const t=C.value;for(const r in t)for(const a of t[r]){if(a.required&&!I[r]){M[r]=a.required,e=!1;break}if(a.max&&I[r]&&I[r].length>a.max[0]){M[r]=a.max[1],e=!1;break}}return e}()){O.value=!0;try{const e=new FormData;Object.entries(I).forEach(([t,r])=>{null!=r&&""!==r&&e.append(t,r)}),q("submit",e)}finally{O.value=!1}}}function T(){q("cancel")}return(e,t,r,a)=>{t(f(P,s({modelValue:j.value,"onUpdate:modelValue":e=>j.value=e,title:K.value},a),{default:o((e,t,r,a)=>{if(!t)return[n("form",{onSubmit:d(z,["prevent"]),class:"space-y-4"},[n("div",{class:"space-y-4"},[n("div",null,[n("label",{for:"name",class:"block text-sm font-medium text-gray-700 mb-1"},[m("Tên Provider "),n("span",{class:"text-red-500"},"*")]),l(n("input",{id:"name","onUpdate:modelValue":e=>I.name=e,type:"text",class:["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":M.name||g.apiErrors.name}],maxlength:"100"},null,10,["onUpdate:modelValue"]),[[c,I.name]]),M.name?(p(),i("p",{key:0,class:"mt-1 text-sm text-red-600"},y(M.name),1)):g.apiErrors.name?(p(),i("p",{key:1,class:"mt-1 text-sm text-red-600"},y(g.apiErrors.name),1)):u("",!0)]),n("div",null,[n("label",{for:"api_key",class:"block text-sm font-medium text-gray-700 mb-1"},[m("API Key "),n("span",{class:"text-red-500"},"*")]),l(n("input",{id:"api_key","onUpdate:modelValue":e=>I.api_key=e,type:"text",class:["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":M.api_key||g.apiErrors.api_key}],maxlength:"100"},null,10,["onUpdate:modelValue"]),[[c,I.api_key]]),M.api_key?(p(),i("p",{key:0,class:"mt-1 text-sm text-red-600"},y(M.api_key),1)):g.apiErrors.api_key?(p(),i("p",{key:1,class:"mt-1 text-sm text-red-600"},y(g.apiErrors.api_key),1)):u("",!0)]),n("div",null,[n("label",{for:"secret_key",class:"block text-sm font-medium text-gray-700 mb-1"},[m("Secret Key "),n("span",{class:"text-red-500"},"*")]),l(n("input",{id:"secret_key","onUpdate:modelValue":e=>I.secret_key=e,type:"text",class:["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":M.secret_key||g.apiErrors.secret_key}],maxlength:"100"},null,10,["onUpdate:modelValue"]),[[c,I.secret_key]]),M.secret_key?(p(),i("p",{key:0,class:"mt-1 text-sm text-red-600"},y(M.secret_key),1)):g.apiErrors.secret_key?(p(),i("p",{key:1,class:"mt-1 text-sm text-red-600"},y(g.apiErrors.secret_key),1)):u("",!0)]),n("div",null,[n("label",{for:"env",class:"block text-sm font-medium text-gray-700 mb-1"},"Môi trường"),l(n("select",{id:"env","onUpdate:modelValue":e=>I.env=e,class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"},[(p(!0),i(b,null,x(g.envEnums,e=>(p(),i("option",{key:e.value,value:e.value},y(e.name),9,["value"]))),128))],8,["onUpdate:modelValue"]),[[v,I.env]])]),n("div",null,[n("label",{for:"status",class:"block text-sm font-medium text-gray-700 mb-1"},"Trạng thái"),l(n("select",{id:"status","onUpdate:modelValue":e=>I.status=e,class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"},[(p(!0),i(b,null,x(g.statusEnums,e=>(p(),i("option",{key:e.value,value:e.value},y(e.name),9,["value"]))),128))],8,["onUpdate:modelValue"]),[[v,I.status]])])]),n("div",{class:"flex justify-end gap-2 pt-4"},[n("button",{type:"button",onClick:T,class:"px-4 py-2 bg-gray-100 rounded-xl hover:bg-gray-200"}," Hủy "),n("button",{type:"submit",disabled:O.value,class:"px-4 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 disabled:opacity-50"},y(O.value?"Đang lưu...":"Lưu"),9,["disabled"])])],32)];t(`<form class="space-y-4"${a}><div class="space-y-4"${a}><div${a}><label for="name" class="block text-sm font-medium text-gray-700 mb-1"${a}>Tên Provider <span class="text-red-500"${a}>*</span></label><input id="name"${k("value",I.name)} type="text" class="${_([{"border-red-500":M.name||g.apiErrors.name},"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"])}" maxlength="100"${a}>`),M.name?t(`<p class="mt-1 text-sm text-red-600"${a}>${$(M.name)}</p>`):g.apiErrors.name?t(`<p class="mt-1 text-sm text-red-600"${a}>${$(g.apiErrors.name)}</p>`):t("\x3c!----\x3e"),t(`</div><div${a}><label for="api_key" class="block text-sm font-medium text-gray-700 mb-1"${a}>API Key <span class="text-red-500"${a}>*</span></label><input id="api_key"${k("value",I.api_key)} type="text" class="${_([{"border-red-500":M.api_key||g.apiErrors.api_key},"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"])}" maxlength="100"${a}>`),M.api_key?t(`<p class="mt-1 text-sm text-red-600"${a}>${$(M.api_key)}</p>`):g.apiErrors.api_key?t(`<p class="mt-1 text-sm text-red-600"${a}>${$(g.apiErrors.api_key)}</p>`):t("\x3c!----\x3e"),t(`</div><div${a}><label for="secret_key" class="block text-sm font-medium text-gray-700 mb-1"${a}>Secret Key <span class="text-red-500"${a}>*</span></label><input id="secret_key"${k("value",I.secret_key)} type="text" class="${_([{"border-red-500":M.secret_key||g.apiErrors.secret_key},"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"])}" maxlength="100"${a}>`),M.secret_key?t(`<p class="mt-1 text-sm text-red-600"${a}>${$(M.secret_key)}</p>`):g.apiErrors.secret_key?t(`<p class="mt-1 text-sm text-red-600"${a}>${$(g.apiErrors.secret_key)}</p>`):t("\x3c!----\x3e"),t(`</div><div${a}><label for="env" class="block text-sm font-medium text-gray-700 mb-1"${a}>Môi trường</label><select id="env" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"${a}>\x3c!--[--\x3e`),h(g.envEnums,e=>{t(`<option${k("value",e.value)}${E(Array.isArray(I.env)?w(I.env,e.value):A(I.env,e.value))?" selected":""}${a}>${$(e.name)}</option>`)}),t(`\x3c!--]--\x3e</select></div><div${a}><label for="status" class="block text-sm font-medium text-gray-700 mb-1"${a}>Trạng thái</label><select id="status" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"${a}>\x3c!--[--\x3e`),h(g.statusEnums,e=>{t(`<option${k("value",e.value)}${E(Array.isArray(I.status)?w(I.status,e.value):A(I.status,e.value))?" selected":""}${a}>${$(e.name)}</option>`)}),t(`\x3c!--]--\x3e</select></div></div><div class="flex justify-end gap-2 pt-4"${a}><button type="button" class="px-4 py-2 bg-gray-100 rounded-xl hover:bg-gray-200"${a}> Hủy </button><button type="submit"${E(O.value)?" disabled":""} class="px-4 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 disabled:opacity-50"${a}>${$(O.value?"Đang lưu...":"Lưu")}</button></div></form>`)}),_:1},r))}}},V=U.setup;U.setup=(e,t)=>{const r=g();return(r.modules||(r.modules=new Set)).add("pages/admin/shipping/API/ApiProviderForm.vue"),V?V(e,t):void 0};export{U as default};
