import{computed as e,ref as l,mergeProps as o,withCtx as a,unref as r,createVNode as d,useSSRContext as t}from"vue";import{ssrRenderComponent as n}from"vue/server-renderer";import{R as u}from"./Modal-CcMmmM3q.mjs";import{j as i}from"./FormWrapper-BkWXOK5b.mjs";import{$ as p}from"./FormField-C25kxm9c.mjs";import{m as s}from"./useFormDefaults-CTfnk28m.mjs";import"./_plugin-vue_export-helper-DlAUqK2U.mjs";const m={__name:"import-form",__ssrInlineRender:!0,props:{show:Boolean,apiErrors:{type:Object,default:()=>({})},products:{type:Array,default:()=>[]},warehouses:{type:Array,default:()=>[]}},emits:["submit","cancel"],setup(t,{emit:m}){const c=t,h=m,_=e({get:()=>c.show,set:()=>v()}),g=l(null),b=s(c,"import",{product_id:"",warehouse_id:"",quantity:1,batch_no:"",lot_no:"",expiry_date:"",cost_price:null}),y=e(()=>({product_id:[{required:"Vui lòng chọn sản phẩm."}],warehouse_id:[{required:"Vui lòng chọn kho hàng."}],quantity:[{required:"Vui lòng nhập số lượng nhập kho."},{integer:"Số lượng phải là số nguyên."},{min:[1,"Số lượng nhập kho phải lớn hơn 0."]}],batch_no:[{max:[100,"Mã lô hàng không được vượt quá 100 ký tự."]}],lot_no:[{max:[100,"Số lô sản xuất không được vượt quá 100 ký tự."]}],expiry_date:[{date:"Hạn sử dụng không đúng định dạng."},{after:["today","Hạn sử dụng phải sau ngày hiện tại."]}],cost_price:[{numeric:"Giá vốn phải là số."},{min:[0,"Giá vốn không được âm."]}]})),V=e(()=>[{value:"",label:"Chọn sản phẩm"},...c.products.map(e=>({value:e.id,label:`${e.name} (${e.code})`}))]),x=e(()=>[{value:"",label:"Chọn kho hàng"},...c.warehouses.map(e=>({value:e.id,label:e.name}))]);function q(e){h("submit",e)}function v(){h("cancel")}return(e,l,s,m)=>{l(n(u,o({modelValue:_.value,"onUpdate:modelValue":e=>_.value=e,title:"Nhập kho",size:"4xl"},m),{default:a((e,l,o,u)=>{if(!l)return[d(i,{"default-values":r(b),rules:y.value,"api-errors":t.apiErrors,"submit-text":"Nhập kho",onSubmit:q,onCancel:v,ref_key:"formWrapperRef",ref:g},{default:a(({form:e,errors:l,clearError:o,isSubmitting:a})=>[d("div",{class:"space-y-6"},[d("div",{class:"bg-gray-50 p-6 rounded-lg"},[d("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Thông tin nhập kho"),d("div",{class:"grid grid-cols-1 md:grid-cols-2 gap-6"},[d("div",{class:"md:col-span-2"},[d(p,{modelValue:e.product_id,"onUpdate:modelValue":[l=>e.product_id=l,e=>o("product_id")],label:"Sản phẩm",name:"product_id",type:"select",options:V.value,error:l.product_id,required:""},null,8,["modelValue","onUpdate:modelValue","options","error"])]),d("div",{class:"md:col-span-2"},[d(p,{modelValue:e.warehouse_id,"onUpdate:modelValue":[l=>e.warehouse_id=l,e=>o("warehouse_id")],label:"Kho hàng",name:"warehouse_id",type:"select",options:x.value,error:l.warehouse_id,required:""},null,8,["modelValue","onUpdate:modelValue","options","error"])]),d(p,{modelValue:e.quantity,"onUpdate:modelValue":[l=>e.quantity=l,e=>o("quantity")],label:"Số lượng nhập",name:"quantity",type:"number",error:l.quantity,required:"",min:1},null,8,["modelValue","onUpdate:modelValue","error"])])]),d("div",{class:"bg-gray-50 p-6 rounded-lg"},[d("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Thông tin lô hàng"),d("div",{class:"grid grid-cols-1 md:grid-cols-2 gap-6"},[d(p,{modelValue:e.batch_no,"onUpdate:modelValue":[l=>e.batch_no=l,e=>o("batch_no")],label:"Mã lô hàng",name:"batch_no",error:l.batch_no,placeholder:"Nhập mã lô hàng"},null,8,["modelValue","onUpdate:modelValue","error"]),d(p,{modelValue:e.lot_no,"onUpdate:modelValue":[l=>e.lot_no=l,e=>o("lot_no")],label:"Số lô sản xuất",name:"lot_no",error:l.lot_no,placeholder:"Nhập số lô sản xuất"},null,8,["modelValue","onUpdate:modelValue","error"]),d(p,{modelValue:e.expiry_date,"onUpdate:modelValue":[l=>e.expiry_date=l,e=>o("expiry_date")],label:"Hạn sử dụng",name:"expiry_date",type:"date",error:l.expiry_date},null,8,["modelValue","onUpdate:modelValue","error"]),d(p,{modelValue:e.cost_price,"onUpdate:modelValue":[l=>e.cost_price=l,e=>o("cost_price")],label:"Giá vốn",name:"cost_price",type:"number",error:l.cost_price,min:0,step:.01,placeholder:"Nhập giá vốn"},null,8,["modelValue","onUpdate:modelValue","error"])])])])]),_:1},8,["default-values","rules","api-errors"])];l(n(i,{"default-values":r(b),rules:y.value,"api-errors":t.apiErrors,"submit-text":"Nhập kho",onSubmit:q,onCancel:v,ref_key:"formWrapperRef",ref:g},{default:a(({form:e,errors:l,clearError:o,isSubmitting:a},r,t,u)=>{if(!r)return[d("div",{class:"space-y-6"},[d("div",{class:"bg-gray-50 p-6 rounded-lg"},[d("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Thông tin nhập kho"),d("div",{class:"grid grid-cols-1 md:grid-cols-2 gap-6"},[d("div",{class:"md:col-span-2"},[d(p,{modelValue:e.product_id,"onUpdate:modelValue":[l=>e.product_id=l,e=>o("product_id")],label:"Sản phẩm",name:"product_id",type:"select",options:V.value,error:l.product_id,required:""},null,8,["modelValue","onUpdate:modelValue","options","error"])]),d("div",{class:"md:col-span-2"},[d(p,{modelValue:e.warehouse_id,"onUpdate:modelValue":[l=>e.warehouse_id=l,e=>o("warehouse_id")],label:"Kho hàng",name:"warehouse_id",type:"select",options:x.value,error:l.warehouse_id,required:""},null,8,["modelValue","onUpdate:modelValue","options","error"])]),d(p,{modelValue:e.quantity,"onUpdate:modelValue":[l=>e.quantity=l,e=>o("quantity")],label:"Số lượng nhập",name:"quantity",type:"number",error:l.quantity,required:"",min:1},null,8,["modelValue","onUpdate:modelValue","error"])])]),d("div",{class:"bg-gray-50 p-6 rounded-lg"},[d("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Thông tin lô hàng"),d("div",{class:"grid grid-cols-1 md:grid-cols-2 gap-6"},[d(p,{modelValue:e.batch_no,"onUpdate:modelValue":[l=>e.batch_no=l,e=>o("batch_no")],label:"Mã lô hàng",name:"batch_no",error:l.batch_no,placeholder:"Nhập mã lô hàng"},null,8,["modelValue","onUpdate:modelValue","error"]),d(p,{modelValue:e.lot_no,"onUpdate:modelValue":[l=>e.lot_no=l,e=>o("lot_no")],label:"Số lô sản xuất",name:"lot_no",error:l.lot_no,placeholder:"Nhập số lô sản xuất"},null,8,["modelValue","onUpdate:modelValue","error"]),d(p,{modelValue:e.expiry_date,"onUpdate:modelValue":[l=>e.expiry_date=l,e=>o("expiry_date")],label:"Hạn sử dụng",name:"expiry_date",type:"date",error:l.expiry_date},null,8,["modelValue","onUpdate:modelValue","error"]),d(p,{modelValue:e.cost_price,"onUpdate:modelValue":[l=>e.cost_price=l,e=>o("cost_price")],label:"Giá vốn",name:"cost_price",type:"number",error:l.cost_price,min:0,step:.01,placeholder:"Nhập giá vốn"},null,8,["modelValue","onUpdate:modelValue","error"])])])])];r(`<div class="space-y-6"${u}><div class="bg-gray-50 p-6 rounded-lg"${u}><h3 class="text-lg font-semibold text-gray-900 mb-4"${u}>Thông tin nhập kho</h3><div class="grid grid-cols-1 md:grid-cols-2 gap-6"${u}><div class="md:col-span-2"${u}>`),r(n(p,{modelValue:e.product_id,"onUpdate:modelValue":[l=>e.product_id=l,e=>o("product_id")],label:"Sản phẩm",name:"product_id",type:"select",options:V.value,error:l.product_id,required:""},null,t,u)),r(`</div><div class="md:col-span-2"${u}>`),r(n(p,{modelValue:e.warehouse_id,"onUpdate:modelValue":[l=>e.warehouse_id=l,e=>o("warehouse_id")],label:"Kho hàng",name:"warehouse_id",type:"select",options:x.value,error:l.warehouse_id,required:""},null,t,u)),r("</div>"),r(n(p,{modelValue:e.quantity,"onUpdate:modelValue":[l=>e.quantity=l,e=>o("quantity")],label:"Số lượng nhập",name:"quantity",type:"number",error:l.quantity,required:"",min:1},null,t,u)),r(`</div></div><div class="bg-gray-50 p-6 rounded-lg"${u}><h3 class="text-lg font-semibold text-gray-900 mb-4"${u}>Thông tin lô hàng</h3><div class="grid grid-cols-1 md:grid-cols-2 gap-6"${u}>`),r(n(p,{modelValue:e.batch_no,"onUpdate:modelValue":[l=>e.batch_no=l,e=>o("batch_no")],label:"Mã lô hàng",name:"batch_no",error:l.batch_no,placeholder:"Nhập mã lô hàng"},null,t,u)),r(n(p,{modelValue:e.lot_no,"onUpdate:modelValue":[l=>e.lot_no=l,e=>o("lot_no")],label:"Số lô sản xuất",name:"lot_no",error:l.lot_no,placeholder:"Nhập số lô sản xuất"},null,t,u)),r(n(p,{modelValue:e.expiry_date,"onUpdate:modelValue":[l=>e.expiry_date=l,e=>o("expiry_date")],label:"Hạn sử dụng",name:"expiry_date",type:"date",error:l.expiry_date},null,t,u)),r(n(p,{modelValue:e.cost_price,"onUpdate:modelValue":[l=>e.cost_price=l,e=>o("cost_price")],label:"Giá vốn",name:"cost_price",type:"number",error:l.cost_price,min:0,step:.01,placeholder:"Nhập giá vốn"},null,t,u)),r("</div></div></div>")}),_:1},o,u))}),_:1},s))}}},c=m.setup;m.setup=(e,l)=>{const o=t();return(o.modules||(o.modules=new Set)).add("pages/admin/Inventory/import-form.vue"),c?c(e,l):void 0};export{m as default};
