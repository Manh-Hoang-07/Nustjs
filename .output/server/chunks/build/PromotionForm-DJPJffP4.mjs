import{computed as e,reactive as t,watch as o,mergeProps as r,withCtx as s,createVNode as n,withModifiers as d,withDirectives as i,createBlock as a,createCommentVNode as l,createTextVNode as u,vModelText as m,openBlock as c,toDisplayString as p,useSSRContext as b}from"vue";import{ssrRenderComponent as x,ssrRenderAttr as f,ssrRenderClass as g,ssrInterpolate as y}from"vue/server-renderer";import{R as v}from"./Modal-CcMmmM3q.mjs";import"./_plugin-vue_export-helper-DlAUqK2U.mjs";const h={__name:"PromotionForm",__ssrInlineRender:!0,props:{show:Boolean,promotion:Object,apiErrors:{type:Object,default:()=>({})},mode:String},emits:["submit","cancel"],setup(b,{emit:h}){const $=b,_=h,w=e({get:()=>$.show,set:()=>S()}),k=e(()=>"edit"===$.mode?"Sửa khuyến mãi":"Thêm khuyến mãi mới"),E=t({name:"",discount:"",valid_until:"",status:"active"}),U=t({});function C(){Object.keys(U).forEach(e=>delete U[e])}o(()=>$.promotion,e=>{e?(E.name=e.name||"",E.discount=e.discount||"",E.valid_until=e.valid_until||"",E.status=e.status||"active"):(E.name="",E.discount="",E.valid_until="",E.status="active",C())},{immediate:!0});const V=e(()=>({name:[{required:"Tên khuyến mãi là bắt buộc."}],discount:[{required:"Discount là bắt buộc."}],valid_until:[{required:"Ngày hết hạn là bắt buộc."}]}));function N(){(function(){C();let e=!0;const t=V.value;for(const o in t)for(const r of t[o])if(r.required&&!E[o]){U[o]=r.required,e=!1;break}return e})()&&_("submit",{...E})}function S(){_("cancel")}return(e,t,o,h)=>{t(x(v,r({modelValue:w.value,"onUpdate:modelValue":e=>w.value=e,title:k.value},h),{default:s((e,t,o,r)=>{if(!t)return[n("form",{onSubmit:d(N,["prevent"]),class:"space-y-4"},[n("div",null,[n("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[u("Tên khuyến mãi "),n("span",{class:"text-red-500"},"*")]),i(n("input",{"onUpdate:modelValue":e=>E.name=e,type:"text",class:["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":U.name||b.apiErrors.name}],maxlength:"100"},null,10,["onUpdate:modelValue"]),[[m,E.name]]),U.name?(c(),a("p",{key:0,class:"mt-1 text-sm text-red-600"},p(U.name),1)):b.apiErrors.name?(c(),a("p",{key:1,class:"mt-1 text-sm text-red-600"},p(b.apiErrors.name),1)):l("",!0)]),n("div",null,[n("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[u("Discount "),n("span",{class:"text-red-500"},"*")]),i(n("input",{"onUpdate:modelValue":e=>E.discount=e,type:"text",class:["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":U.discount||b.apiErrors.discount}]},null,10,["onUpdate:modelValue"]),[[m,E.discount]]),U.discount?(c(),a("p",{key:0,class:"mt-1 text-sm text-red-600"},p(U.discount),1)):b.apiErrors.discount?(c(),a("p",{key:1,class:"mt-1 text-sm text-red-600"},p(b.apiErrors.discount),1)):l("",!0)]),n("div",null,[n("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[u("Valid Until "),n("span",{class:"text-red-500"},"*")]),i(n("input",{"onUpdate:modelValue":e=>E.valid_until=e,type:"date",class:["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":U.valid_until||b.apiErrors.valid_until}]},null,10,["onUpdate:modelValue"]),[[m,E.valid_until]]),U.valid_until?(c(),a("p",{key:0,class:"mt-1 text-sm text-red-600"},p(U.valid_until),1)):b.apiErrors.valid_until?(c(),a("p",{key:1,class:"mt-1 text-sm text-red-600"},p(b.apiErrors.valid_until),1)):l("",!0)]),n("div",{class:"flex justify-end space-x-3 pt-4"},[n("button",{type:"button",onClick:S,class:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none"},"Huỷ"),n("button",{type:"submit",class:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none"},p("edit"===b.mode?"Cập nhật":"Thêm mới"),1)])],32)];t(`<form class="space-y-4"${r}><div${r}><label class="block text-sm font-medium text-gray-700 mb-1"${r}>Tên khuyến mãi <span class="text-red-500"${r}>*</span></label><input${f("value",E.name)} type="text" class="${g([{"border-red-500":U.name||b.apiErrors.name},"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"])}" maxlength="100"${r}>`),U.name?t(`<p class="mt-1 text-sm text-red-600"${r}>${y(U.name)}</p>`):b.apiErrors.name?t(`<p class="mt-1 text-sm text-red-600"${r}>${y(b.apiErrors.name)}</p>`):t("\x3c!----\x3e"),t(`</div><div${r}><label class="block text-sm font-medium text-gray-700 mb-1"${r}>Discount <span class="text-red-500"${r}>*</span></label><input${f("value",E.discount)} type="text" class="${g([{"border-red-500":U.discount||b.apiErrors.discount},"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"])}"${r}>`),U.discount?t(`<p class="mt-1 text-sm text-red-600"${r}>${y(U.discount)}</p>`):b.apiErrors.discount?t(`<p class="mt-1 text-sm text-red-600"${r}>${y(b.apiErrors.discount)}</p>`):t("\x3c!----\x3e"),t(`</div><div${r}><label class="block text-sm font-medium text-gray-700 mb-1"${r}>Valid Until <span class="text-red-500"${r}>*</span></label><input${f("value",E.valid_until)} type="date" class="${g([{"border-red-500":U.valid_until||b.apiErrors.valid_until},"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"])}"${r}>`),U.valid_until?t(`<p class="mt-1 text-sm text-red-600"${r}>${y(U.valid_until)}</p>`):b.apiErrors.valid_until?t(`<p class="mt-1 text-sm text-red-600"${r}>${y(b.apiErrors.valid_until)}</p>`):t("\x3c!----\x3e"),t(`</div><div class="flex justify-end space-x-3 pt-4"${r}><button type="button" class="px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none"${r}>Huỷ</button><button type="submit" class="px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none"${r}>${y("edit"===b.mode?"Cập nhật":"Thêm mới")}</button></div></form>`)}),_:1},o))}}},$=h.setup;h.setup=(e,t)=>{const o=b();return(o.modules||(o.modules=new Set)).add("pages/admin/Shipping/Promotions/PromotionForm.vue"),$?$(e,t):void 0};export{h as default};
