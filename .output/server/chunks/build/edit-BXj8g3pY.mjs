import{ssrRenderAttrs as e,ssrRenderComponent as t}from"vue/server-renderer";import r from"./form-BEYF3bXf.mjs";import{p as o}from"./endpoints-B4pxijLT.mjs";import{ref as a,reactive as s,watch as i,useSSRContext as n}from"vue";import{o as m}from"./enums-Bz77BRzt.mjs";import{E as u}from"./useApiClient-LtAAs9ek.mjs";import"./Modal-CcMmmM3q.mjs";import"./_plugin-vue_export-helper-DlAUqK2U.mjs";import"./FormWrapper-BkWXOK5b.mjs";import"./FormField-C25kxm9c.mjs";import"./useFormDefaults-CTfnk28m.mjs";import"./useUrl-CNWGMiP9.mjs";import"./ImageUploader-CkuS8dvw.mjs";import"axios";import"./server.mjs";import"../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";import"node:url";import"../routes/renderer.mjs";import"vue-bundle-renderer/runtime";import"unhead/server";import"devalue";import"unhead/utils";import"vue-router";const p={__name:"edit",__ssrInlineRender:!0,props:{show:Boolean,category:Object,onClose:Function},emits:["updated"],setup(n,{emit:p}){const d=u(),l=n,c=p,v=a(!1),f=a([]),y=a([]),g=a(null),j=a(!1),h=s({});async function S(e){try{if(!l.category)return;Object.keys(h).forEach(e=>delete h[e]);const t={...e,_method:"PUT"};await d.post(o.categories.update(l.category.id),t),c("updated"),l.onClose()}catch(e){if(422===e.response?.status&&e.response?.data?.errors){const t=e.response.data.errors;for(const e in t)Array.isArray(t[e])?h[e]=t[e][0]:h[e]=t[e]}}}function b(){l.onClose&&l.onClose()}return i(()=>l.show,e=>{v.value=e,e?(Object.keys(h).forEach(e=>delete h[e]),async function(){try{const e=await d.get(o.categories.list,{params:{per_page:100}});f.value=e.data.data||[]}catch{f.value=[]}}(),async function(){try{const e=m("basic_status");y.value=Array.isArray(e)?e:[]}catch{y.value=[]}}(),l.category?.id&&async function(){if(l.category?.id){j.value=!0;try{const e=await d.get(`/api/admin/categories/${l.category.id}`);g.value=e.data.data||e.data}catch{g.value=l.category}finally{j.value=!1}}}()):(g.value=null,j.value=!1)},{immediate:!0}),(o,a,s,i)=>{a(`<div${e(i)}>`),v.value?a(t(r,{show:v.value,category:g.value,"parent-categories":f.value,"status-enums":y.value,"api-errors":h,loading:j.value,onSubmit:S,onCancel:b},null,s)):a("\x3c!----\x3e"),a("</div>")}}},d=p.setup;p.setup=(e,t)=>{const r=n();return(r.modules||(r.modules=new Set)).add("pages/admin/Categories/edit.vue"),d?d(e,t):void 0};export{p as default};
