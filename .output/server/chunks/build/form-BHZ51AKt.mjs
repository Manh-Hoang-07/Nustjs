import{computed as e,mergeProps as a,withCtx as l,unref as o,createVNode as r,createCommentVNode as t,createBlock as d,openBlock as u,useSSRContext as m}from"vue";import{ssrRenderComponent as n}from"vue/server-renderer";import{R as s}from"./Modal-CcMmmM3q.mjs";import{j as i}from"./FormWrapper-BkWXOK5b.mjs";import{$ as p}from"./FormField-C25kxm9c.mjs";import{u as V}from"./ImageUploader-CkuS8dvw.mjs";import{i as b}from"./useUrl-CNWGMiP9.mjs";import"./_plugin-vue_export-helper-DlAUqK2U.mjs";const h={__name:"form",__ssrInlineRender:!0,props:{show:Boolean,user:Object,statusEnums:{type:Array,default:()=>[]},genderEnums:{type:Array,default:()=>[]},roleEnums:{type:Array,default:()=>[]},apiErrors:{type:Object,default:()=>({})},loading:{type:Boolean,default:!1}},emits:["submit","cancel"],setup(m,{emit:h}){const c=m,U=h,g=e(()=>c.user?"Chỉnh sửa người dùng":"Thêm người dùng mới"),y=e({get:()=>c.show,set:()=>k()}),f=e(()=>{const e=c.user||{};let a=[];return e.roles&&Array.isArray(e.roles)&&(a=e.roles.map(e=>e.id)),{username:"",email:"",phone:"",password:"",password_confirmation:"",name:"",gender:"",birthday:"",address:"",image:null,about:"",status:"",role_ids:a,remove_image:!1,...e}}),w=b(c,"user","image"),v=e(()=>({username:[{required:"Tên đăng nhập là bắt buộc."},{max:[50,"Tên đăng nhập không được vượt quá 50 ký tự."]}],email:[{required:"Email là bắt buộc."},{email:"Email không hợp lệ."}],phone:[{max:[20,"Số điện thoại không được vượt quá 20 ký tự."]}],password:c.user?[]:[{required:"Mật khẩu là bắt buộc."},{min:[8,"Mật khẩu phải có ít nhất 8 ký tự."]}],password_confirmation:c.user?[]:[{required:"Vui lòng xác nhận mật khẩu."}],name:[{max:[255,"Họ tên không được vượt quá 255 ký tự."]}],address:[{max:[255,"Địa chỉ không được vượt quá 255 ký tự."]}],about:[{max:[500,"Giới thiệu không được vượt quá 500 ký tự."]}]})),_=e(()=>(c.statusEnums||[]).map(e=>({value:e.value,label:e.label}))),x=e(()=>(c.genderEnums||[]).map(e=>({value:e.value,label:e.label}))),q=e(()=>(c.roleEnums||[]).map(e=>({value:e.id,label:e.name})));function A(e){U("submit",e)}function k(){U("cancel")}return(e,b,h,c)=>{b(n(s,a({modelValue:y.value,"onUpdate:modelValue":e=>y.value=e,title:g.value,loading:m.loading},c),{default:l((e,a,s,b)=>{if(!a)return[r(i,{"default-values":f.value,rules:v.value,"api-errors":m.apiErrors,"submit-text":m.user?"Cập nhật":"Thêm mới",onSubmit:A,onCancel:k},{default:l(({form:e,errors:a,clearError:l,isSubmitting:n})=>[r(p,{modelValue:e.username,"onUpdate:modelValue":[a=>e.username=a,e=>l("username")],label:"Tên đăng nhập",name:"username",error:a.username,required:"",autocomplete:"username"},null,8,["modelValue","onUpdate:modelValue","error"]),r(p,{modelValue:e.email,"onUpdate:modelValue":[a=>e.email=a,e=>l("email")],label:"Email",name:"email",type:"email",error:a.email,required:"",autocomplete:"email"},null,8,["modelValue","onUpdate:modelValue","error"]),r(p,{modelValue:e.phone,"onUpdate:modelValue":[a=>e.phone=a,e=>l("phone")],label:"Số điện thoại",name:"phone",type:"tel",error:a.phone,autocomplete:"tel"},null,8,["modelValue","onUpdate:modelValue","error"]),m.user?t("",!0):(u(),d(p,{key:0,modelValue:e.password,"onUpdate:modelValue":[a=>e.password=a,e=>l("password")],label:"Mật khẩu",name:"password",type:"password",error:a.password,required:"",autocomplete:"new-password"},null,8,["modelValue","onUpdate:modelValue","error"])),m.user?t("",!0):(u(),d(p,{key:1,modelValue:e.password_confirmation,"onUpdate:modelValue":[a=>e.password_confirmation=a,e=>l("password_confirmation")],label:"Xác nhận mật khẩu",name:"password_confirmation",type:"password",error:a.password_confirmation,required:"",autocomplete:"new-password"},null,8,["modelValue","onUpdate:modelValue","error"])),r(p,{modelValue:e.name,"onUpdate:modelValue":[a=>e.name=a,e=>l("name")],label:"Họ tên",name:"name",error:a.name,autocomplete:"name"},null,8,["modelValue","onUpdate:modelValue","error"]),r(p,{modelValue:e.gender,"onUpdate:modelValue":[a=>e.gender=a,e=>l("gender")],label:"Giới tính",name:"gender",type:"select",options:x.value,error:a.gender},null,8,["modelValue","onUpdate:modelValue","options","error"]),r(p,{modelValue:e.birthday,"onUpdate:modelValue":[a=>e.birthday=a,e=>l("birthday")],label:"Ngày sinh",name:"birthday",type:"date",error:a.birthday},null,8,["modelValue","onUpdate:modelValue","error"]),r(p,{modelValue:e.address,"onUpdate:modelValue":[a=>e.address=a,e=>l("address")],label:"Địa chỉ",name:"address",error:a.address,autocomplete:"street-address"},null,8,["modelValue","onUpdate:modelValue","error"]),r("div",null,[r("label",{class:"block text-sm font-medium text-gray-700 mb-1",for:"user-image"},"Ảnh đại diện"),r(V,{modelValue:e.image,"onUpdate:modelValue":a=>e.image=a,"default-url":o(w),onRemove:a=>e.remove_image=!0},null,8,["modelValue","onUpdate:modelValue","default-url","onRemove"])]),r(p,{modelValue:e.about,"onUpdate:modelValue":[a=>e.about=a,e=>l("about")],label:"Giới thiệu",name:"about",type:"textarea",error:a.about,autocomplete:"off"},null,8,["modelValue","onUpdate:modelValue","error"]),r(p,{modelValue:e.role_ids,"onUpdate:modelValue":[a=>e.role_ids=a,e=>l("role_ids")],label:"Vai trò",name:"role_ids",type:"select",options:q.value,error:a.role_ids,multiple:""},null,8,["modelValue","onUpdate:modelValue","options","error"]),r(p,{modelValue:e.status,"onUpdate:modelValue":[a=>e.status=a,e=>l("status")],label:"Trạng thái",name:"status",type:"select",options:_.value,error:a.status},null,8,["modelValue","onUpdate:modelValue","options","error"])]),_:1},8,["default-values","rules","api-errors","submit-text"])];a(n(i,{"default-values":f.value,rules:v.value,"api-errors":m.apiErrors,"submit-text":m.user?"Cập nhật":"Thêm mới",onSubmit:A,onCancel:k},{default:l(({form:e,errors:a,clearError:l,isSubmitting:s},i,b,h)=>{if(!i)return[r(p,{modelValue:e.username,"onUpdate:modelValue":[a=>e.username=a,e=>l("username")],label:"Tên đăng nhập",name:"username",error:a.username,required:"",autocomplete:"username"},null,8,["modelValue","onUpdate:modelValue","error"]),r(p,{modelValue:e.email,"onUpdate:modelValue":[a=>e.email=a,e=>l("email")],label:"Email",name:"email",type:"email",error:a.email,required:"",autocomplete:"email"},null,8,["modelValue","onUpdate:modelValue","error"]),r(p,{modelValue:e.phone,"onUpdate:modelValue":[a=>e.phone=a,e=>l("phone")],label:"Số điện thoại",name:"phone",type:"tel",error:a.phone,autocomplete:"tel"},null,8,["modelValue","onUpdate:modelValue","error"]),m.user?t("",!0):(u(),d(p,{key:0,modelValue:e.password,"onUpdate:modelValue":[a=>e.password=a,e=>l("password")],label:"Mật khẩu",name:"password",type:"password",error:a.password,required:"",autocomplete:"new-password"},null,8,["modelValue","onUpdate:modelValue","error"])),m.user?t("",!0):(u(),d(p,{key:1,modelValue:e.password_confirmation,"onUpdate:modelValue":[a=>e.password_confirmation=a,e=>l("password_confirmation")],label:"Xác nhận mật khẩu",name:"password_confirmation",type:"password",error:a.password_confirmation,required:"",autocomplete:"new-password"},null,8,["modelValue","onUpdate:modelValue","error"])),r(p,{modelValue:e.name,"onUpdate:modelValue":[a=>e.name=a,e=>l("name")],label:"Họ tên",name:"name",error:a.name,autocomplete:"name"},null,8,["modelValue","onUpdate:modelValue","error"]),r(p,{modelValue:e.gender,"onUpdate:modelValue":[a=>e.gender=a,e=>l("gender")],label:"Giới tính",name:"gender",type:"select",options:x.value,error:a.gender},null,8,["modelValue","onUpdate:modelValue","options","error"]),r(p,{modelValue:e.birthday,"onUpdate:modelValue":[a=>e.birthday=a,e=>l("birthday")],label:"Ngày sinh",name:"birthday",type:"date",error:a.birthday},null,8,["modelValue","onUpdate:modelValue","error"]),r(p,{modelValue:e.address,"onUpdate:modelValue":[a=>e.address=a,e=>l("address")],label:"Địa chỉ",name:"address",error:a.address,autocomplete:"street-address"},null,8,["modelValue","onUpdate:modelValue","error"]),r("div",null,[r("label",{class:"block text-sm font-medium text-gray-700 mb-1",for:"user-image"},"Ảnh đại diện"),r(V,{modelValue:e.image,"onUpdate:modelValue":a=>e.image=a,"default-url":o(w),onRemove:a=>e.remove_image=!0},null,8,["modelValue","onUpdate:modelValue","default-url","onRemove"])]),r(p,{modelValue:e.about,"onUpdate:modelValue":[a=>e.about=a,e=>l("about")],label:"Giới thiệu",name:"about",type:"textarea",error:a.about,autocomplete:"off"},null,8,["modelValue","onUpdate:modelValue","error"]),r(p,{modelValue:e.role_ids,"onUpdate:modelValue":[a=>e.role_ids=a,e=>l("role_ids")],label:"Vai trò",name:"role_ids",type:"select",options:q.value,error:a.role_ids,multiple:""},null,8,["modelValue","onUpdate:modelValue","options","error"]),r(p,{modelValue:e.status,"onUpdate:modelValue":[a=>e.status=a,e=>l("status")],label:"Trạng thái",name:"status",type:"select",options:_.value,error:a.status},null,8,["modelValue","onUpdate:modelValue","options","error"])];i(n(p,{modelValue:e.username,"onUpdate:modelValue":[a=>e.username=a,e=>l("username")],label:"Tên đăng nhập",name:"username",error:a.username,required:"",autocomplete:"username"},null,b,h)),i(n(p,{modelValue:e.email,"onUpdate:modelValue":[a=>e.email=a,e=>l("email")],label:"Email",name:"email",type:"email",error:a.email,required:"",autocomplete:"email"},null,b,h)),i(n(p,{modelValue:e.phone,"onUpdate:modelValue":[a=>e.phone=a,e=>l("phone")],label:"Số điện thoại",name:"phone",type:"tel",error:a.phone,autocomplete:"tel"},null,b,h)),m.user?i("\x3c!----\x3e"):i(n(p,{modelValue:e.password,"onUpdate:modelValue":[a=>e.password=a,e=>l("password")],label:"Mật khẩu",name:"password",type:"password",error:a.password,required:"",autocomplete:"new-password"},null,b,h)),m.user?i("\x3c!----\x3e"):i(n(p,{modelValue:e.password_confirmation,"onUpdate:modelValue":[a=>e.password_confirmation=a,e=>l("password_confirmation")],label:"Xác nhận mật khẩu",name:"password_confirmation",type:"password",error:a.password_confirmation,required:"",autocomplete:"new-password"},null,b,h)),i(n(p,{modelValue:e.name,"onUpdate:modelValue":[a=>e.name=a,e=>l("name")],label:"Họ tên",name:"name",error:a.name,autocomplete:"name"},null,b,h)),i(n(p,{modelValue:e.gender,"onUpdate:modelValue":[a=>e.gender=a,e=>l("gender")],label:"Giới tính",name:"gender",type:"select",options:x.value,error:a.gender},null,b,h)),i(n(p,{modelValue:e.birthday,"onUpdate:modelValue":[a=>e.birthday=a,e=>l("birthday")],label:"Ngày sinh",name:"birthday",type:"date",error:a.birthday},null,b,h)),i(n(p,{modelValue:e.address,"onUpdate:modelValue":[a=>e.address=a,e=>l("address")],label:"Địa chỉ",name:"address",error:a.address,autocomplete:"street-address"},null,b,h)),i(`<div${h}><label class="block text-sm font-medium text-gray-700 mb-1" for="user-image"${h}>Ảnh đại diện</label>`),i(n(V,{modelValue:e.image,"onUpdate:modelValue":a=>e.image=a,"default-url":o(w),onRemove:a=>e.remove_image=!0},null,b,h)),i("</div>"),i(n(p,{modelValue:e.about,"onUpdate:modelValue":[a=>e.about=a,e=>l("about")],label:"Giới thiệu",name:"about",type:"textarea",error:a.about,autocomplete:"off"},null,b,h)),i(n(p,{modelValue:e.role_ids,"onUpdate:modelValue":[a=>e.role_ids=a,e=>l("role_ids")],label:"Vai trò",name:"role_ids",type:"select",options:q.value,error:a.role_ids,multiple:""},null,b,h)),i(n(p,{modelValue:e.status,"onUpdate:modelValue":[a=>e.status=a,e=>l("status")],label:"Trạng thái",name:"status",type:"select",options:_.value,error:a.status},null,b,h))}),_:1},s,b))}),_:1},h))}}},c=h.setup;h.setup=(e,a)=>{const l=m();return(l.modules||(l.modules=new Set)).add("pages/admin/users/form.vue"),c?c(e,a):void 0};export{h as default};
