import{ssrRenderAttrs as e,ssrRenderComponent as o}from"vue/server-renderer";import t from"./form-sijxxLfu.mjs";import{p as r}from"./endpoints-B4pxijLT.mjs";import{ref as n,reactive as a,watch as s,useSSRContext as i}from"vue";import{s as u}from"./apiClient-CZcLLw7q.mjs";import"./Modal-CcMmmM3q.mjs";import"./_plugin-vue_export-helper-DlAUqK2U.mjs";import"./FormWrapper-BkWXOK5b.mjs";import"./FormField-C25kxm9c.mjs";import"axios";const d={__name:"edit",__ssrInlineRender:!0,props:{show:Boolean,inventory:Object,products:{type:Array,default:()=>[]},warehouses:{type:Array,default:()=>[]},onClose:Function},emits:["updated"],setup(i,{emit:d}){const l=i,p=d,m=n(!1),c=n(null),v=n(!1),y=a({});async function h(e){try{Object.keys(y).forEach(e=>delete y[e]),await u.put(r.inventory.update(l.inventory.id),e),p("updated"),l.onClose()}catch(e){if(422===e.response?.status&&e.response?.data?.errors){const o=e.response.data.errors;for(const e in o)Array.isArray(o[e])?y[e]=o[e][0]:y[e]=o[e]}}}function w(){l.onClose&&l.onClose()}return s(()=>l.show,e=>{m.value=e,e?(Object.keys(y).forEach(e=>delete y[e]),l.inventory?.id&&async function(){if(l.inventory?.id){v.value=!0;try{const e=await u.get(`/api/admin/inventory/${l.inventory.id}`);c.value=e.data.data||e.data}catch{c.value=l.inventory}finally{v.value=!1}}}()):(c.value=null,v.value=!1)},{immediate:!0}),(r,n,a,s)=>{n(`<div${e(s)}>`),m.value?n(o(t,{show:m.value,"api-errors":y,products:i.products,warehouses:i.warehouses,inventory:c.value,loading:v.value,onSubmit:h,onCancel:w},null,a)):n("\x3c!----\x3e"),n("</div>")}}},l=d.setup;d.setup=(e,o)=>{const t=i();return(t.modules||(t.modules=new Set)).add("pages/admin/inventory/edit.vue"),l?l(e,o):void 0};export{d as default};
