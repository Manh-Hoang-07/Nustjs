import{ref as t,mergeProps as e,useSSRContext as a}from"vue";import{ssrRenderAttrs as s,ssrRenderList as i,ssrInterpolate as n,ssrRenderClass as o,ssrRenderComponent as r}from"vue/server-renderer";import{s as l}from"./apiClient-CZcLLw7q.mjs";import{p as d}from"./endpoints-B4pxijLT.mjs";import p from"./PromotionForm-DdQIV0Bx.mjs";import"axios";import"./Modal-CcMmmM3q.mjs";import"./_plugin-vue_export-helper-DlAUqK2U.mjs";const u={__name:"index",__ssrInlineRender:!0,setup(a){const u=t(!1),c=t(!1);t(""),t(""),t(""),t(""),t(!1),t(""),t(!1);const x=t([]),m=t(!1),h=t(""),g=t(null),v=t({});function y(){u.value=!1,g.value=null,Object.keys(v.value).forEach(t=>delete v.value[t])}async function b(t){try{g.value&&g.value.id?await l.put(d.shippingPromotions.update(g.value.id),t):await l.post(d.shippingPromotions.create,t),await async function(){m.value=!0,h.value="";try{const t=await l.get(d.shippingPromotions.list);x.value=t.data.data}catch{h.value="Không lấy được danh sách khuyến mãi!"}finally{m.value=!1}}(),y()}catch(t){if(422===t.response?.status&&t.response?.data?.errors){const e=t.response.data.errors;for(const t in e)v.value[t]=e[t][0]}}}return t(!1),t(!1),(t,a,l,d)=>{a(`<div${s(e({class:"container mx-auto p-4"},d))}><div class="flex justify-between items-center mb-6"><h1 class="text-2xl font-bold">Quản lý khuyến mãi vận chuyển</h1><button class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none"> Thêm khuyến mãi mới </button></div><div class="bg-white shadow-md rounded-lg overflow-hidden"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ID</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Tên khuyến mãi</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Discount</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Ngày hết hạn</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Trạng thái</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Thao tác</th></tr></thead><tbody class="bg-white divide-y divide-gray-200">\x3c!--[--\x3e`),i(x.value,e=>{a(`<tr><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${n(e.id)}</td><td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">${n(e.name)}</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${n(e.discount)}</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${n(e.valid_until)}</td><td class="px-6 py-4 whitespace-nowrap"><span class="${o([t.getStatusClass(e.status),"px-2 inline-flex text-xs leading-5 font-semibold rounded-full"])}">${n(t.getStatusName(e.status))}</span></td><td class="px-6 py-4 whitespace-nowrap text-sm font-medium"><button class="text-indigo-600 hover:text-indigo-900 mr-3"> Sửa </button><button class="text-blue-600 hover:text-blue-900">${n("active"===e.status?"Tắt":"Bật")}</button></td></tr>`)}),a("\x3c!--]--\x3e"),0===x.value.length?a('<tr><td colspan="6" class="px-6 py-4 text-center text-gray-500"> Không có dữ liệu </td></tr>'):a("\x3c!----\x3e"),a("</tbody></table></div>"),u.value||c.value?a(r(p,{show:u.value,promotion:g.value,"api-errors":v.value,mode:t.editPromotionId?"edit":"create",onSubmit:b,onCancel:y},null,l)):a("\x3c!----\x3e"),a("</div>")}}},c=u.setup;u.setup=(t,e)=>{const s=a();return(s.modules||(s.modules=new Set)).add("pages/admin/shipping/Promotions/index.vue"),c?c(t,e):void 0};export{u as default};
