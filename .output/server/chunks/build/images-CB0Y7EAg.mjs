import{computed as e,ref as t,mergeProps as o,useSSRContext as n}from"vue";import{ssrRenderAttrs as a,ssrInterpolate as i,ssrRenderList as s,ssrRenderAttr as l,ssrRenderComponent as r}from"vue/server-renderer";import{useRoute as u}from"vue-router";import d from"./image-form-D9X_cjVq.mjs";import{m}from"./ConfirmModal-CltOniOu.mjs";import{E as c}from"./useApiClient-LtAAs9ek.mjs";import"./Modal-CcMmmM3q.mjs";import"./_plugin-vue_export-helper-DlAUqK2U.mjs";import"axios";import"./server.mjs";import"../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";import"node:url";import"../routes/renderer.mjs";import"vue-bundle-renderer/runtime";import"unhead/server";import"devalue";import"unhead/utils";const h={__name:"images",__ssrInlineRender:!0,setup(n){const h=c(),p=u(),g=e(()=>p.params.id),f=t([]),y=t(null),k=t(null),$=t(!1),C=t(!1),_=t(!1),M=t(!1);async function v(){$.value=!0;try{const e=await h.get(`/api/admin/products/${g.value}/images`);f.value=e.data.data||[]}catch{}finally{$.value=!1}}function x(){C.value=!1}function b(){_.value=!1,k.value=null}function w(){M.value=!1,k.value=null}async function I(){await v(),x()}async function R$1(){await v(),b()}async function j(){try{await h.delete(`/api/admin/images/${k.value.id}`),await v(),w()}catch{}}return(e,t,n,u)=>{t(`<div${a(o({class:"container mx-auto p-4"},u))}><div class="flex justify-between items-center mb-6"><div><h1 class="text-2xl font-bold">Quản lý ảnh sản phẩm</h1><p class="text-gray-600 mt-1">${i(y.value?.name)}</p></div><div class="flex space-x-3"><button class="px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none"> Quay lại sản phẩm </button><button class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none"> Thêm ảnh mới </button></div></div><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">\x3c!--[--\x3e`),s(f.value,e=>{t(`<div class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-200"><div class="relative"><img${l("src",e.url)}${l("alt",e.alt_text||"Product image")} class="w-full h-48 object-cover"><div class="absolute top-2 right-2 flex space-x-1"><button class="p-1 bg-blue-500 text-white rounded-full hover:bg-blue-600 focus:outline-none" title="Chỉnh sửa"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></button><button class="p-1 bg-red-500 text-white rounded-full hover:bg-red-600 focus:outline-none" title="Xóa"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div><div class="absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 text-white p-2"><div class="text-xs">Thứ tự: ${i(e.order)}</div></div></div><div class="p-4"><h3 class="font-medium text-gray-900 mb-1">${i(e.alt_text||"Không có mô tả")}</h3><p class="text-sm text-gray-500">${i(e.caption||"Không có chú thích")}</p></div></div>`)}),t("\x3c!--]--\x3e</div>"),0===f.value.length?t('<div class="text-center py-12"><svg class="mx-auto h-12 w-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg><h3 class="mt-2 text-sm font-medium text-gray-900">Không có ảnh nào</h3><p class="mt-1 text-sm text-gray-500">Bắt đầu bằng cách thêm ảnh mới cho sản phẩm.</p><div class="mt-6"><button class="inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none"> Thêm ảnh đầu tiên </button></div></div>'):t("\x3c!----\x3e"),C.value?t(r(d,{show:C.value,"product-id":g.value,"on-close":x,onCreated:I},null,n)):t("\x3c!----\x3e"),_.value?t(r(d,{show:_.value,image:k.value,"product-id":g.value,"on-close":b,onUpdated:R$1},null,n)):t("\x3c!----\x3e"),M.value?t(r(m,{show:M.value,title:"Xác nhận xóa",message:"Bạn có chắc chắn muốn xóa ảnh này?","on-close":w,onConfirm:j},null,n)):t("\x3c!----\x3e"),t("</div>")}}},p=h.setup;h.setup=(e,t)=>{const o=n();return(o.modules||(o.modules=new Set)).add("pages/admin/products/images.vue"),p?p(e,t):void 0};export{h as default};
