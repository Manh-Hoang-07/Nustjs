import{computed as e,reactive as t,watch as r,mergeProps as o,withCtx as s,createVNode as d,withModifiers as u,withDirectives as a,createBlock as i,createCommentVNode as l,createTextVNode as n,openBlock as p,Fragment as c,renderList as m,toDisplayString as y,vModelSelect as b,vModelText as x,useSSRContext as v}from"vue";import{ssrRenderComponent as f,ssrRenderClass as _,ssrIncludeBooleanAttr as g,ssrLooseContain as $,ssrLooseEqual as h,ssrRenderList as w,ssrRenderAttr as E,ssrInterpolate as k}from"vue/server-renderer";import{R as A}from"./Modal-CcMmmM3q.mjs";import"./_plugin-vue_export-helper-DlAUqK2U.mjs";const U={__name:"ProductRuleForm",__ssrInlineRender:!0,props:{show:Boolean,productRule:Object,products:{type:Array,default:()=>[]},apiErrors:{type:Object,default:()=>({})},mode:String},emits:["submit","cancel"],setup(v,{emit:U}){const V=v,C=U,j=e({get:()=>V.show,set:()=>q()}),R=e(()=>"edit"===V.mode?"Sửa quy tắc sản phẩm":"Thêm quy tắc sản phẩm mới"),T=t({product_id:"",rule_type:"",value:"",status:"active"}),H=t({});function S(){Object.keys(H).forEach(e=>delete H[e])}r(()=>V.productRule,e=>{e?(T.product_id=e.product_id||"",T.rule_type=e.rule_type||"",T.value=e.value||"",T.status=e.status||"active"):(T.product_id="",T.rule_type="",T.value="",T.status="active",S())},{immediate:!0});const K=e(()=>({product_id:[{required:"Sản phẩm là bắt buộc."}],rule_type:[{required:"Loại quy tắc là bắt buộc."}],value:[{required:"Giá trị là bắt buộc."},{number:"Giá trị phải là số."}]}));function G(){(function(){S();let e=!0;const t=K.value;for(const r in t)for(const o of t[r]){if(o.required&&!T[r]){H[r]=o.required,e=!1;break}if(o.number&&T[r]&&isNaN(Number(T[r]))){H[r]=o.number,e=!1;break}}return e})()&&C("submit",{...T})}function q(){C("cancel")}return(e,t,r,U)=>{t(f(A,o({modelValue:j.value,"onUpdate:modelValue":e=>j.value=e,title:R.value},U),{default:s((e,t,r,o)=>{if(!t)return[d("form",{onSubmit:u(G,["prevent"]),class:"space-y-4"},[d("div",null,[d("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[n("Sản phẩm "),d("span",{class:"text-red-500"},"*")]),a(d("select",{"onUpdate:modelValue":e=>T.product_id=e,class:["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":H.product_id||v.apiErrors.product_id}]},[d("option",{value:""},"Chọn sản phẩm"),(p(!0),i(c,null,m(v.products,e=>(p(),i("option",{key:e.id,value:e.id},y(e.name),9,["value"]))),128))],10,["onUpdate:modelValue"]),[[b,T.product_id]]),H.product_id?(p(),i("p",{key:0,class:"mt-1 text-sm text-red-600"},y(H.product_id),1)):v.apiErrors.product_id?(p(),i("p",{key:1,class:"mt-1 text-sm text-red-600"},y(v.apiErrors.product_id),1)):l("",!0)]),d("div",null,[d("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[n("Loại quy tắc "),d("span",{class:"text-red-500"},"*")]),a(d("select",{"onUpdate:modelValue":e=>T.rule_type=e,class:["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":H.rule_type||v.apiErrors.rule_type}]},[d("option",{value:""},"Chọn loại"),d("option",{value:"min_order"},"Đơn tối thiểu"),d("option",{value:"max_order"},"Đơn tối đa"),d("option",{value:"special"},"Đặc biệt")],10,["onUpdate:modelValue"]),[[b,T.rule_type]]),H.rule_type?(p(),i("p",{key:0,class:"mt-1 text-sm text-red-600"},y(H.rule_type),1)):v.apiErrors.rule_type?(p(),i("p",{key:1,class:"mt-1 text-sm text-red-600"},y(v.apiErrors.rule_type),1)):l("",!0)]),d("div",null,[d("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[n("Giá trị "),d("span",{class:"text-red-500"},"*")]),a(d("input",{"onUpdate:modelValue":e=>T.value=e,type:"number",class:["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":H.value||v.apiErrors.value}]},null,10,["onUpdate:modelValue"]),[[x,T.value]]),H.value?(p(),i("p",{key:0,class:"mt-1 text-sm text-red-600"},y(H.value),1)):v.apiErrors.value?(p(),i("p",{key:1,class:"mt-1 text-sm text-red-600"},y(v.apiErrors.value),1)):l("",!0)]),d("div",null,[d("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Trạng thái"),a(d("select",{"onUpdate:modelValue":e=>T.status=e,class:["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":H.status||v.apiErrors.status}]},[d("option",{value:"active"},"Hoạt động"),d("option",{value:"inactive"},"Không hoạt động")],10,["onUpdate:modelValue"]),[[b,T.status]]),H.status?(p(),i("p",{key:0,class:"mt-1 text-sm text-red-600"},y(H.status),1)):v.apiErrors.status?(p(),i("p",{key:1,class:"mt-1 text-sm text-red-600"},y(v.apiErrors.status),1)):l("",!0)]),d("div",{class:"flex justify-end space-x-3 pt-4"},[d("button",{type:"button",onClick:q,class:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none"},"Huỷ"),d("button",{type:"submit",class:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none"},y("edit"===v.mode?"Cập nhật":"Thêm mới"),1)])],32)];t(`<form class="space-y-4"${o}><div${o}><label class="block text-sm font-medium text-gray-700 mb-1"${o}>Sản phẩm <span class="text-red-500"${o}>*</span></label><select class="${_([{"border-red-500":H.product_id||v.apiErrors.product_id},"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"])}"${o}><option value=""${g(Array.isArray(T.product_id)?$(T.product_id,""):h(T.product_id,""))?" selected":""}${o}>Chọn sản phẩm</option>\x3c!--[--\x3e`),w(v.products,e=>{t(`<option${E("value",e.id)}${g(Array.isArray(T.product_id)?$(T.product_id,e.id):h(T.product_id,e.id))?" selected":""}${o}>${k(e.name)}</option>`)}),t("\x3c!--]--\x3e</select>"),H.product_id?t(`<p class="mt-1 text-sm text-red-600"${o}>${k(H.product_id)}</p>`):v.apiErrors.product_id?t(`<p class="mt-1 text-sm text-red-600"${o}>${k(v.apiErrors.product_id)}</p>`):t("\x3c!----\x3e"),t(`</div><div${o}><label class="block text-sm font-medium text-gray-700 mb-1"${o}>Loại quy tắc <span class="text-red-500"${o}>*</span></label><select class="${_([{"border-red-500":H.rule_type||v.apiErrors.rule_type},"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"])}"${o}><option value=""${g(Array.isArray(T.rule_type)?$(T.rule_type,""):h(T.rule_type,""))?" selected":""}${o}>Chọn loại</option><option value="min_order"${g(Array.isArray(T.rule_type)?$(T.rule_type,"min_order"):h(T.rule_type,"min_order"))?" selected":""}${o}>Đơn tối thiểu</option><option value="max_order"${g(Array.isArray(T.rule_type)?$(T.rule_type,"max_order"):h(T.rule_type,"max_order"))?" selected":""}${o}>Đơn tối đa</option><option value="special"${g(Array.isArray(T.rule_type)?$(T.rule_type,"special"):h(T.rule_type,"special"))?" selected":""}${o}>Đặc biệt</option></select>`),H.rule_type?t(`<p class="mt-1 text-sm text-red-600"${o}>${k(H.rule_type)}</p>`):v.apiErrors.rule_type?t(`<p class="mt-1 text-sm text-red-600"${o}>${k(v.apiErrors.rule_type)}</p>`):t("\x3c!----\x3e"),t(`</div><div${o}><label class="block text-sm font-medium text-gray-700 mb-1"${o}>Giá trị <span class="text-red-500"${o}>*</span></label><input${E("value",T.value)} type="number" class="${_([{"border-red-500":H.value||v.apiErrors.value},"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"])}"${o}>`),H.value?t(`<p class="mt-1 text-sm text-red-600"${o}>${k(H.value)}</p>`):v.apiErrors.value?t(`<p class="mt-1 text-sm text-red-600"${o}>${k(v.apiErrors.value)}</p>`):t("\x3c!----\x3e"),t(`</div><div${o}><label class="block text-sm font-medium text-gray-700 mb-1"${o}>Trạng thái</label><select class="${_([{"border-red-500":H.status||v.apiErrors.status},"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"])}"${o}><option value="active"${g(Array.isArray(T.status)?$(T.status,"active"):h(T.status,"active"))?" selected":""}${o}>Hoạt động</option><option value="inactive"${g(Array.isArray(T.status)?$(T.status,"inactive"):h(T.status,"inactive"))?" selected":""}${o}>Không hoạt động</option></select>`),H.status?t(`<p class="mt-1 text-sm text-red-600"${o}>${k(H.status)}</p>`):v.apiErrors.status?t(`<p class="mt-1 text-sm text-red-600"${o}>${k(v.apiErrors.status)}</p>`):t("\x3c!----\x3e"),t(`</div><div class="flex justify-end space-x-3 pt-4"${o}><button type="button" class="px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none"${o}>Huỷ</button><button type="submit" class="px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none"${o}>${k("edit"===v.mode?"Cập nhật":"Thêm mới")}</button></div></form>`)}),_:1},r))}}},V=U.setup;U.setup=(e,t)=>{const r=v();return(r.modules||(r.modules=new Set)).add("pages/admin/products/ProductRuleForm.vue"),V?V(e,t):void 0};export{U as default};
