import e from"axios";const r=e.create({baseURL:process.env.API_BASE_URL||"http://127.0.0.1:8000",withCredentials:!0});r.interceptors.request.use(e=>{const r=function(){const e=(void 0).cookie.split(";");for(let r of e){const[e,s]=r.trim().split("=");if("auth_token"===e)return decodeURIComponent(s)}return null}();return r&&(e.headers.Authorization=`Bearer ${r}`),e},e=>(console.error("API Request Error:",e),Promise.reject(e))),r.interceptors.response.use(e=>e,e=>(console.error("API Response Error:",{status:e.response?.status,data:e.response?.data,url:e.config?.url,message:e.message}),(401===e.response?.status||403===e.response?.status)&&console.warn("Authentication error detected:",e.response?.data),Promise.reject(e)));export{r as s};
