import{ssrRenderAttrs as e,ssrRenderComponent as r}from"vue/server-renderer";import t from"./form-C8UOvUL1.mjs";import{p as o}from"./endpoints-B4pxijLT.mjs";import{ref as s,reactive as n,watch as i,useSSRContext as a}from"vue";import{E as u}from"./useApiClient-LtAAs9ek.mjs";import"./Modal-CcMmmM3q.mjs";import"./_plugin-vue_export-helper-DlAUqK2U.mjs";import"./server.mjs";import"../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";import"node:url";import"../routes/renderer.mjs";import"vue-bundle-renderer/runtime";import"unhead/server";import"devalue";import"unhead/utils";import"vue-router";import"axios";const l={__name:"edit",__ssrInlineRender:!0,props:{show:Boolean,role:Object,statusEnums:{type:Array,default:()=>[]},onClose:Function},emits:["updated"],setup(a,{emit:l}){const d=u(),m=a,p=l,c=s(!1),v=s(null),f=s(!1),y=n({});async function h(e){try{if(!m.role)return;Object.keys(y).forEach(e=>delete y[e]);const r={...e,_method:"PUT"};await d.post(o.roles.update(m.role.id),r);p("updated"),m.onClose()}catch(e){if(422===e.response?.status&&e.response?.data?.errors){const r=e.response.data.errors;for(const e in r)Array.isArray(r[e])?y[e]=r[e][0]:y[e]=r[e]}}}function C(){m.onClose&&m.onClose()}return i(()=>m.show,e=>{c.value=e,e?(Object.keys(y).forEach(e=>delete y[e]),m.role?.id&&async function(){if(m.role?.id){f.value=!0;try{const e=await d.get(`/api/admin/roles/${m.role.id}`);v.value=e.data.data||e.data}catch{v.value=m.role}finally{f.value=!1}}}()):(v.value=null,f.value=!1)},{immediate:!0}),(o,s,n,i)=>{s(`<div${e(i)}>`),f.value?s('<div class="flex justify-center items-center p-8"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div><span class="ml-2 text-gray-600">Đang tải dữ liệu...</span></div>'):c.value?s(r(t,{show:c.value,role:v.value,"status-enums":a.statusEnums,"api-errors":y,onSubmit:h,onCancel:C},null,n)):s("\x3c!----\x3e"),s("</div>")}}},d=l.setup;l.setup=(e,r)=>{const t=a();return(t.modules||(t.modules=new Set)).add("pages/admin/roles/edit.vue"),d?d(e,r):void 0};export{l as default};
