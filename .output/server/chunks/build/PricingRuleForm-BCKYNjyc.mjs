import{computed as e,reactive as r,watch as t,mergeProps as i,withCtx as s,createVNode as o,withModifiers as d,withDirectives as n,createBlock as a,createCommentVNode as m,createTextVNode as l,openBlock as u,Fragment as p,renderList as c,toDisplayString as x,vModelSelect as g,vModelText as b,useSSRContext as _}from"vue";import{ssrRenderComponent as f,ssrRenderClass as h,ssrIncludeBooleanAttr as y,ssrLooseContain as v,ssrLooseEqual as $,ssrRenderList as w,ssrRenderAttr as k,ssrInterpolate as E}from"vue/server-renderer";import{R as z}from"./Modal-CcMmmM3q.mjs";import"./_plugin-vue_export-helper-DlAUqK2U.mjs";const V={__name:"PricingRuleForm",__ssrInlineRender:!0,props:{show:Boolean,pricingRule:Object,services:{type:Array,default:()=>[]},zones:{type:Array,default:()=>[]},apiErrors:{type:Object,default:()=>({})},mode:String},emits:["submit","cancel"],setup(_,{emit:V}){const U=_,A=V,K=e({get:()=>U.show,set:()=>T()}),q=e(()=>"edit"===U.mode?"Sửa quy tắc giá":"Thêm quy tắc giá mới"),j=r({service_id:"",zone_id:"",min_weight:"",max_weight:"",markup_percent:"",markup_fixed:"",min_fee:"",status:"active"}),N=r({});function C(){Object.keys(N).forEach(e=>delete N[e])}t(()=>U.pricingRule,e=>{e?(j.service_id=e.service_id||"",j.zone_id=e.zone_id||"",j.min_weight=e.min_weight||"",j.max_weight=e.max_weight||"",j.markup_percent=e.markup_percent||"",j.markup_fixed=e.markup_fixed||"",j.min_fee=e.min_fee||"",j.status=e.status||"active"):(j.service_id="",j.zone_id="",j.min_weight="",j.max_weight="",j.markup_percent="",j.markup_fixed="",j.min_fee="",j.status="active",C())},{immediate:!0});const P=e(()=>({service_id:[{required:"Dịch vụ là bắt buộc."}],zone_id:[{required:"Zone là bắt buộc."}],min_weight:[{number:"Khối lượng tối thiểu phải là số."}],max_weight:[{number:"Khối lượng tối đa phải là số."}],markup_percent:[{number:"Tăng giá % phải là số."}],markup_fixed:[{number:"Tăng giá cố định phải là số."}],min_fee:[{number:"Phí tối thiểu phải là số."}]}));function L(){(function(){C();let e=!0;const r=P.value;for(const t in r)for(const i of r[t]){if(i.required&&!j[t]){N[t]=i.required,e=!1;break}if(i.number&&j[t]&&isNaN(Number(j[t]))){N[t]=i.number,e=!1;break}}return e})()&&A("submit",{...j})}function T(){A("cancel")}return(e,r,t,V)=>{r(f(z,i({modelValue:K.value,"onUpdate:modelValue":e=>K.value=e,title:q.value},V),{default:s((e,r,t,i)=>{if(!r)return[o("form",{onSubmit:d(L,["prevent"]),class:"space-y-4"},[o("div",null,[o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[l("Dịch vụ "),o("span",{class:"text-red-500"},"*")]),n(o("select",{"onUpdate:modelValue":e=>j.service_id=e,class:["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":N.service_id||_.apiErrors.service_id}]},[o("option",{value:""},"Chọn dịch vụ"),(u(!0),a(p,null,c(_.services,e=>(u(),a("option",{key:e.id,value:e.id},x(e.name),9,["value"]))),128))],10,["onUpdate:modelValue"]),[[g,j.service_id]]),N.service_id?(u(),a("p",{key:0,class:"mt-1 text-sm text-red-600"},x(N.service_id),1)):_.apiErrors.service_id?(u(),a("p",{key:1,class:"mt-1 text-sm text-red-600"},x(_.apiErrors.service_id),1)):m("",!0)]),o("div",null,[o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[l("Zone "),o("span",{class:"text-red-500"},"*")]),n(o("select",{"onUpdate:modelValue":e=>j.zone_id=e,class:["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":N.zone_id||_.apiErrors.zone_id}]},[o("option",{value:""},"Chọn zone"),(u(!0),a(p,null,c(_.zones,e=>(u(),a("option",{key:e.id,value:e.id},x(e.name),9,["value"]))),128))],10,["onUpdate:modelValue"]),[[g,j.zone_id]]),N.zone_id?(u(),a("p",{key:0,class:"mt-1 text-sm text-red-600"},x(N.zone_id),1)):_.apiErrors.zone_id?(u(),a("p",{key:1,class:"mt-1 text-sm text-red-600"},x(_.apiErrors.zone_id),1)):m("",!0)]),o("div",null,[o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Khối lượng tối thiểu (kg)"),n(o("input",{"onUpdate:modelValue":e=>j.min_weight=e,type:"number",class:["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":N.min_weight||_.apiErrors.min_weight}]},null,10,["onUpdate:modelValue"]),[[b,j.min_weight]]),N.min_weight?(u(),a("p",{key:0,class:"mt-1 text-sm text-red-600"},x(N.min_weight),1)):_.apiErrors.min_weight?(u(),a("p",{key:1,class:"mt-1 text-sm text-red-600"},x(_.apiErrors.min_weight),1)):m("",!0)]),o("div",null,[o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Khối lượng tối đa (kg)"),n(o("input",{"onUpdate:modelValue":e=>j.max_weight=e,type:"number",class:["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":N.max_weight||_.apiErrors.max_weight}]},null,10,["onUpdate:modelValue"]),[[b,j.max_weight]]),N.max_weight?(u(),a("p",{key:0,class:"mt-1 text-sm text-red-600"},x(N.max_weight),1)):_.apiErrors.max_weight?(u(),a("p",{key:1,class:"mt-1 text-sm text-red-600"},x(_.apiErrors.max_weight),1)):m("",!0)]),o("div",null,[o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Tăng giá theo %"),n(o("input",{"onUpdate:modelValue":e=>j.markup_percent=e,type:"number",class:["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":N.markup_percent||_.apiErrors.markup_percent}]},null,10,["onUpdate:modelValue"]),[[b,j.markup_percent]]),N.markup_percent?(u(),a("p",{key:0,class:"mt-1 text-sm text-red-600"},x(N.markup_percent),1)):_.apiErrors.markup_percent?(u(),a("p",{key:1,class:"mt-1 text-sm text-red-600"},x(_.apiErrors.markup_percent),1)):m("",!0)]),o("div",null,[o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Tăng giá cố định (VNĐ)"),n(o("input",{"onUpdate:modelValue":e=>j.markup_fixed=e,type:"number",class:["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":N.markup_fixed||_.apiErrors.markup_fixed}]},null,10,["onUpdate:modelValue"]),[[b,j.markup_fixed]]),N.markup_fixed?(u(),a("p",{key:0,class:"mt-1 text-sm text-red-600"},x(N.markup_fixed),1)):_.apiErrors.markup_fixed?(u(),a("p",{key:1,class:"mt-1 text-sm text-red-600"},x(_.apiErrors.markup_fixed),1)):m("",!0)]),o("div",null,[o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Phí tối thiểu (VNĐ)"),n(o("input",{"onUpdate:modelValue":e=>j.min_fee=e,type:"number",class:["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":N.min_fee||_.apiErrors.min_fee}]},null,10,["onUpdate:modelValue"]),[[b,j.min_fee]]),N.min_fee?(u(),a("p",{key:0,class:"mt-1 text-sm text-red-600"},x(N.min_fee),1)):_.apiErrors.min_fee?(u(),a("p",{key:1,class:"mt-1 text-sm text-red-600"},x(_.apiErrors.min_fee),1)):m("",!0)]),o("div",null,[o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Trạng thái"),n(o("select",{"onUpdate:modelValue":e=>j.status=e,class:["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":N.status||_.apiErrors.status}]},[o("option",{value:"active"},"Hoạt động"),o("option",{value:"inactive"},"Không hoạt động")],10,["onUpdate:modelValue"]),[[g,j.status]]),N.status?(u(),a("p",{key:0,class:"mt-1 text-sm text-red-600"},x(N.status),1)):_.apiErrors.status?(u(),a("p",{key:1,class:"mt-1 text-sm text-red-600"},x(_.apiErrors.status),1)):m("",!0)]),o("div",{class:"flex justify-end space-x-3 pt-4"},[o("button",{type:"button",onClick:T,class:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none"},"Huỷ"),o("button",{type:"submit",class:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none"},x("edit"===_.mode?"Cập nhật":"Thêm mới"),1)])],32)];r(`<form class="space-y-4"${i}><div${i}><label class="block text-sm font-medium text-gray-700 mb-1"${i}>Dịch vụ <span class="text-red-500"${i}>*</span></label><select class="${h([{"border-red-500":N.service_id||_.apiErrors.service_id},"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"])}"${i}><option value=""${y(Array.isArray(j.service_id)?v(j.service_id,""):$(j.service_id,""))?" selected":""}${i}>Chọn dịch vụ</option>\x3c!--[--\x3e`),w(_.services,e=>{r(`<option${k("value",e.id)}${y(Array.isArray(j.service_id)?v(j.service_id,e.id):$(j.service_id,e.id))?" selected":""}${i}>${E(e.name)}</option>`)}),r("\x3c!--]--\x3e</select>"),N.service_id?r(`<p class="mt-1 text-sm text-red-600"${i}>${E(N.service_id)}</p>`):_.apiErrors.service_id?r(`<p class="mt-1 text-sm text-red-600"${i}>${E(_.apiErrors.service_id)}</p>`):r("\x3c!----\x3e"),r(`</div><div${i}><label class="block text-sm font-medium text-gray-700 mb-1"${i}>Zone <span class="text-red-500"${i}>*</span></label><select class="${h([{"border-red-500":N.zone_id||_.apiErrors.zone_id},"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"])}"${i}><option value=""${y(Array.isArray(j.zone_id)?v(j.zone_id,""):$(j.zone_id,""))?" selected":""}${i}>Chọn zone</option>\x3c!--[--\x3e`),w(_.zones,e=>{r(`<option${k("value",e.id)}${y(Array.isArray(j.zone_id)?v(j.zone_id,e.id):$(j.zone_id,e.id))?" selected":""}${i}>${E(e.name)}</option>`)}),r("\x3c!--]--\x3e</select>"),N.zone_id?r(`<p class="mt-1 text-sm text-red-600"${i}>${E(N.zone_id)}</p>`):_.apiErrors.zone_id?r(`<p class="mt-1 text-sm text-red-600"${i}>${E(_.apiErrors.zone_id)}</p>`):r("\x3c!----\x3e"),r(`</div><div${i}><label class="block text-sm font-medium text-gray-700 mb-1"${i}>Khối lượng tối thiểu (kg)</label><input${k("value",j.min_weight)} type="number" class="${h([{"border-red-500":N.min_weight||_.apiErrors.min_weight},"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"])}"${i}>`),N.min_weight?r(`<p class="mt-1 text-sm text-red-600"${i}>${E(N.min_weight)}</p>`):_.apiErrors.min_weight?r(`<p class="mt-1 text-sm text-red-600"${i}>${E(_.apiErrors.min_weight)}</p>`):r("\x3c!----\x3e"),r(`</div><div${i}><label class="block text-sm font-medium text-gray-700 mb-1"${i}>Khối lượng tối đa (kg)</label><input${k("value",j.max_weight)} type="number" class="${h([{"border-red-500":N.max_weight||_.apiErrors.max_weight},"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"])}"${i}>`),N.max_weight?r(`<p class="mt-1 text-sm text-red-600"${i}>${E(N.max_weight)}</p>`):_.apiErrors.max_weight?r(`<p class="mt-1 text-sm text-red-600"${i}>${E(_.apiErrors.max_weight)}</p>`):r("\x3c!----\x3e"),r(`</div><div${i}><label class="block text-sm font-medium text-gray-700 mb-1"${i}>Tăng giá theo %</label><input${k("value",j.markup_percent)} type="number" class="${h([{"border-red-500":N.markup_percent||_.apiErrors.markup_percent},"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"])}"${i}>`),N.markup_percent?r(`<p class="mt-1 text-sm text-red-600"${i}>${E(N.markup_percent)}</p>`):_.apiErrors.markup_percent?r(`<p class="mt-1 text-sm text-red-600"${i}>${E(_.apiErrors.markup_percent)}</p>`):r("\x3c!----\x3e"),r(`</div><div${i}><label class="block text-sm font-medium text-gray-700 mb-1"${i}>Tăng giá cố định (VNĐ)</label><input${k("value",j.markup_fixed)} type="number" class="${h([{"border-red-500":N.markup_fixed||_.apiErrors.markup_fixed},"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"])}"${i}>`),N.markup_fixed?r(`<p class="mt-1 text-sm text-red-600"${i}>${E(N.markup_fixed)}</p>`):_.apiErrors.markup_fixed?r(`<p class="mt-1 text-sm text-red-600"${i}>${E(_.apiErrors.markup_fixed)}</p>`):r("\x3c!----\x3e"),r(`</div><div${i}><label class="block text-sm font-medium text-gray-700 mb-1"${i}>Phí tối thiểu (VNĐ)</label><input${k("value",j.min_fee)} type="number" class="${h([{"border-red-500":N.min_fee||_.apiErrors.min_fee},"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"])}"${i}>`),N.min_fee?r(`<p class="mt-1 text-sm text-red-600"${i}>${E(N.min_fee)}</p>`):_.apiErrors.min_fee?r(`<p class="mt-1 text-sm text-red-600"${i}>${E(_.apiErrors.min_fee)}</p>`):r("\x3c!----\x3e"),r(`</div><div${i}><label class="block text-sm font-medium text-gray-700 mb-1"${i}>Trạng thái</label><select class="${h([{"border-red-500":N.status||_.apiErrors.status},"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"])}"${i}><option value="active"${y(Array.isArray(j.status)?v(j.status,"active"):$(j.status,"active"))?" selected":""}${i}>Hoạt động</option><option value="inactive"${y(Array.isArray(j.status)?v(j.status,"inactive"):$(j.status,"inactive"))?" selected":""}${i}>Không hoạt động</option></select>`),N.status?r(`<p class="mt-1 text-sm text-red-600"${i}>${E(N.status)}</p>`):_.apiErrors.status?r(`<p class="mt-1 text-sm text-red-600"${i}>${E(_.apiErrors.status)}</p>`):r("\x3c!----\x3e"),r(`</div><div class="flex justify-end space-x-3 pt-4"${i}><button type="button" class="px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none"${i}>Huỷ</button><button type="submit" class="px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none"${i}>${E("edit"===_.mode?"Cập nhật":"Thêm mới")}</button></div></form>`)}),_:1},t))}}},U=V.setup;V.setup=(e,r)=>{const t=_();return(t.modules||(t.modules=new Set)).add("pages/admin/Shipping/Pricing/PricingRuleForm.vue"),U?U(e,r):void 0};export{V as default};
