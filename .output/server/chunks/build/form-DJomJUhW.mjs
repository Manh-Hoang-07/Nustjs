import{computed as e,reactive as t,ref as o,watch as r,mergeProps as s,withCtx as a,createVNode as n,withModifiers as d,withDirectives as i,createBlock as u,createCommentVNode as l,createTextVNode as m,vModelText as p,openBlock as c,toDisplayString as b,Fragment as x,renderList as f,vModelSelect as g,useSSRContext as y}from"vue";import{ssrRenderComponent as h,ssrRenderAttr as v,ssrRenderClass as _,ssrInterpolate as $,ssrRenderList as k,ssrIncludeBooleanAttr as w,ssrLooseContain as E,ssrLooseEqual as j}from"vue/server-renderer";import{R as V}from"./Modal-CcMmmM3q.mjs";import{E as T}from"./useApiClient-LtAAs9ek.mjs";import"./_plugin-vue_export-helper-DlAUqK2U.mjs";import"axios";import"./server.mjs";import"../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";import"node:url";import"../routes/renderer.mjs";import"vue-bundle-renderer/runtime";import"unhead/server";import"devalue";import"unhead/utils";import"vue-router";const q={__name:"form",__ssrInlineRender:!0,props:{show:Boolean,order:Object,apiErrors:{type:Object,default:()=>({})},mode:String,loading:{type:Boolean,default:!1}},emits:["submit","cancel"],setup(y,{emit:q}){T();const A=y,C=q,M=e({get:()=>A.show,set:()=>N()}),O=e(()=>"edit"===A.mode?"Chỉnh sửa đơn hàng":"Thêm đơn hàng mới"),S=t({customer_name:"",total_amount:"",status:"",description:"",created_at:"",updated_at:""}),B=t({}),D=o(!1),H=o({});function U(){Object.keys(B).forEach(e=>delete B[e])}r(()=>A.order,e=>{e?(S.customer_name=e.customer_name||"",S.total_amount=e.total_amount||"",S.status=e.status||Object.keys(H.value)[0]||"",S.description=e.description||"",S.created_at=e.created_at||"",S.updated_at=e.updated_at||""):(S.customer_name="",S.total_amount="",S.status=Object.keys(H.value)[0]||"",S.description="",S.created_at="",S.updated_at="",U())},{immediate:!0});const R=e(()=>({customer_name:[{required:"Khách hàng là bắt buộc"},{max:[100,"Tên khách hàng không được vượt quá 100 ký tự"]}],total_amount:[{required:"Tổng tiền là bắt buộc và phải là số"},{number:"Tổng tiền phải là số"},{min:[0,"Tổng tiền không được âm"]}],description:[{max:[500,"Mô tả không được vượt quá 500 ký tự"]}]}));function K(){if(function(){U();let e=!0;const t=R.value;for(const o in t)for(const r of t[o]){if(r.required&&!S[o]){B[o]=r.required,e=!1;break}if(r.max&&S[o]&&S[o].length>r.max[0]){B[o]=r.max[1],e=!1;break}if(r.number&&S[o]&&isNaN(Number(S[o]))){B[o]=r.number,e=!1;break}if(r.min&&S[o]&&Number(S[o])<r.min[0]){B[o]=r.min[1],e=!1;break}}return e}()){D.value=!0;try{const e=new FormData;Object.entries(S).forEach(([t,o])=>{null!=o&&""!==o&&e.append(t,o)}),C("submit",e)}finally{D.value=!1}}}function N(){C("cancel")}return(e,t,o,r)=>{t(h(V,s({modelValue:M.value,"onUpdate:modelValue":e=>M.value=e,title:O.value,loading:y.loading},r),{default:a((e,t,o,r)=>{if(!t)return[n("form",{onSubmit:d(K,["prevent"]),class:"space-y-4"},[n("div",null,[n("label",{class:"block text-sm font-medium mb-1"},[m("Khách hàng "),n("span",{class:"text-red-500"},"*")]),i(n("input",{"onUpdate:modelValue":e=>S.customer_name=e,type:"text",class:["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":B.customer_name||y.apiErrors.customer_name}],maxlength:"100"},null,10,["onUpdate:modelValue"]),[[p,S.customer_name]]),B.customer_name?(c(),u("p",{key:0,class:"mt-1 text-sm text-red-600"},b(B.customer_name),1)):y.apiErrors.customer_name?(c(),u("p",{key:1,class:"mt-1 text-sm text-red-600"},b(y.apiErrors.customer_name),1)):l("",!0)]),n("div",null,[n("label",{class:"block text-sm font-medium mb-1"},[m("Tổng tiền "),n("span",{class:"text-red-500"},"*")]),i(n("input",{"onUpdate:modelValue":e=>S.total_amount=e,type:"number",class:["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":B.total_amount||y.apiErrors.total_amount}]},null,10,["onUpdate:modelValue"]),[[p,S.total_amount]]),B.total_amount?(c(),u("p",{key:0,class:"mt-1 text-sm text-red-600"},b(B.total_amount),1)):y.apiErrors.total_amount?(c(),u("p",{key:1,class:"mt-1 text-sm text-red-600"},b(y.apiErrors.total_amount),1)):l("",!0)]),n("div",null,[n("label",{class:"block text-sm font-medium mb-1"},"Trạng thái"),i(n("select",{"onUpdate:modelValue":e=>S.status=e,class:["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":B.status||y.apiErrors.status}]},[(c(!0),u(x,null,f(H.value,(e,t)=>(c(),u("option",{key:t,value:t},b(e),9,["value"]))),128))],10,["onUpdate:modelValue"]),[[g,S.status]]),B.status?(c(),u("p",{key:0,class:"mt-1 text-sm text-red-600"},b(B.status),1)):y.apiErrors.status?(c(),u("p",{key:1,class:"mt-1 text-sm text-red-600"},b(y.apiErrors.status),1)):l("",!0)]),n("div",null,[n("label",{class:"block text-sm font-medium mb-1"},"Mô tả"),i(n("textarea",{"onUpdate:modelValue":e=>S.description=e,class:["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":B.description||y.apiErrors.description}],maxlength:"500"},null,10,["onUpdate:modelValue"]),[[p,S.description]]),B.description?(c(),u("p",{key:0,class:"mt-1 text-sm text-red-600"},b(B.description),1)):y.apiErrors.description?(c(),u("p",{key:1,class:"mt-1 text-sm text-red-600"},b(y.apiErrors.description),1)):l("",!0)]),n("div",null,[n("label",{class:"block text-sm font-medium mb-1"},"Ngày đặt"),i(n("input",{"onUpdate:modelValue":e=>S.created_at=e,type:"date",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"},null,8,["onUpdate:modelValue"]),[[p,S.created_at]])]),n("div",null,[n("label",{class:"block text-sm font-medium mb-1"},"Ngày cập nhật"),i(n("input",{"onUpdate:modelValue":e=>S.updated_at=e,type:"date",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"},null,8,["onUpdate:modelValue"]),[[p,S.updated_at]])]),n("div",{class:"flex justify-end space-x-3 pt-4"},[n("button",{type:"button",onClick:N,class:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none"},"Huỷ"),n("button",{type:"submit",class:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none",disabled:D.value},b(D.value?"Đang xử lý...":"edit"===y.mode?"Cập nhật":"Thêm mới"),9,["disabled"])])],32)];t(`<form class="space-y-4"${r}><div${r}><label class="block text-sm font-medium mb-1"${r}>Khách hàng <span class="text-red-500"${r}>*</span></label><input${v("value",S.customer_name)} type="text" class="${_([{"border-red-500":B.customer_name||y.apiErrors.customer_name},"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"])}" maxlength="100"${r}>`),B.customer_name?t(`<p class="mt-1 text-sm text-red-600"${r}>${$(B.customer_name)}</p>`):y.apiErrors.customer_name?t(`<p class="mt-1 text-sm text-red-600"${r}>${$(y.apiErrors.customer_name)}</p>`):t("\x3c!----\x3e"),t(`</div><div${r}><label class="block text-sm font-medium mb-1"${r}>Tổng tiền <span class="text-red-500"${r}>*</span></label><input${v("value",S.total_amount)} type="number" class="${_([{"border-red-500":B.total_amount||y.apiErrors.total_amount},"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"])}"${r}>`),B.total_amount?t(`<p class="mt-1 text-sm text-red-600"${r}>${$(B.total_amount)}</p>`):y.apiErrors.total_amount?t(`<p class="mt-1 text-sm text-red-600"${r}>${$(y.apiErrors.total_amount)}</p>`):t("\x3c!----\x3e"),t(`</div><div${r}><label class="block text-sm font-medium mb-1"${r}>Trạng thái</label><select class="${_([{"border-red-500":B.status||y.apiErrors.status},"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"])}"${r}>\x3c!--[--\x3e`),k(H.value,(e,o)=>{t(`<option${v("value",o)}${w(Array.isArray(S.status)?E(S.status,o):j(S.status,o))?" selected":""}${r}>${$(e)}</option>`)}),t("\x3c!--]--\x3e</select>"),B.status?t(`<p class="mt-1 text-sm text-red-600"${r}>${$(B.status)}</p>`):y.apiErrors.status?t(`<p class="mt-1 text-sm text-red-600"${r}>${$(y.apiErrors.status)}</p>`):t("\x3c!----\x3e"),t(`</div><div${r}><label class="block text-sm font-medium mb-1"${r}>Mô tả</label><textarea class="${_([{"border-red-500":B.description||y.apiErrors.description},"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"])}" maxlength="500"${r}>${$(S.description)}</textarea>`),B.description?t(`<p class="mt-1 text-sm text-red-600"${r}>${$(B.description)}</p>`):y.apiErrors.description?t(`<p class="mt-1 text-sm text-red-600"${r}>${$(y.apiErrors.description)}</p>`):t("\x3c!----\x3e"),t(`</div><div${r}><label class="block text-sm font-medium mb-1"${r}>Ngày đặt</label><input${v("value",S.created_at)} type="date" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"${r}></div><div${r}><label class="block text-sm font-medium mb-1"${r}>Ngày cập nhật</label><input${v("value",S.updated_at)} type="date" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"${r}></div><div class="flex justify-end space-x-3 pt-4"${r}><button type="button" class="px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none"${r}>Huỷ</button><button type="submit" class="px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none"${w(D.value)?" disabled":""}${r}>${$(D.value?"Đang xử lý...":"edit"===y.mode?"Cập nhật":"Thêm mới")}</button></div></form>`)}),_:1},o))}}},A=q.setup;q.setup=(e,t)=>{const o=y();return(o.modules||(o.modules=new Set)).add("pages/admin/orders/form.vue"),A?A(e,t):void 0};export{q as default};
