import{defineAsyncComponent as e,ref as t,mergeProps as n,unref as s,withCtx as o,createVNode as r,createBlock as a,openBlock as i,useSSRContext as l}from"vue";import{ssrRenderAttrs as u,ssrRenderComponent as c,ssrRenderList as d,ssrInterpolate as p,ssrRenderClass as m,ssrIncludeBooleanAttr as h}from"vue/server-renderer";import{c as x}from"./enums-Bz77BRzt.mjs";import{s as g,r as v,d as f}from"./SkeletonLoader-CWl9hP-i.mjs";import{m as w}from"./ConfirmModal-CltOniOu.mjs";import{i as y}from"./Actions-B-4SIiXX.mjs";import{p as b}from"./endpoints-B4pxijLT.mjs";import"./useApiClient-LtAAs9ek.mjs";import"axios";import"./server.mjs";import"../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";import"node:url";import"../routes/renderer.mjs";import"vue-bundle-renderer/runtime";import"unhead/server";import"devalue";import"unhead/utils";import"vue-router";import"./_plugin-vue_export-helper-DlAUqK2U.mjs";import"./Modal-CcMmmM3q.mjs";const k={__name:"index",__ssrInlineRender:!0,setup(l){const k=e(()=>import("./create-XmJuJ-YI.mjs")),j=e(()=>import("./edit-BCRBNnUX.mjs")),$=e(()=>import("./change-password-DwV1jS0q.mjs")),C=e(()=>import("./assign-role-BeRMfo84.mjs")),M=e(()=>import("./filter-BfDeMsNi.mjs")),{items:A,loading:H,pagination:N,filters:z,fetchData:q,updateFilters:D,deleteItem:K}=g(b.users.list,{defaultFilters:{search:"",status:"",sort_by:"created_at_desc"}}),{showSuccess:L,showError:R}=f(),T=t(null),X=t([]),I=t([]),F=t([]),J=t(!1),O=t(!1),V=t(!1),Q=t(!1),Y=t(!1);function W(e){D(e)}function E(){J.value=!1}function Z(e){T.value=e,O.value=!0}function U(){O.value=!1,T.value=null}function P(){V.value=!1,T.value=null}async function _(e){T.value=e,0===F.value.length&&await async function(){try{const e=await(await fetch(b.roles.list)).json();e.success&&(F.value=e.data)}catch(e){console.error("Error loading roles:",e),R("Không thể tải danh sách vai trò")}}(),Q.value=!0}function S(){Q.value=!1,T.value=null}function ee(e){T.value=e,Y.value=!0}function B(){Y.value=!1,T.value=null}async function te(){await q(),E(),L("Người dùng đã được tạo thành công")}async function ne(){await q(),U(),L("Người dùng đã được cập nhật thành công")}async function se$1(){P(),L("Mật khẩu đã được thay đổi thành công")}async function oe(){await q(),S(),L("Vai trò đã được phân công thành công")}async function ae(){try{await K(T.value.id),B(),L("Người dùng đã được xóa thành công")}catch{R("Không thể xóa người dùng")}}function re$1(e){switch(e){case"active":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"inactive":default:return"bg-gray-100 text-gray-800";case"banned":return"bg-red-100 text-red-800"}}return(e,t,l,g)=>{t(`<div${u(n({class:"container mx-auto p-4"},g))}><div class="flex justify-between items-center mb-6"><h1 class="text-2xl font-bold">Quản lý người dùng</h1><button class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none"> Thêm người dùng mới </button></div>`),t(c(s(M),{"initial-filters":s(z),"onUpdate:filters":W},null,l)),t('<div class="bg-white shadow-md rounded-lg overflow-hidden">'),s(H)?t(c(v,{type:"table",rows:5,columns:5},null,l)):(t('<table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Tên đăng nhập</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Email</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Số điện thoại</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Trạng thái</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Thao tác</th></tr></thead><tbody class="bg-white divide-y divide-gray-200">\x3c!--[--\x3e'),d(s(A),e=>{t(`<tr><td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">${p(e.username||"N/A")}</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${p(e.email)}</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${p(e.phone||"N/A")}</td><td class="px-6 py-4 whitespace-nowrap"><span class="${m([re$1(e.status),"px-2 inline-flex text-xs leading-5 font-semibold rounded-full"])}">${p(function(e){return x("user_status",e)||e||"Không xác định"}(e.status))}</span></td><td class="px-6 py-4 whitespace-nowrap text-sm font-medium">`),t(c(y,{item:e,onEdit:Z,onDelete:ee},{custom:o(({item:e},t,n,s)=>{if(!t)return[r("button",{onClick:t=>function(e){T.value=e,V.value=!0}(e),class:"p-2 rounded-full hover:bg-blue-100 transition-colors duration-200",title:"Đổi mật khẩu"},[(i(),a("svg",{class:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})]))],8,["onClick"]),r("button",{onClick:t=>_(e),class:"p-2 rounded-full hover:bg-green-100 transition-colors duration-200",title:"Phân quyền"},[(i(),a("svg",{class:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]))],8,["onClick"])];t(`<button class="p-2 rounded-full hover:bg-blue-100 transition-colors duration-200" title="Đổi mật khẩu"${s}><svg class="w-4 h-4 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"${s}><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"${s}></path></svg></button><button class="p-2 rounded-full hover:bg-green-100 transition-colors duration-200" title="Phân quyền"${s}><svg class="w-4 h-4 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"${s}><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"${s}></path></svg></button>`)}),_:2},l)),t("</td></tr>")}),t("\x3c!--]--\x3e"),0===s(A).length?t('<tr><td colspan="5" class="px-6 py-4 text-center text-gray-500"> Không có dữ liệu </td></tr>'):t("\x3c!----\x3e"),t("</tbody></table>")),t(`</div><div class="mt-4 flex justify-between items-center"><div class="text-sm text-gray-700"> Hiển thị ${p(s(N).from)} đến ${p(s(N).to)} trên tổng số ${p(s(N).total)} bản ghi </div><div class="flex space-x-1">\x3c!--[--\x3e`),d(s(N).links,e=>{t(`<button${h(!e.url)?" disabled":""} class="${m(["px-3 py-1 border rounded",e.active?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50",!e.url&&"opacity-50 cursor-not-allowed"])}">${e.label??""}</button>`)}),t("\x3c!--]--\x3e</div></div>"),J.value?t(c(s(k),{show:J.value,"status-enums":X.value,"gender-enums":I.value,"role-enums":F.value,"on-close":E,onCreated:te},null,l)):t("\x3c!----\x3e"),O.value?t(c(s(j),{show:O.value,user:T.value,"status-enums":X.value,"gender-enums":I.value,"role-enums":F.value,"on-close":U,onUpdated:ne},null,l)):t("\x3c!----\x3e"),V.value?t(c(s($),{show:V.value,user:T.value,"on-close":P,onPasswordChanged:se$1},null,l)):t("\x3c!----\x3e"),Q.value?t(c(s(C),{show:Q.value,user:T.value,"on-close":S,onRoleAssigned:oe},null,l)):t("\x3c!----\x3e"),Y.value?t(c(w,{show:Y.value,title:"Xác nhận xóa",message:`Bạn có chắc chắn muốn xóa người dùng ${T.value?.username||""}?`,"on-close":B,onConfirm:ae},null,l)):t("\x3c!----\x3e"),t("</div>")}}},j=k.setup;k.setup=(e,t)=>{const n=l();return(n.modules||(n.modules=new Set)).add("pages/admin/Users/index.vue"),j?j(e,t):void 0};export{k as default};
