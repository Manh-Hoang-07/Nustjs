import{ssrRenderAttrs as e,ssrRenderComponent as t}from"vue/server-renderer";import r from"./form-B5KhHmRH.mjs";import{p as o}from"./endpoints-B4pxijLT.mjs";import{ref as i,reactive as s,watch as a,useSSRContext as n}from"vue";import{o as u}from"./enums-Bz77BRzt.mjs";import{E as m}from"./useApiClient-LtAAs9ek.mjs";import"./Modal-CcMmmM3q.mjs";import"./_plugin-vue_export-helper-DlAUqK2U.mjs";import"./FormWrapper-BkWXOK5b.mjs";import"./FormField-C25kxm9c.mjs";import"./useFormDefaults-CTfnk28m.mjs";import"axios";import"./server.mjs";import"../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";import"node:url";import"../routes/renderer.mjs";import"vue-bundle-renderer/runtime";import"unhead/server";import"devalue";import"unhead/utils";import"vue-router";const p={__name:"edit",__ssrInlineRender:!0,props:{show:Boolean,attribute:Object,onClose:Function},emits:["updated"],setup(n,{emit:p}){const d=m(),l=n,c=p,v=i(!1),f=i([]),b=i(null),h=i(!1),j=s({});async function C(e){try{if(!l.attribute)return;Object.keys(j).forEach(e=>delete j[e]);const t={...e,_method:"PUT"};await d.post(o.attributes.update(l.attribute.id),t),c("updated"),l.onClose()}catch(e){if(422===e.response?.status&&e.response?.data?.errors){const t=e.response.data.errors;for(const e in t)Array.isArray(t[e])?j[e]=t[e][0]:j[e]=t[e]}}}function _(){l.onClose&&l.onClose()}return a(()=>l.show,e=>{v.value=e,e?(Object.keys(j).forEach(e=>delete j[e]),async function(){try{const e=u("basic_status");f.value=Array.isArray(e)?e:[]}catch{f.value=[]}}(),l.attribute?.id&&async function(){if(l.attribute?.id){h.value=!0;try{const e=await d.get(`/api/admin/attributes/${l.attribute.id}`);b.value=e.data.data||e.data}catch{b.value=l.attribute}finally{h.value=!1}}}()):(b.value=null,h.value=!1)},{immediate:!0}),(o,i,s,a)=>{i(`<div${e(a)}>`),h.value?i('<div class="flex justify-center items-center p-8"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div><span class="ml-2 text-gray-600">Đang tải dữ liệu...</span></div>'):v.value?i(t(r,{show:v.value,attribute:b.value,"status-enums":f.value,"api-errors":j,onSubmit:C,onCancel:_},null,s)):i("\x3c!----\x3e"),i("</div>")}}},d=p.setup;p.setup=(e,t)=>{const r=n();return(r.modules||(r.modules=new Set)).add("pages/admin/attributes/edit.vue"),d?d(e,t):void 0};export{p as default};
