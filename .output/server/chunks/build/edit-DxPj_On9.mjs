import{ssrRenderAttrs as e,ssrRenderComponent as t}from"vue/server-renderer";import r from"./form-DMvf-l07.mjs";import{p as a}from"./endpoints-B4pxijLT.mjs";import{ref as o,reactive as i,watch as s,useSSRContext as u}from"vue";import{o as n}from"./enums-Bz77BRzt.mjs";import{E as l}from"./useApiClient-LtAAs9ek.mjs";import"./Modal-CcMmmM3q.mjs";import"./_plugin-vue_export-helper-DlAUqK2U.mjs";import"./FormWrapper-BkWXOK5b.mjs";import"./FormField-C25kxm9c.mjs";import"axios";import"./server.mjs";import"../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";import"node:url";import"../routes/renderer.mjs";import"vue-bundle-renderer/runtime";import"unhead/server";import"devalue";import"unhead/utils";import"vue-router";const m={__name:"edit",__ssrInlineRender:!0,props:{show:Boolean,attributeValue:Object,onClose:Function},emits:["updated"],setup(u,{emit:m}){const p=l(),d=u,c=m,v=o(!1),f=o([]),b=o([]),y=o(null),h=o(!1),j=i({});async function w(e){try{if(!d.attributeValue)return;Object.keys(j).forEach(e=>delete j[e]);const t={...e,_method:"PUT"};await p.post(a.attributeValues.update(d.attributeValue.id),t),c("updated"),d.onClose()}catch(e){if(422===e.response?.status&&e.response?.data?.errors){const t=e.response.data.errors;for(const e in t)Array.isArray(t[e])?j[e]=t[e][0]:j[e]=t[e]}}}function V(){d.onClose&&d.onClose()}return s(()=>d.show,e=>{v.value=e,e?(Object.keys(j).forEach(e=>delete j[e]),async function(){try{const e=n("basic_status");f.value=Array.isArray(e)?e:[]}catch{f.value=[]}}(),async function(){try{const e=await p.get(a.attributes.list,{params:{per_page:100}});b.value=e.data.data||[]}catch{b.value=[]}}(),d.attributeValue?.id&&async function(){if(d.attributeValue?.id){h.value=!0;try{const e=await p.get(`/api/admin/attribute-values/${d.attributeValue.id}`);y.value=e.data.data||e.data}catch{y.value=d.attributeValue}finally{h.value=!1}}}()):(y.value=null,h.value=!1)},{immediate:!0}),(a,o,i,s)=>{o(`<div${e(s)}>`),h.value?o('<div class="flex justify-center items-center p-8"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div><span class="ml-2 text-gray-600">Đang tải dữ liệu...</span></div>'):v.value?o(t(r,{show:v.value,"attribute-value":y.value,"attribute-options":b.value,"status-enums":f.value,"api-errors":j,onSubmit:w,onCancel:V},null,i)):o("\x3c!----\x3e"),o("</div>")}}},p=m.setup;m.setup=(e,t)=>{const r=u();return(r.modules||(r.modules=new Set)).add("pages/admin/attribute-values/edit.vue"),p?p(e,t):void 0};export{m as default};
