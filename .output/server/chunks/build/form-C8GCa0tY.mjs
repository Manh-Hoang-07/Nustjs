import{computed as e,reactive as t,ref as r,watch as s,mergeProps as o,withCtx as a,createVNode as d,withModifiers as n,withDirectives as l,createBlock as i,createCommentVNode as m,createTextVNode as u,vModelText as p,openBlock as c,toDisplayString as x,Fragment as b,renderList as h,vModelSelect as g,useSSRContext as f}from"vue";import{ssrRenderComponent as y,ssrRenderAttr as v,ssrRenderClass as $,ssrInterpolate as k,ssrRenderList as E,ssrIncludeBooleanAttr as w,ssrLooseContain as T,ssrLooseEqual as V}from"vue/server-renderer";import{R as j}from"./Modal-CcMmmM3q.mjs";import{o as S}from"./enums-Bz77BRzt.mjs";import"./_plugin-vue_export-helper-DlAUqK2U.mjs";const _={__name:"form",__ssrInlineRender:!0,props:{show:Boolean,warehouse:Object,apiErrors:{type:Object,default:()=>({})},mode:String,loading:{type:Boolean,default:!1}},emits:["submit","cancel"],setup(f,{emit:_}){const A=f,C=_,O=e({get:()=>A.show,set:()=>q()}),B=e(()=>"edit"===A.mode?"Chỉnh sửa kho hàng":"Thêm kho hàng mới"),M=t({name:"",address:"",city:"",province:"",phone:"",email:"",status:"active"}),z=t({}),H=r(!1),R=e(()=>{const e=S("basic_status"),t={};return Array.isArray(e)&&e.forEach(e=>{t[e.value]=e.label}),t}),D=e(()=>({name:[{required:"Tên kho hàng là bắt buộc"},{max:[255,"Tên kho hàng không được vượt quá 255 ký tự"]}],address:[{required:"Địa chỉ là bắt buộc"},{max:[255,"Địa chỉ không được vượt quá 255 ký tự"]}],city:[{max:[255,"Thành phố không được vượt quá 255 ký tự"]}],province:[{max:[255,"Tỉnh/Thành không được vượt quá 255 ký tự"]}],phone:[{max:[20,"Số điện thoại không được vượt quá 20 ký tự"]}],email:[{max:[255,"Email không được vượt quá 255 ký tự"]},{pattern:[/^\S+@\S+\.\S+$/,"Email không hợp lệ"]}],status:[{required:"Trạng thái là bắt buộc"}]}));function U(){Object.keys(z).forEach(e=>delete z[e])}function N(){if(function(){U();let e=!0;const t=D.value;for(const r in t)for(const s of t[r]){if(s.required&&!M[r]){z[r]=s.required,e=!1;break}if(s.max&&M[r]&&M[r].length>s.max[0]){z[r]=s.max[1],e=!1;break}if(s.pattern&&M[r]&&!s.pattern[0].test(M[r])){z[r]=s.pattern[1],e=!1;break}}return e}()){H.value=!0;try{const e={};Object.entries(M).forEach(([t,r])=>{e[t]=r||""}),C("submit",e)}finally{H.value=!1}}}function q(){C("cancel")}return s(()=>A.warehouse,e=>{e?(M.name=e.name||"",M.address=e.address||"",M.city=e.city||"",M.province=e.province||"",M.phone=e.phone||"",M.email=e.email||"",M.status=e.status||Object.keys(R.value)[0]||""):(M.name="",M.address="",M.city="",M.province="",M.phone="",M.email="",M.status="active",U())},{immediate:!0}),(e,t,r,s)=>{t(y(j,o({modelValue:O.value,"onUpdate:modelValue":e=>O.value=e,title:B.value,loading:f.loading},s),{default:a((e,t,r,s)=>{if(!t)return[d("form",{onSubmit:n(N,["prevent"]),class:"space-y-4"},[d("div",null,[d("label",{class:"block text-sm font-medium mb-1"},[u("Tên kho hàng "),d("span",{class:"text-red-500"},"*")]),l(d("input",{"onUpdate:modelValue":e=>M.name=e,type:"text",class:["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":z.name||f.apiErrors.name}],maxlength:"255"},null,10,["onUpdate:modelValue"]),[[p,M.name]]),z.name?(c(),i("p",{key:0,class:"mt-1 text-sm text-red-600"},x(z.name),1)):f.apiErrors.name?(c(),i("p",{key:1,class:"mt-1 text-sm text-red-600"},x(f.apiErrors.name),1)):m("",!0)]),d("div",null,[d("label",{class:"block text-sm font-medium mb-1"},[u("Địa chỉ "),d("span",{class:"text-red-500"},"*")]),l(d("input",{"onUpdate:modelValue":e=>M.address=e,type:"text",class:["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":z.address||f.apiErrors.address}],maxlength:"255"},null,10,["onUpdate:modelValue"]),[[p,M.address]]),z.address?(c(),i("p",{key:0,class:"mt-1 text-sm text-red-600"},x(z.address),1)):f.apiErrors.address?(c(),i("p",{key:1,class:"mt-1 text-sm text-red-600"},x(f.apiErrors.address),1)):m("",!0)]),d("div",null,[d("label",{class:"block text-sm font-medium mb-1"},"Thành phố"),l(d("input",{"onUpdate:modelValue":e=>M.city=e,type:"text",class:["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":z.city||f.apiErrors.city}],maxlength:"255"},null,10,["onUpdate:modelValue"]),[[p,M.city]]),z.city?(c(),i("p",{key:0,class:"mt-1 text-sm text-red-600"},x(z.city),1)):f.apiErrors.city?(c(),i("p",{key:1,class:"mt-1 text-sm text-red-600"},x(f.apiErrors.city),1)):m("",!0)]),d("div",null,[d("label",{class:"block text-sm font-medium mb-1"},"Tỉnh/Thành"),l(d("input",{"onUpdate:modelValue":e=>M.province=e,type:"text",class:["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":z.province||f.apiErrors.province}],maxlength:"255"},null,10,["onUpdate:modelValue"]),[[p,M.province]]),z.province?(c(),i("p",{key:0,class:"mt-1 text-sm text-red-600"},x(z.province),1)):f.apiErrors.province?(c(),i("p",{key:1,class:"mt-1 text-sm text-red-600"},x(f.apiErrors.province),1)):m("",!0)]),d("div",null,[d("label",{class:"block text-sm font-medium mb-1"},"Số điện thoại"),l(d("input",{"onUpdate:modelValue":e=>M.phone=e,type:"text",class:["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":z.phone||f.apiErrors.phone}],maxlength:"20"},null,10,["onUpdate:modelValue"]),[[p,M.phone]]),z.phone?(c(),i("p",{key:0,class:"mt-1 text-sm text-red-600"},x(z.phone),1)):f.apiErrors.phone?(c(),i("p",{key:1,class:"mt-1 text-sm text-red-600"},x(f.apiErrors.phone),1)):m("",!0)]),d("div",null,[d("label",{class:"block text-sm font-medium mb-1"},"Email"),l(d("input",{"onUpdate:modelValue":e=>M.email=e,type:"email",class:["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":z.email||f.apiErrors.email}],maxlength:"255"},null,10,["onUpdate:modelValue"]),[[p,M.email]]),z.email?(c(),i("p",{key:0,class:"mt-1 text-sm text-red-600"},x(z.email),1)):f.apiErrors.email?(c(),i("p",{key:1,class:"mt-1 text-sm text-red-600"},x(f.apiErrors.email),1)):m("",!0)]),d("div",null,[d("label",{class:"block text-sm font-medium mb-1"},"Trạng thái"),l(d("select",{"onUpdate:modelValue":e=>M.status=e,class:["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":z.status||f.apiErrors.status}]},[(c(!0),i(b,null,h(R.value,(e,t)=>(c(),i("option",{key:t,value:t},x(e),9,["value"]))),128))],10,["onUpdate:modelValue"]),[[g,M.status]]),z.status?(c(),i("p",{key:0,class:"mt-1 text-sm text-red-600"},x(z.status),1)):f.apiErrors.status?(c(),i("p",{key:1,class:"mt-1 text-sm text-red-600"},x(f.apiErrors.status),1)):m("",!0)]),d("div",{class:"flex justify-end space-x-3 pt-4"},[d("button",{type:"button",onClick:q,class:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none"},"Huỷ"),d("button",{type:"submit",class:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none",disabled:H.value},x(H.value?"Đang xử lý...":"edit"===f.mode?"Cập nhật":"Thêm mới"),9,["disabled"])])],32)];t(`<form class="space-y-4"${s}><div${s}><label class="block text-sm font-medium mb-1"${s}>Tên kho hàng <span class="text-red-500"${s}>*</span></label><input${v("value",M.name)} type="text" class="${$([{"border-red-500":z.name||f.apiErrors.name},"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"])}" maxlength="255"${s}>`),z.name?t(`<p class="mt-1 text-sm text-red-600"${s}>${k(z.name)}</p>`):f.apiErrors.name?t(`<p class="mt-1 text-sm text-red-600"${s}>${k(f.apiErrors.name)}</p>`):t("\x3c!----\x3e"),t(`</div><div${s}><label class="block text-sm font-medium mb-1"${s}>Địa chỉ <span class="text-red-500"${s}>*</span></label><input${v("value",M.address)} type="text" class="${$([{"border-red-500":z.address||f.apiErrors.address},"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"])}" maxlength="255"${s}>`),z.address?t(`<p class="mt-1 text-sm text-red-600"${s}>${k(z.address)}</p>`):f.apiErrors.address?t(`<p class="mt-1 text-sm text-red-600"${s}>${k(f.apiErrors.address)}</p>`):t("\x3c!----\x3e"),t(`</div><div${s}><label class="block text-sm font-medium mb-1"${s}>Thành phố</label><input${v("value",M.city)} type="text" class="${$([{"border-red-500":z.city||f.apiErrors.city},"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"])}" maxlength="255"${s}>`),z.city?t(`<p class="mt-1 text-sm text-red-600"${s}>${k(z.city)}</p>`):f.apiErrors.city?t(`<p class="mt-1 text-sm text-red-600"${s}>${k(f.apiErrors.city)}</p>`):t("\x3c!----\x3e"),t(`</div><div${s}><label class="block text-sm font-medium mb-1"${s}>Tỉnh/Thành</label><input${v("value",M.province)} type="text" class="${$([{"border-red-500":z.province||f.apiErrors.province},"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"])}" maxlength="255"${s}>`),z.province?t(`<p class="mt-1 text-sm text-red-600"${s}>${k(z.province)}</p>`):f.apiErrors.province?t(`<p class="mt-1 text-sm text-red-600"${s}>${k(f.apiErrors.province)}</p>`):t("\x3c!----\x3e"),t(`</div><div${s}><label class="block text-sm font-medium mb-1"${s}>Số điện thoại</label><input${v("value",M.phone)} type="text" class="${$([{"border-red-500":z.phone||f.apiErrors.phone},"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"])}" maxlength="20"${s}>`),z.phone?t(`<p class="mt-1 text-sm text-red-600"${s}>${k(z.phone)}</p>`):f.apiErrors.phone?t(`<p class="mt-1 text-sm text-red-600"${s}>${k(f.apiErrors.phone)}</p>`):t("\x3c!----\x3e"),t(`</div><div${s}><label class="block text-sm font-medium mb-1"${s}>Email</label><input${v("value",M.email)} type="email" class="${$([{"border-red-500":z.email||f.apiErrors.email},"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"])}" maxlength="255"${s}>`),z.email?t(`<p class="mt-1 text-sm text-red-600"${s}>${k(z.email)}</p>`):f.apiErrors.email?t(`<p class="mt-1 text-sm text-red-600"${s}>${k(f.apiErrors.email)}</p>`):t("\x3c!----\x3e"),t(`</div><div${s}><label class="block text-sm font-medium mb-1"${s}>Trạng thái</label><select class="${$([{"border-red-500":z.status||f.apiErrors.status},"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"])}"${s}>\x3c!--[--\x3e`),E(R.value,(e,r)=>{t(`<option${v("value",r)}${w(Array.isArray(M.status)?T(M.status,r):V(M.status,r))?" selected":""}${s}>${k(e)}</option>`)}),t("\x3c!--]--\x3e</select>"),z.status?t(`<p class="mt-1 text-sm text-red-600"${s}>${k(z.status)}</p>`):f.apiErrors.status?t(`<p class="mt-1 text-sm text-red-600"${s}>${k(f.apiErrors.status)}</p>`):t("\x3c!----\x3e"),t(`</div><div class="flex justify-end space-x-3 pt-4"${s}><button type="button" class="px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none"${s}>Huỷ</button><button type="submit" class="px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none"${w(H.value)?" disabled":""}${s}>${k(H.value?"Đang xử lý...":"edit"===f.mode?"Cập nhật":"Thêm mới")}</button></div></form>`)}),_:1},r))}}},A=_.setup;_.setup=(e,t)=>{const r=f();return(r.modules||(r.modules=new Set)).add("pages/admin/warehouses/form.vue"),A?A(e,t):void 0};export{_ as default};
