import{defineAsyncComponent as t,ref as e,computed as a,mergeProps as s,unref as n,useSSRContext as r}from"vue";import{ssrRenderAttrs as i,ssrRenderComponent as o,ssrRenderList as d,ssrInterpolate as c,ssrRenderClass as l,ssrIncludeBooleanAttr as p}from"vue/server-renderer";import{m as u}from"./ConfirmModal-CltOniOu.mjs";import{i as m}from"./Actions-B-4SIiXX.mjs";import{s as v,r as x,d as h}from"./SkeletonLoader-CWl9hP-i.mjs";import{p as b}from"./endpoints-B4pxijLT.mjs";import{n as f}from"./formatCurrency-CNGtvvPC.mjs";import{s as g}from"./_plugin-vue_export-helper-DlAUqK2U.mjs";import"./Modal-CcMmmM3q.mjs";import"./useApiClient-LtAAs9ek.mjs";import"axios";import"./server.mjs";import"../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";import"node:url";import"../routes/renderer.mjs";import"vue-bundle-renderer/runtime";import"unhead/server";import"devalue";import"unhead/utils";import"vue-router";const w={__name:"index",__ssrInlineRender:!0,setup(r){const g=t(()=>import("./filter-C1N0oeJA.mjs")),w=t(()=>import("./create-BRxlZ3ri.mjs")),_=t(()=>import("./edit-CNvF1Dxr.mjs")),{showSuccess:$,showError:M}=h(),{items:B,loading:L,pagination:P,filters:T,fetchData:H,updateFilters:S,deleteItem:D}=v(b.products.list,{defaultFilters:{search:"",status:"",sort_by:"created_at_desc"},cacheEnabled:!0,debounceTime:300}),I=e(null),U=e(!1),X=e(!1),E=e(!1),G=a(()=>B.value.map(t=>({...t,formattedPrice:f(t.price),formattedSalePrice:t.sale_price?f(t.sale_price):"-",statusLabel:Q(t.status),statusClass:"active"===t.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800",brandName:t.brand?.name||"N/A"})));function R(t){S(t)}function y(){U.value=!1}function j(t){I.value=t,X.value=!0}function k(){X.value=!1,I.value=null}function A(t){I.value=t,E.value=!0}function C(){E.value=!1,I.value=null}async function F(){await H(),y(),$("Tạo sản phẩm thành công!")}async function V(){await H(),k(),$("Cập nhật sản phẩm thành công!")}async function N(){try{await D(I.value.id),C(),$("Xóa sản phẩm thành công!")}catch{M("Có lỗi xảy ra khi xóa sản phẩm")}}function Q(t){return"active"===t?"Đang bán":"inactive"===t?"Ngừng bán":"draft"===t?"Bản nháp":t}return(t,e,a,r)=>{e(`<div${i(s({class:"container mx-auto p-4"},r))} data-v-121c774b><div class="flex justify-between items-center mb-6" data-v-121c774b><h1 class="text-2xl font-bold" data-v-121c774b>Quản lý sản phẩm</h1><button class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none" data-v-121c774b> Thêm sản phẩm mới </button></div>`),e(o(n(g),{"initial-filters":n(T),"onUpdate:filters":R},null,a)),n(L)?(e('<div class="mb-6" data-v-121c774b>'),e(o(x,{type:"table",rows:5,columns:6},null,a)),e("</div>")):(e('<div class="bg-white shadow-md rounded-lg overflow-hidden" data-v-121c774b><table class="min-w-full divide-y divide-gray-200" data-v-121c774b><thead class="bg-gray-50" data-v-121c774b><tr data-v-121c774b><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" data-v-121c774b>ID</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" data-v-121c774b>Tên sản phẩm</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" data-v-121c774b>Giá gốc</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" data-v-121c774b>Giá KM</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" data-v-121c774b>Trạng thái</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" data-v-121c774b>Thao tác</th></tr></thead><tbody class="bg-white divide-y divide-gray-200" data-v-121c774b>\x3c!--[--\x3e'),d(G.value,t=>{e(`<tr data-v-121c774b><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500" data-v-121c774b>${c(t.id)}</td><td class="px-6 py-4 whitespace-nowrap" data-v-121c774b><div class="text-sm font-medium text-gray-900" data-v-121c774b>${c(t.name)}</div></td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500" data-v-121c774b>${c(t.formattedPrice)}</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500" data-v-121c774b>`),t.sale_price?e(`<span class="text-red-600 font-medium" data-v-121c774b>${c(t.formattedSalePrice)}</span>`):e('<span class="text-gray-400" data-v-121c774b>-</span>'),e(`</td><td class="px-6 py-4 whitespace-nowrap" data-v-121c774b><span class="${l([t.statusClass,"px-2 inline-flex text-xs leading-5 font-semibold rounded-full"])}" data-v-121c774b>${c(t.statusLabel)}</span></td><td class="px-6 py-4 whitespace-nowrap text-sm font-medium" data-v-121c774b><div class="flex space-x-2" data-v-121c774b><button class="text-indigo-600 hover:text-indigo-900" title="Chỉnh sửa chi tiết" data-v-121c774b><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-121c774b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" data-v-121c774b></path></svg></button><button class="text-blue-600 hover:text-blue-900" title="Quản lý biến thể" data-v-121c774b><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-121c774b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" data-v-121c774b></path></svg></button><button class="text-green-600 hover:text-green-900" title="Quản lý ảnh" data-v-121c774b><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-121c774b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 002 2z" data-v-121c774b></path></svg></button>`),e(o(m,{item:t,onEdit:j,onDelete:A},null,a)),e("</div></td></tr>")}),e("\x3c!--]--\x3e"),0===n(B).length?e('<tr data-v-121c774b><td colspan="6" class="px-6 py-4 text-center text-gray-500" data-v-121c774b> Không có dữ liệu </td></tr>'):e("\x3c!----\x3e"),e("</tbody></table></div>")),n(B).length>0?(e(`<div class="mt-4 flex justify-between items-center" data-v-121c774b><div class="text-sm text-gray-700" data-v-121c774b> Hiển thị ${c(n(P).from||0)} đến ${c(n(P).to||0)} trên tổng số ${c(n(P).total||0)} bản ghi </div><div class="flex space-x-1" data-v-121c774b>\x3c!--[--\x3e`),d(n(P).links,t=>{e(`<button${p(!t.url)?" disabled":""} class="${l(["px-3 py-1 border rounded",t.active?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50",!t.url&&"opacity-50 cursor-not-allowed"])}" data-v-121c774b>${t.label??""}</button>`)}),e("\x3c!--]--\x3e</div></div>")):e("\x3c!----\x3e"),U.value?e(o(n(w),{show:U.value,"on-close":y,onCreated:F},null,a)):e("\x3c!----\x3e"),X.value?e(o(n(_),{show:X.value,product:I.value,"on-close":k,onUpdated:V},null,a)):e("\x3c!----\x3e"),E.value?e(o(u,{show:E.value,title:"Xác nhận xóa",message:`Bạn có chắc chắn muốn xóa sản phẩm ${I.value?.name||""}?`,"on-close":C,onConfirm:N},null,a)):e("\x3c!----\x3e"),e("</div>")}}},_=w.setup;w.setup=(t,e)=>{const a=r();return(a.modules||(a.modules=new Set)).add("pages/admin/Products/index.vue"),_?_(t,e):void 0};const $=g(w,[["__scopeId","data-v-121c774b"]]);export{$ as default};
