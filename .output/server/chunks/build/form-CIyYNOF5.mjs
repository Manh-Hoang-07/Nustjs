import{computed as e,mergeProps as a,withCtx as l,unref as n,createVNode as r,useSSRContext as o}from"vue";import{ssrRenderComponent as t}from"vue/server-renderer";import{R as u}from"./Modal-CcMmmM3q.mjs";import{j as m}from"./FormWrapper-BkWXOK5b.mjs";import{$ as d}from"./FormField-C25kxm9c.mjs";import{m as s}from"./useFormDefaults-CTfnk28m.mjs";import"./_plugin-vue_export-helper-DlAUqK2U.mjs";const p={__name:"form",__ssrInlineRender:!0,props:{show:Boolean,permission:Object,parentOptions:{type:Array,default:()=>[]},statusEnums:{type:Array,default:()=>[]},apiErrors:{type:Object,default:()=>({})}},emits:["submit","cancel"],setup(o,{emit:p}){const i=o,_=p,V=e(()=>i.permission?"Chỉnh sửa quyền":"Thêm quyền mới"),c=e({get:()=>i.show,set:()=>v()}),f=s(i,"permission",{name:"",display_name:"",guard_name:"web",parent_id:"",status:""}),y=e(()=>({name:[{required:"Tên quyền là bắt buộc."},{max:[255,"Tên quyền không được vượt quá 255 ký tự."]}],display_name:[{max:[255,"Tên hiển thị không được vượt quá 255 ký tự."]}],guard_name:[{max:[255,"Guard không được vượt quá 255 ký tự."]}]})),h=e(()=>[{value:"",label:"-- Không có --"},...(i.parentOptions||[]).filter(e=>!i.permission||e.id!==i.permission.id).map(e=>({value:e.id,label:e.display_name||e.name}))]),b=e(()=>(i.statusEnums||[]).map(e=>({value:e.value,label:e.label})));function q(e){_("submit",e)}function v(){_("cancel")}return(e,s,p,i)=>{s(t(u,a({modelValue:c.value,"onUpdate:modelValue":e=>c.value=e,title:V.value},i),{default:l((e,a,u,s)=>{if(!a)return[r(m,{"default-values":n(f),rules:y.value,"api-errors":o.apiErrors,"submit-text":o.permission?"Cập nhật":"Thêm mới",onSubmit:q,onCancel:v},{default:l(({form:e,errors:a,clearError:l,isSubmitting:n})=>[r(d,{modelValue:e.name,"onUpdate:modelValue":[a=>e.name=a,e=>l("name")],label:"Tên quyền",name:"name",error:a.name,required:"",autocomplete:"off"},null,8,["modelValue","onUpdate:modelValue","error"]),r(d,{modelValue:e.display_name,"onUpdate:modelValue":[a=>e.display_name=a,e=>l("display_name")],label:"Tên hiển thị",name:"display_name",error:a.display_name,autocomplete:"off"},null,8,["modelValue","onUpdate:modelValue","error"]),r(d,{modelValue:e.guard_name,"onUpdate:modelValue":[a=>e.guard_name=a,e=>l("guard_name")],label:"Guard",name:"guard_name",error:a.guard_name,autocomplete:"off"},null,8,["modelValue","onUpdate:modelValue","error"]),r(d,{modelValue:e.parent_id,"onUpdate:modelValue":[a=>e.parent_id=a,e=>l("parent_id")],label:"Quyền cha",name:"parent_id",type:"select",options:h.value,error:a.parent_id,placeholder:"Chọn quyền cha"},null,8,["modelValue","onUpdate:modelValue","options","error"]),r(d,{modelValue:e.status,"onUpdate:modelValue":[a=>e.status=a,e=>l("status")],label:"Trạng thái",name:"status",type:"select",options:b.value,error:a.status},null,8,["modelValue","onUpdate:modelValue","options","error"])]),_:1},8,["default-values","rules","api-errors","submit-text"])];a(t(m,{"default-values":n(f),rules:y.value,"api-errors":o.apiErrors,"submit-text":o.permission?"Cập nhật":"Thêm mới",onSubmit:q,onCancel:v},{default:l(({form:e,errors:a,clearError:l,isSubmitting:n},o,u,m)=>{if(!o)return[r(d,{modelValue:e.name,"onUpdate:modelValue":[a=>e.name=a,e=>l("name")],label:"Tên quyền",name:"name",error:a.name,required:"",autocomplete:"off"},null,8,["modelValue","onUpdate:modelValue","error"]),r(d,{modelValue:e.display_name,"onUpdate:modelValue":[a=>e.display_name=a,e=>l("display_name")],label:"Tên hiển thị",name:"display_name",error:a.display_name,autocomplete:"off"},null,8,["modelValue","onUpdate:modelValue","error"]),r(d,{modelValue:e.guard_name,"onUpdate:modelValue":[a=>e.guard_name=a,e=>l("guard_name")],label:"Guard",name:"guard_name",error:a.guard_name,autocomplete:"off"},null,8,["modelValue","onUpdate:modelValue","error"]),r(d,{modelValue:e.parent_id,"onUpdate:modelValue":[a=>e.parent_id=a,e=>l("parent_id")],label:"Quyền cha",name:"parent_id",type:"select",options:h.value,error:a.parent_id,placeholder:"Chọn quyền cha"},null,8,["modelValue","onUpdate:modelValue","options","error"]),r(d,{modelValue:e.status,"onUpdate:modelValue":[a=>e.status=a,e=>l("status")],label:"Trạng thái",name:"status",type:"select",options:b.value,error:a.status},null,8,["modelValue","onUpdate:modelValue","options","error"])];o(t(d,{modelValue:e.name,"onUpdate:modelValue":[a=>e.name=a,e=>l("name")],label:"Tên quyền",name:"name",error:a.name,required:"",autocomplete:"off"},null,u,m)),o(t(d,{modelValue:e.display_name,"onUpdate:modelValue":[a=>e.display_name=a,e=>l("display_name")],label:"Tên hiển thị",name:"display_name",error:a.display_name,autocomplete:"off"},null,u,m)),o(t(d,{modelValue:e.guard_name,"onUpdate:modelValue":[a=>e.guard_name=a,e=>l("guard_name")],label:"Guard",name:"guard_name",error:a.guard_name,autocomplete:"off"},null,u,m)),o(t(d,{modelValue:e.parent_id,"onUpdate:modelValue":[a=>e.parent_id=a,e=>l("parent_id")],label:"Quyền cha",name:"parent_id",type:"select",options:h.value,error:a.parent_id,placeholder:"Chọn quyền cha"},null,u,m)),o(t(d,{modelValue:e.status,"onUpdate:modelValue":[a=>e.status=a,e=>l("status")],label:"Trạng thái",name:"status",type:"select",options:b.value,error:a.status},null,u,m))}),_:1},u,s))}),_:1},p))}}},i=p.setup;p.setup=(e,a)=>{const l=o();return(l.modules||(l.modules=new Set)).add("pages/admin/Permissions/form.vue"),i?i(e,a):void 0};export{p as default};
