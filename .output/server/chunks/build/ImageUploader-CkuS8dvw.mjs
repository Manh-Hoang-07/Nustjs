import{ssrRenderAttrs as e,ssrRenderAttr as t,ssrRenderStyle as r,ssrInterpolate as l}from"vue/server-renderer";import{ref as a,watch as o,useSSRContext as s}from"vue";const n={__name:"CoreImageUploader",__ssrInlineRender:!0,props:{modelValue:File||String||null,defaultUrl:String||null},emits:["update:modelValue","remove"],setup(s,{emit:n}){const u=s,d=a(null),p=a(!1),v=a("");function i(e){return e?e.startsWith("http")?e:e.startsWith("/storage/")?e.replace(/^(\/storage\/)+/,"/storage/"):`/storage/${e.replace(/^\/storage\//,"")}`:null}return o(()=>u.modelValue,e=>{e instanceof File?d.value=URL.createObjectURL(e):d.value="string"==typeof e&&e?i(e):u.defaultUrl?i(u.defaultUrl):null},{immediate:!0}),(a,o,s,n)=>{o(`<div${e(n)}>`),d.value?o(`<div class="mb-2 relative inline-block"><img${t("src",d.value)} alt="preview" class="w-20 h-20 object-cover rounded-full border"><button type="button" class="absolute top-0 right-0 bg-white bg-opacity-80 rounded-full p-1 shadow hover:bg-red-100 transition" style="${r({transform:"translate(40%, -40%)"})}" title="Xóa ảnh"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-red-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div>`):o('<div class="w-20 h-20 flex items-center justify-center bg-gray-100 rounded-full border text-gray-400"><span>No Image</span></div>'),o('<input type="file" accept="image/*">'),p.value?o('<div class="text-xs text-gray-500 mt-1">Đang upload ảnh...</div>'):o("\x3c!----\x3e"),v.value?o(`<div class="text-xs text-red-500 mt-1">${l(v.value)}</div>`):o("\x3c!----\x3e"),o("</div>")}}},u=n.setup;n.setup=(e,t)=>{const r=s();return(r.modules||(r.modules=new Set)).add("components/Core/Image/ImageUploader.vue"),u?u(e,t):void 0};export{n as u};
