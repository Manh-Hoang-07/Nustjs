import{defineAsyncComponent as t,ref as e,computed as a,mergeProps as s,unref as n,useSSRContext as r}from"vue";import{ssrRenderAttrs as i,ssrRenderComponent as o,ssrRenderList as d,ssrInterpolate as l,ssrRenderClass as f,ssrIncludeBooleanAttr as c}from"vue/server-renderer";import{m as p}from"./ConfirmModal-CltOniOu.mjs";import{i as u}from"./Actions-B-4SIiXX.mjs";import{s as m,r as v,d as x}from"./SkeletonLoader-CWl9hP-i.mjs";import{p as h}from"./endpoints-B4pxijLT.mjs";import{n as g}from"./formatCurrency-CNGtvvPC.mjs";import{s as b}from"./_plugin-vue_export-helper-DlAUqK2U.mjs";import"./Modal-CcMmmM3q.mjs";import"./useApiClient-LtAAs9ek.mjs";import"axios";import"./server.mjs";import"../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";import"node:url";import"../routes/renderer.mjs";import"vue-bundle-renderer/runtime";import"unhead/server";import"devalue";import"unhead/utils";import"vue-router";const w={__name:"index",__ssrInlineRender:!0,setup(r){const b=t(()=>import("./filter-CybfYwfk.mjs")),w=t(()=>import("./create-DH1T5wPi.mjs")),_=t(()=>import("./edit-Dqq5hPCL.mjs")),{showSuccess:$,showError:M}=x(),{items:L,loading:P,pagination:T,filters:B,fetchData:H,updateFilters:D,deleteItem:S}=m(h.products.list,{defaultFilters:{search:"",status:"",sort_by:"created_at_desc"},cacheEnabled:!0,debounceTime:300}),I=e(null),q=e(!1),U=e(!1),X=e(!1),E=a(()=>L.value.map(t=>({...t,formattedPrice:g(t.price),formattedSalePrice:t.sale_price?g(t.sale_price):"-",statusLabel:Q(t.status),statusClass:"active"===t.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800",brandName:t.brand?.name||"N/A"})));function R(t){D(t)}function y(){q.value=!1}function j(t){I.value=t,U.value=!0}function k(){U.value=!1,I.value=null}function A(t){I.value=t,X.value=!0}function C(){X.value=!1,I.value=null}async function F(){await H(),y(),$("Tạo sản phẩm thành công!")}async function V(){await H(),k(),$("Cập nhật sản phẩm thành công!")}async function N(){try{await S(I.value.id),C(),$("Xóa sản phẩm thành công!")}catch{M("Có lỗi xảy ra khi xóa sản phẩm")}}function Q(t){return"active"===t?"Đang bán":"inactive"===t?"Ngừng bán":"draft"===t?"Bản nháp":t}return(t,e,a,r)=>{e(`<div${i(s({class:"container mx-auto p-4"},r))} data-v-8f44061f><div class="flex justify-between items-center mb-6" data-v-8f44061f><h1 class="text-2xl font-bold" data-v-8f44061f>Quản lý sản phẩm</h1><button class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none" data-v-8f44061f> Thêm sản phẩm mới </button></div>`),e(o(n(b),{"initial-filters":n(B),"onUpdate:filters":R},null,a)),n(P)?(e('<div class="mb-6" data-v-8f44061f>'),e(o(v,{type:"table",rows:5,columns:6},null,a)),e("</div>")):(e('<div class="bg-white shadow-md rounded-lg overflow-hidden" data-v-8f44061f><table class="min-w-full divide-y divide-gray-200" data-v-8f44061f><thead class="bg-gray-50" data-v-8f44061f><tr data-v-8f44061f><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" data-v-8f44061f>ID</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" data-v-8f44061f>Tên sản phẩm</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" data-v-8f44061f>Giá gốc</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" data-v-8f44061f>Giá KM</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" data-v-8f44061f>Trạng thái</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" data-v-8f44061f>Thao tác</th></tr></thead><tbody class="bg-white divide-y divide-gray-200" data-v-8f44061f>\x3c!--[--\x3e'),d(E.value,t=>{e(`<tr data-v-8f44061f><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500" data-v-8f44061f>${l(t.id)}</td><td class="px-6 py-4 whitespace-nowrap" data-v-8f44061f><div class="text-sm font-medium text-gray-900" data-v-8f44061f>${l(t.name)}</div></td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500" data-v-8f44061f>${l(t.formattedPrice)}</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500" data-v-8f44061f>`),t.sale_price?e(`<span class="text-red-600 font-medium" data-v-8f44061f>${l(t.formattedSalePrice)}</span>`):e('<span class="text-gray-400" data-v-8f44061f>-</span>'),e(`</td><td class="px-6 py-4 whitespace-nowrap" data-v-8f44061f><span class="${f([t.statusClass,"px-2 inline-flex text-xs leading-5 font-semibold rounded-full"])}" data-v-8f44061f>${l(t.statusLabel)}</span></td><td class="px-6 py-4 whitespace-nowrap text-sm font-medium" data-v-8f44061f><div class="flex space-x-2" data-v-8f44061f><button class="text-indigo-600 hover:text-indigo-900" title="Chỉnh sửa chi tiết" data-v-8f44061f><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-8f44061f><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" data-v-8f44061f></path></svg></button><button class="text-blue-600 hover:text-blue-900" title="Quản lý biến thể" data-v-8f44061f><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-8f44061f><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" data-v-8f44061f></path></svg></button><button class="text-green-600 hover:text-green-900" title="Quản lý ảnh" data-v-8f44061f><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-8f44061f><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 002 2z" data-v-8f44061f></path></svg></button>`),e(o(u,{item:t,onEdit:j,onDelete:A},null,a)),e("</div></td></tr>")}),e("\x3c!--]--\x3e"),0===n(L).length?e('<tr data-v-8f44061f><td colspan="6" class="px-6 py-4 text-center text-gray-500" data-v-8f44061f> Không có dữ liệu </td></tr>'):e("\x3c!----\x3e"),e("</tbody></table></div>")),n(L).length>0?(e(`<div class="mt-4 flex justify-between items-center" data-v-8f44061f><div class="text-sm text-gray-700" data-v-8f44061f> Hiển thị ${l(n(T).from||0)} đến ${l(n(T).to||0)} trên tổng số ${l(n(T).total||0)} bản ghi </div><div class="flex space-x-1" data-v-8f44061f>\x3c!--[--\x3e`),d(n(T).links,t=>{e(`<button${c(!t.url)?" disabled":""} class="${f(["px-3 py-1 border rounded",t.active?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50",!t.url&&"opacity-50 cursor-not-allowed"])}" data-v-8f44061f>${t.label??""}</button>`)}),e("\x3c!--]--\x3e</div></div>")):e("\x3c!----\x3e"),q.value?e(o(n(w),{show:q.value,"on-close":y,onCreated:F},null,a)):e("\x3c!----\x3e"),U.value?e(o(n(_),{show:U.value,product:I.value,"on-close":k,onUpdated:V},null,a)):e("\x3c!----\x3e"),X.value?e(o(p,{show:X.value,title:"Xác nhận xóa",message:`Bạn có chắc chắn muốn xóa sản phẩm ${I.value?.name||""}?`,"on-close":C,onConfirm:N},null,a)):e("\x3c!----\x3e"),e("</div>")}}},_=w.setup;w.setup=(t,e)=>{const a=r();return(a.modules||(a.modules=new Set)).add("pages/admin/products/index.vue"),_?_(t,e):void 0};const $=b(w,[["__scopeId","data-v-8f44061f"]]);export{$ as default};
