import{ssrRenderAttrs as e,ssrRenderComponent as r}from"vue/server-renderer";import t from"./form-BjmJLLAm.mjs";import{p as o}from"./endpoints-B4pxijLT.mjs";import{ref as s,reactive as n,watch as i,useSSRContext as a}from"vue";import{E as u}from"./useApiClient-LtAAs9ek.mjs";import"./Modal-CcMmmM3q.mjs";import"./_plugin-vue_export-helper-DlAUqK2U.mjs";import"./server.mjs";import"../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";import"node:url";import"../routes/renderer.mjs";import"vue-bundle-renderer/runtime";import"unhead/server";import"devalue";import"unhead/utils";import"vue-router";import"axios";const l={__name:"edit",__ssrInlineRender:!0,props:{show:Boolean,role:Object,statusEnums:{type:Array,default:()=>[]},onClose:Function},emits:["updated"],setup(a,{emit:l}){const m=u(),d=a,p=l,c=s(!1),v=s(null),f=s(!1),j=n({});async function h(e){try{if(!d.role)return;Object.keys(j).forEach(e=>delete j[e]);const r={...e,_method:"PUT"};await m.post(o.roles.update(d.role.id),r);p("updated"),d.onClose()}catch(e){if(422===e.response?.status&&e.response?.data?.errors){const r=e.response.data.errors;for(const e in r)Array.isArray(r[e])?j[e]=r[e][0]:j[e]=r[e]}}}function C(){d.onClose&&d.onClose()}return i(()=>d.show,e=>{c.value=e,e?(Object.keys(j).forEach(e=>delete j[e]),d.role?.id&&async function(){if(d.role?.id){f.value=!0;try{const e=await m.get(`/api/admin/roles/${d.role.id}`);v.value=e.data.data||e.data}catch{v.value=d.role}finally{f.value=!1}}}()):(v.value=null,f.value=!1)},{immediate:!0}),(o,s,n,i)=>{s(`<div${e(i)}>`),f.value?s('<div class="flex justify-center items-center p-8"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div><span class="ml-2 text-gray-600">Đang tải dữ liệu...</span></div>'):c.value?s(r(t,{show:c.value,role:v.value,"status-enums":a.statusEnums,"api-errors":j,onSubmit:h,onCancel:C},null,n)):s("\x3c!----\x3e"),s("</div>")}}},m=l.setup;l.setup=(e,r)=>{const t=a();return(t.modules||(t.modules=new Set)).add("pages/admin/Roles/edit.vue"),m?m(e,r):void 0};export{l as default};
